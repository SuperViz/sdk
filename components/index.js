var Km=Object.create;var ds=Object.defineProperty,qm=Object.defineProperties,Vm=Object.getOwnPropertyDescriptor,Jm=Object.getOwnPropertyDescriptors,Zm=Object.getOwnPropertyNames,uu=Object.getOwnPropertySymbols,Ym=Object.getPrototypeOf,cu=Object.prototype.hasOwnProperty,Xm=Object.prototype.propertyIsEnumerable;var lu=(o,a,i)=>a in o?ds(o,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[a]=i,_e=(o,a)=>{for(var i in a||(a={}))cu.call(a,i)&&lu(o,i,a[i]);if(uu)for(var i of uu(a))Xm.call(a,i)&&lu(o,i,a[i]);return o},Ct=(o,a)=>qm(o,Jm(a));var Qm=(o,a)=>()=>(o&&(a=o(o=0)),a);var Ee=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var jm=(o,a,i,d)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of Zm(a))!cu.call(o,c)&&c!==i&&ds(o,c,{get:()=>a[c],enumerable:!(d=Vm(a,c))||d.enumerable});return o};var cn=(o,a,i)=>(i=o!=null?Km(Ym(o)):{},jm(a||!o||!o.__esModule?ds(i,"default",{value:o,enumerable:!0}):i,o));var ue=(o,a,i)=>new Promise((d,c)=>{var p=f=>{try{u(i.next(f))}catch(g){c(g)}},E=f=>{try{u(i.throw(f))}catch(g){c(g)}},u=f=>f.done?d(f.value):Promise.resolve(f.value).then(p,E);u((i=i.apply(o,a)).next())});var B,I=Qm(()=>{B={}});var hu=Ee((db,fu)=>{I();var fn=1e3,hn=fn*60,dn=hn*60,Vt=dn*24,tv=Vt*7,nv=Vt*365.25;fu.exports=function(o,a){a=a||{};var i=typeof o;if(i==="string"&&o.length>0)return rv(o);if(i==="number"&&isFinite(o))return a.long?sv(o):iv(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function rv(o){if(o=String(o),!(o.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(!!a){var i=parseFloat(a[1]),d=(a[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return i*nv;case"weeks":case"week":case"w":return i*tv;case"days":case"day":case"d":return i*Vt;case"hours":case"hour":case"hrs":case"hr":case"h":return i*dn;case"minutes":case"minute":case"mins":case"min":case"m":return i*hn;case"seconds":case"second":case"secs":case"sec":case"s":return i*fn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function iv(o){var a=Math.abs(o);return a>=Vt?Math.round(o/Vt)+"d":a>=dn?Math.round(o/dn)+"h":a>=hn?Math.round(o/hn)+"m":a>=fn?Math.round(o/fn)+"s":o+"ms"}function sv(o){var a=Math.abs(o);return a>=Vt?Dr(o,a,Vt,"day"):a>=dn?Dr(o,a,dn,"hour"):a>=hn?Dr(o,a,hn,"minute"):a>=fn?Dr(o,a,fn,"second"):o+" ms"}function Dr(o,a,i,d){var c=a>=i*1.5;return Math.round(o/i)+" "+d+(c?"s":"")}});var pu=Ee((pb,du)=>{I();function ov(o){i.debug=i,i.default=i,i.coerce=f,i.disable=p,i.enable=c,i.enabled=E,i.humanize=hu(),i.destroy=g,Object.keys(o).forEach(y=>{i[y]=o[y]}),i.names=[],i.skips=[],i.formatters={};function a(y){let T=0;for(let C=0;C<y.length;C++)T=(T<<5)-T+y.charCodeAt(C),T|=0;return i.colors[Math.abs(T)%i.colors.length]}i.selectColor=a;function i(y){let T,C=null,L,R;function N(...q){if(!N.enabled)return;let Z=N,fe=Number(new Date),he=fe-(T||fe);Z.diff=he,Z.prev=T,Z.curr=fe,T=fe,q[0]=i.coerce(q[0]),typeof q[0]!="string"&&q.unshift("%O");let pe=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(V,ge)=>{if(V==="%%")return"%";pe++;let be=i.formatters[ge];if(typeof be=="function"){let oe=q[pe];V=be.call(Z,oe),q.splice(pe,1),pe--}return V}),i.formatArgs.call(Z,q),(Z.log||i.log).apply(Z,q)}return N.namespace=y,N.useColors=i.useColors(),N.color=i.selectColor(y),N.extend=d,N.destroy=i.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>C!==null?C:(L!==i.namespaces&&(L=i.namespaces,R=i.enabled(y)),R),set:q=>{C=q}}),typeof i.init=="function"&&i.init(N),N}function d(y,T){let C=i(this.namespace+(typeof T=="undefined"?":":T)+y);return C.log=this.log,C}function c(y){i.save(y),i.namespaces=y,i.names=[],i.skips=[];let T,C=(typeof y=="string"?y:"").split(/[\s,]+/),L=C.length;for(T=0;T<L;T++)!C[T]||(y=C[T].replace(/\*/g,".*?"),y[0]==="-"?i.skips.push(new RegExp("^"+y.slice(1)+"$")):i.names.push(new RegExp("^"+y+"$")))}function p(){let y=[...i.names.map(u),...i.skips.map(u).map(T=>"-"+T)].join(",");return i.enable(""),y}function E(y){if(y[y.length-1]==="*")return!0;let T,C;for(T=0,C=i.skips.length;T<C;T++)if(i.skips[T].test(y))return!1;for(T=0,C=i.names.length;T<C;T++)if(i.names[T].test(y))return!0;return!1}function u(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function f(y){return y instanceof Error?y.stack||y.message:y}function g(){}return i.enable(i.load()),i}du.exports=ov});var gu=Ee((He,Br)=>{I();He.formatArgs=uv;He.save=lv;He.load=cv;He.useColors=av;He.storage=fv();He.destroy=(()=>{let o=!1;return()=>{o||(o=!0)}})();He.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function av(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function uv(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+Br.exports.humanize(this.diff),!this.useColors)return;let a="color: "+this.color;o.splice(1,0,a,"color: inherit");let i=0,d=0;o[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(i++,c==="%c"&&(d=i))}),o.splice(d,0,a)}He.log=console.debug||console.log||(()=>{});function lv(o){try{o?He.storage.setItem("debug",o):He.storage.removeItem("debug")}catch(a){}}function cv(){let o;try{o=He.storage.getItem("debug")}catch(a){}return!o&&typeof process!="undefined"&&"env"in process&&(o=B.DEBUG),o}function fv(){try{return localStorage}catch(o){}}Br.exports=pu()(He);var{formatters:hv}=Br.exports;hv.j=function(o){try{return JSON.stringify(o)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}});var Gr=Ee((mb,vu)=>{I();function dv(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}vu.exports=dv});var _u=Ee((vb,bu)=>{I();var pv=typeof global=="object"&&global&&global.Object===Object&&global;bu.exports=pv});var ps=Ee((bb,Eu)=>{I();var gv=_u(),mv=typeof self=="object"&&self&&self.Object===Object&&self,vv=gv||mv||Function("return this")();Eu.exports=vv});var Tu=Ee((_b,Au)=>{I();var bv=ps(),_v=function(){return bv.Date.now()};Au.exports=_v});var Pu=Ee((Eb,Cu)=>{I();var Ev=/\s/;function Av(o){for(var a=o.length;a--&&Ev.test(o.charAt(a)););return a}Cu.exports=Av});var Ou=Ee((Ab,wu)=>{I();var Tv=Pu(),Cv=/^\s+/;function Pv(o){return o&&o.slice(0,Tv(o)+1).replace(Cv,"")}wu.exports=Pv});var gs=Ee((Tb,yu)=>{I();var wv=ps(),Ov=wv.Symbol;yu.exports=Ov});var Su=Ee((Cb,Lu)=>{I();var Mu=gs(),Iu=Object.prototype,yv=Iu.hasOwnProperty,Mv=Iu.toString,Bn=Mu?Mu.toStringTag:void 0;function Iv(o){var a=yv.call(o,Bn),i=o[Bn];try{o[Bn]=void 0;var d=!0}catch(p){}var c=Mv.call(o);return d&&(a?o[Bn]=i:delete o[Bn]),c}Lu.exports=Iv});var xu=Ee((Pb,Ru)=>{I();var Lv=Object.prototype,Sv=Lv.toString;function Rv(o){return Sv.call(o)}Ru.exports=Rv});var Bu=Ee((wb,Du)=>{I();var Fu=gs(),xv=Su(),Fv=xu(),Nv="[object Null]",Dv="[object Undefined]",Nu=Fu?Fu.toStringTag:void 0;function Bv(o){return o==null?o===void 0?Dv:Nv:Nu&&Nu in Object(o)?xv(o):Fv(o)}Du.exports=Bv});var Uu=Ee((Ob,Gu)=>{I();function Gv(o){return o!=null&&typeof o=="object"}Gu.exports=Gv});var ku=Ee((yb,Wu)=>{I();var Uv=Bu(),Wv=Uu(),kv="[object Symbol]";function Hv(o){return typeof o=="symbol"||Wv(o)&&Uv(o)==kv}Wu.exports=Hv});var Ku=Ee((Mb,$u)=>{I();var zv=Ou(),Hu=Gr(),$v=ku(),zu=0/0,Kv=/^[-+]0x[0-9a-f]+$/i,qv=/^0b[01]+$/i,Vv=/^0o[0-7]+$/i,Jv=parseInt;function Zv(o){if(typeof o=="number")return o;if($v(o))return zu;if(Hu(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=Hu(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=zv(o);var i=qv.test(o);return i||Vv.test(o)?Jv(o.slice(2),i?2:8):Kv.test(o)?zu:+o}$u.exports=Zv});var Ju=Ee((Ib,Vu)=>{I();var Yv=Gr(),ms=Tu(),qu=Ku(),Xv="Expected a function",Qv=Math.max,jv=Math.min;function eb(o,a,i){var d,c,p,E,u,f,g=0,y=!1,T=!1,C=!0;if(typeof o!="function")throw new TypeError(Xv);a=qu(a)||0,Yv(i)&&(y=!!i.leading,T="maxWait"in i,p=T?Qv(qu(i.maxWait)||0,a):p,C="trailing"in i?!!i.trailing:C);function L(V){var ge=d,be=c;return d=c=void 0,g=V,E=o.apply(be,ge),E}function R(V){return g=V,u=setTimeout(Z,a),y?L(V):E}function N(V){var ge=V-f,be=V-g,oe=a-ge;return T?jv(oe,p-be):oe}function q(V){var ge=V-f,be=V-g;return f===void 0||ge>=a||ge<0||T&&be>=p}function Z(){var V=ms();if(q(V))return fe(V);u=setTimeout(Z,N(V))}function fe(V){return u=void 0,C&&d?L(V):(d=c=void 0,E)}function he(){u!==void 0&&clearTimeout(u),g=0,d=f=c=u=void 0}function pe(){return u===void 0?E:fe(ms())}function j(){var V=ms(),ge=q(V);if(d=arguments,c=this,f=V,ge){if(u===void 0)return R(f);if(T)return clearTimeout(u),u=setTimeout(Z,a),L(f)}return u===void 0&&(u=setTimeout(Z,a)),E}return j.cancel=he,j.flush=pe,j}Vu.exports=eb});var Yu=Ee((Lb,Zu)=>{I();var tb=Ju(),nb=Gr(),rb="Expected a function";function ib(o,a,i){var d=!0,c=!0;if(typeof o!="function")throw new TypeError(rb);return nb(i)&&(d="leading"in i?!!i.leading:d,c="trailing"in i?!!i.trailing:c),tb(o,a,{leading:d,maxWait:a,trailing:c})}Zu.exports=ib});var Ur=Ee((pn,Un)=>{I();(function(){var o,a="4.17.21",i=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",p="Invalid `variable` option passed into `_.template`",E="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",g=1,y=2,T=4,C=1,L=2,R=1,N=2,q=4,Z=8,fe=16,he=32,pe=64,j=128,V=256,ge=512,be=30,oe="...",ze=800,Nt=16,Pt=1,Dt=2,Hn=3,at=1/0,et=9007199254740991,zn=17976931348623157e292,Bt=0/0,ut=4294967295,nl=ut-1,rl=ut>>>1,il=[["ary",j],["bind",R],["bindKey",N],["curry",Z],["curryRight",fe],["flip",ge],["partial",he],["partialRight",pe],["rearg",V]],Jt="[object Arguments]",$n="[object Array]",sl="[object AsyncFunction]",gn="[object Boolean]",mn="[object Date]",ol="[object DOMException]",Kn="[object Error]",qn="[object Function]",Ls="[object GeneratorFunction]",tt="[object Map]",vn="[object Number]",al="[object Null]",dt="[object Object]",Ss="[object Promise]",ul="[object Proxy]",bn="[object RegExp]",nt="[object Set]",_n="[object String]",Vn="[object Symbol]",ll="[object Undefined]",En="[object WeakMap]",cl="[object WeakSet]",An="[object ArrayBuffer]",Zt="[object DataView]",qr="[object Float32Array]",Vr="[object Float64Array]",Jr="[object Int8Array]",Zr="[object Int16Array]",Yr="[object Int32Array]",Xr="[object Uint8Array]",Qr="[object Uint8ClampedArray]",jr="[object Uint16Array]",ei="[object Uint32Array]",fl=/\b__p \+= '';/g,hl=/\b(__p \+=) '' \+/g,dl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rs=/&(?:amp|lt|gt|quot|#39);/g,xs=/[&<>"']/g,pl=RegExp(Rs.source),gl=RegExp(xs.source),ml=/<%-([\s\S]+?)%>/g,vl=/<%([\s\S]+?)%>/g,Fs=/<%=([\s\S]+?)%>/g,bl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_l=/^\w*$/,El=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ti=/[\\^$.*+?()[\]{}|]/g,Al=RegExp(ti.source),ni=/^\s+/,Tl=/\s/,Cl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pl=/\{\n\/\* \[wrapped with (.+)\] \*/,wl=/,? & /,Ol=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yl=/[()=,{}\[\]\/\s]/,Ml=/\\(\\)?/g,Il=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ns=/\w*$/,Ll=/^[-+]0x[0-9a-f]+$/i,Sl=/^0b[01]+$/i,Rl=/^\[object .+?Constructor\]$/,xl=/^0o[0-7]+$/i,Fl=/^(?:0|[1-9]\d*)$/,Nl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jn=/($^)/,Dl=/['\n\r\u2028\u2029\\]/g,Zn="\\ud800-\\udfff",Bl="\\u0300-\\u036f",Gl="\\ufe20-\\ufe2f",Ul="\\u20d0-\\u20ff",Ds=Bl+Gl+Ul,Bs="\\u2700-\\u27bf",Gs="a-z\\xdf-\\xf6\\xf8-\\xff",Wl="\\xac\\xb1\\xd7\\xf7",kl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hl="\\u2000-\\u206f",zl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Us="A-Z\\xc0-\\xd6\\xd8-\\xde",Ws="\\ufe0e\\ufe0f",ks=Wl+kl+Hl+zl,ri="['\u2019]",$l="["+Zn+"]",Hs="["+ks+"]",Yn="["+Ds+"]",zs="\\d+",Kl="["+Bs+"]",$s="["+Gs+"]",Ks="[^"+Zn+ks+zs+Bs+Gs+Us+"]",ii="\\ud83c[\\udffb-\\udfff]",ql="(?:"+Yn+"|"+ii+")",qs="[^"+Zn+"]",si="(?:\\ud83c[\\udde6-\\uddff]){2}",oi="[\\ud800-\\udbff][\\udc00-\\udfff]",Yt="["+Us+"]",Vs="\\u200d",Js="(?:"+$s+"|"+Ks+")",Vl="(?:"+Yt+"|"+Ks+")",Zs="(?:"+ri+"(?:d|ll|m|re|s|t|ve))?",Ys="(?:"+ri+"(?:D|LL|M|RE|S|T|VE))?",Xs=ql+"?",Qs="["+Ws+"]?",Jl="(?:"+Vs+"(?:"+[qs,si,oi].join("|")+")"+Qs+Xs+")*",Zl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",js=Qs+Xs+Jl,Xl="(?:"+[Kl,si,oi].join("|")+")"+js,Ql="(?:"+[qs+Yn+"?",Yn,si,oi,$l].join("|")+")",jl=RegExp(ri,"g"),ec=RegExp(Yn,"g"),ai=RegExp(ii+"(?="+ii+")|"+Ql+js,"g"),tc=RegExp([Yt+"?"+$s+"+"+Zs+"(?="+[Hs,Yt,"$"].join("|")+")",Vl+"+"+Ys+"(?="+[Hs,Yt+Js,"$"].join("|")+")",Yt+"?"+Js+"+"+Zs,Yt+"+"+Ys,Yl,Zl,zs,Xl].join("|"),"g"),nc=RegExp("["+Vs+Zn+Ds+Ws+"]"),rc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ic=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sc=-1,ie={};ie[qr]=ie[Vr]=ie[Jr]=ie[Zr]=ie[Yr]=ie[Xr]=ie[Qr]=ie[jr]=ie[ei]=!0,ie[Jt]=ie[$n]=ie[An]=ie[gn]=ie[Zt]=ie[mn]=ie[Kn]=ie[qn]=ie[tt]=ie[vn]=ie[dt]=ie[bn]=ie[nt]=ie[_n]=ie[En]=!1;var re={};re[Jt]=re[$n]=re[An]=re[Zt]=re[gn]=re[mn]=re[qr]=re[Vr]=re[Jr]=re[Zr]=re[Yr]=re[tt]=re[vn]=re[dt]=re[bn]=re[nt]=re[_n]=re[Vn]=re[Xr]=re[Qr]=re[jr]=re[ei]=!0,re[Kn]=re[qn]=re[En]=!1;var oc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ac={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},uc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},lc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cc=parseFloat,fc=parseInt,eo=typeof global=="object"&&global&&global.Object===Object&&global,hc=typeof self=="object"&&self&&self.Object===Object&&self,Ce=eo||hc||Function("return this")(),ui=typeof pn=="object"&&pn&&!pn.nodeType&&pn,Gt=ui&&typeof Un=="object"&&Un&&!Un.nodeType&&Un,to=Gt&&Gt.exports===ui,li=to&&eo.process,$e=function(){try{var b=Gt&&Gt.require&&Gt.require("util").types;return b||li&&li.binding&&li.binding("util")}catch(P){}}(),no=$e&&$e.isArrayBuffer,ro=$e&&$e.isDate,io=$e&&$e.isMap,so=$e&&$e.isRegExp,oo=$e&&$e.isSet,ao=$e&&$e.isTypedArray;function De(b,P,A){switch(A.length){case 0:return b.call(P);case 1:return b.call(P,A[0]);case 2:return b.call(P,A[0],A[1]);case 3:return b.call(P,A[0],A[1],A[2])}return b.apply(P,A)}function dc(b,P,A,x){for(var W=-1,Q=b==null?0:b.length;++W<Q;){var Ae=b[W];P(x,Ae,A(Ae),b)}return x}function Ke(b,P){for(var A=-1,x=b==null?0:b.length;++A<x&&P(b[A],A,b)!==!1;);return b}function pc(b,P){for(var A=b==null?0:b.length;A--&&P(b[A],A,b)!==!1;);return b}function uo(b,P){for(var A=-1,x=b==null?0:b.length;++A<x;)if(!P(b[A],A,b))return!1;return!0}function wt(b,P){for(var A=-1,x=b==null?0:b.length,W=0,Q=[];++A<x;){var Ae=b[A];P(Ae,A,b)&&(Q[W++]=Ae)}return Q}function Xn(b,P){var A=b==null?0:b.length;return!!A&&Xt(b,P,0)>-1}function ci(b,P,A){for(var x=-1,W=b==null?0:b.length;++x<W;)if(A(P,b[x]))return!0;return!1}function ae(b,P){for(var A=-1,x=b==null?0:b.length,W=Array(x);++A<x;)W[A]=P(b[A],A,b);return W}function Ot(b,P){for(var A=-1,x=P.length,W=b.length;++A<x;)b[W+A]=P[A];return b}function fi(b,P,A,x){var W=-1,Q=b==null?0:b.length;for(x&&Q&&(A=b[++W]);++W<Q;)A=P(A,b[W],W,b);return A}function gc(b,P,A,x){var W=b==null?0:b.length;for(x&&W&&(A=b[--W]);W--;)A=P(A,b[W],W,b);return A}function hi(b,P){for(var A=-1,x=b==null?0:b.length;++A<x;)if(P(b[A],A,b))return!0;return!1}var mc=di("length");function vc(b){return b.split("")}function bc(b){return b.match(Ol)||[]}function lo(b,P,A){var x;return A(b,function(W,Q,Ae){if(P(W,Q,Ae))return x=Q,!1}),x}function Qn(b,P,A,x){for(var W=b.length,Q=A+(x?1:-1);x?Q--:++Q<W;)if(P(b[Q],Q,b))return Q;return-1}function Xt(b,P,A){return P===P?Lc(b,P,A):Qn(b,co,A)}function _c(b,P,A,x){for(var W=A-1,Q=b.length;++W<Q;)if(x(b[W],P))return W;return-1}function co(b){return b!==b}function fo(b,P){var A=b==null?0:b.length;return A?gi(b,P)/A:Bt}function di(b){return function(P){return P==null?o:P[b]}}function pi(b){return function(P){return b==null?o:b[P]}}function ho(b,P,A,x,W){return W(b,function(Q,Ae,ne){A=x?(x=!1,Q):P(A,Q,Ae,ne)}),A}function Ec(b,P){var A=b.length;for(b.sort(P);A--;)b[A]=b[A].value;return b}function gi(b,P){for(var A,x=-1,W=b.length;++x<W;){var Q=P(b[x]);Q!==o&&(A=A===o?Q:A+Q)}return A}function mi(b,P){for(var A=-1,x=Array(b);++A<b;)x[A]=P(A);return x}function Ac(b,P){return ae(P,function(A){return[A,b[A]]})}function po(b){return b&&b.slice(0,bo(b)+1).replace(ni,"")}function Be(b){return function(P){return b(P)}}function vi(b,P){return ae(P,function(A){return b[A]})}function Tn(b,P){return b.has(P)}function go(b,P){for(var A=-1,x=b.length;++A<x&&Xt(P,b[A],0)>-1;);return A}function mo(b,P){for(var A=b.length;A--&&Xt(P,b[A],0)>-1;);return A}function Tc(b,P){for(var A=b.length,x=0;A--;)b[A]===P&&++x;return x}var Cc=pi(oc),Pc=pi(ac);function wc(b){return"\\"+lc[b]}function Oc(b,P){return b==null?o:b[P]}function Qt(b){return nc.test(b)}function yc(b){return rc.test(b)}function Mc(b){for(var P,A=[];!(P=b.next()).done;)A.push(P.value);return A}function bi(b){var P=-1,A=Array(b.size);return b.forEach(function(x,W){A[++P]=[W,x]}),A}function vo(b,P){return function(A){return b(P(A))}}function yt(b,P){for(var A=-1,x=b.length,W=0,Q=[];++A<x;){var Ae=b[A];(Ae===P||Ae===f)&&(b[A]=f,Q[W++]=A)}return Q}function jn(b){var P=-1,A=Array(b.size);return b.forEach(function(x){A[++P]=x}),A}function Ic(b){var P=-1,A=Array(b.size);return b.forEach(function(x){A[++P]=[x,x]}),A}function Lc(b,P,A){for(var x=A-1,W=b.length;++x<W;)if(b[x]===P)return x;return-1}function Sc(b,P,A){for(var x=A+1;x--;)if(b[x]===P)return x;return x}function jt(b){return Qt(b)?xc(b):mc(b)}function rt(b){return Qt(b)?Fc(b):vc(b)}function bo(b){for(var P=b.length;P--&&Tl.test(b.charAt(P)););return P}var Rc=pi(uc);function xc(b){for(var P=ai.lastIndex=0;ai.test(b);)++P;return P}function Fc(b){return b.match(ai)||[]}function Nc(b){return b.match(tc)||[]}var Dc=function b(P){P=P==null?Ce:Mt.defaults(Ce.Object(),P,Mt.pick(Ce,ic));var A=P.Array,x=P.Date,W=P.Error,Q=P.Function,Ae=P.Math,ne=P.Object,_i=P.RegExp,Bc=P.String,qe=P.TypeError,er=A.prototype,Gc=Q.prototype,en=ne.prototype,tr=P["__core-js_shared__"],nr=Gc.toString,te=en.hasOwnProperty,Uc=0,_o=function(){var e=/[^.]+$/.exec(tr&&tr.keys&&tr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),rr=en.toString,Wc=nr.call(ne),kc=Ce._,Hc=_i("^"+nr.call(te).replace(ti,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ir=to?P.Buffer:o,It=P.Symbol,sr=P.Uint8Array,Eo=ir?ir.allocUnsafe:o,or=vo(ne.getPrototypeOf,ne),Ao=ne.create,To=en.propertyIsEnumerable,ar=er.splice,Co=It?It.isConcatSpreadable:o,Cn=It?It.iterator:o,Ut=It?It.toStringTag:o,ur=function(){try{var e=$t(ne,"defineProperty");return e({},"",{}),e}catch(t){}}(),zc=P.clearTimeout!==Ce.clearTimeout&&P.clearTimeout,$c=x&&x.now!==Ce.Date.now&&x.now,Kc=P.setTimeout!==Ce.setTimeout&&P.setTimeout,lr=Ae.ceil,cr=Ae.floor,Ei=ne.getOwnPropertySymbols,qc=ir?ir.isBuffer:o,Po=P.isFinite,Vc=er.join,Jc=vo(ne.keys,ne),Te=Ae.max,Oe=Ae.min,Zc=x.now,Yc=P.parseInt,wo=Ae.random,Xc=er.reverse,Ai=$t(P,"DataView"),Pn=$t(P,"Map"),Ti=$t(P,"Promise"),tn=$t(P,"Set"),wn=$t(P,"WeakMap"),On=$t(ne,"create"),fr=wn&&new wn,nn={},Qc=Kt(Ai),jc=Kt(Pn),ef=Kt(Ti),tf=Kt(tn),nf=Kt(wn),hr=It?It.prototype:o,yn=hr?hr.valueOf:o,Oo=hr?hr.toString:o;function l(e){if(de(e)&&!k(e)&&!(e instanceof Y)){if(e instanceof Ve)return e;if(te.call(e,"__wrapped__"))return ya(e)}return new Ve(e)}var rn=function(){function e(){}return function(t){if(!le(t))return{};if(Ao)return Ao(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function dr(){}function Ve(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}l.templateSettings={escape:ml,evaluate:vl,interpolate:Fs,variable:"",imports:{_:l}},l.prototype=dr.prototype,l.prototype.constructor=l,Ve.prototype=rn(dr.prototype),Ve.prototype.constructor=Ve;function Y(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ut,this.__views__=[]}function rf(){var e=new Y(this.__wrapped__);return e.__actions__=Re(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Re(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Re(this.__views__),e}function sf(){if(this.__filtered__){var e=new Y(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function of(){var e=this.__wrapped__.value(),t=this.__dir__,n=k(e),r=t<0,s=n?e.length:0,h=bh(0,s,this.__views__),m=h.start,v=h.end,_=v-m,w=r?v:m-1,O=this.__iteratees__,M=O.length,S=0,F=Oe(_,this.__takeCount__);if(!n||!r&&s==_&&F==_)return Yo(e,this.__actions__);var G=[];e:for(;_--&&S<F;){w+=t;for(var z=-1,U=e[w];++z<M;){var J=O[z],X=J.iteratee,We=J.type,Le=X(U);if(We==Dt)U=Le;else if(!Le){if(We==Pt)continue e;break e}}G[S++]=U}return G}Y.prototype=rn(dr.prototype),Y.prototype.constructor=Y;function Wt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function af(){this.__data__=On?On(null):{},this.size=0}function uf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function lf(e){var t=this.__data__;if(On){var n=t[e];return n===E?o:n}return te.call(t,e)?t[e]:o}function cf(e){var t=this.__data__;return On?t[e]!==o:te.call(t,e)}function ff(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=On&&t===o?E:t,this}Wt.prototype.clear=af,Wt.prototype.delete=uf,Wt.prototype.get=lf,Wt.prototype.has=cf,Wt.prototype.set=ff;function pt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hf(){this.__data__=[],this.size=0}function df(e){var t=this.__data__,n=pr(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ar.call(t,n,1),--this.size,!0}function pf(e){var t=this.__data__,n=pr(t,e);return n<0?o:t[n][1]}function gf(e){return pr(this.__data__,e)>-1}function mf(e,t){var n=this.__data__,r=pr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}pt.prototype.clear=hf,pt.prototype.delete=df,pt.prototype.get=pf,pt.prototype.has=gf,pt.prototype.set=mf;function gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function vf(){this.size=0,this.__data__={hash:new Wt,map:new(Pn||pt),string:new Wt}}function bf(e){var t=Or(this,e).delete(e);return this.size-=t?1:0,t}function _f(e){return Or(this,e).get(e)}function Ef(e){return Or(this,e).has(e)}function Af(e,t){var n=Or(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}gt.prototype.clear=vf,gt.prototype.delete=bf,gt.prototype.get=_f,gt.prototype.has=Ef,gt.prototype.set=Af;function kt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new gt;++t<n;)this.add(e[t])}function Tf(e){return this.__data__.set(e,E),this}function Cf(e){return this.__data__.has(e)}kt.prototype.add=kt.prototype.push=Tf,kt.prototype.has=Cf;function it(e){var t=this.__data__=new pt(e);this.size=t.size}function Pf(){this.__data__=new pt,this.size=0}function wf(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Of(e){return this.__data__.get(e)}function yf(e){return this.__data__.has(e)}function Mf(e,t){var n=this.__data__;if(n instanceof pt){var r=n.__data__;if(!Pn||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new gt(r)}return n.set(e,t),this.size=n.size,this}it.prototype.clear=Pf,it.prototype.delete=wf,it.prototype.get=Of,it.prototype.has=yf,it.prototype.set=Mf;function yo(e,t){var n=k(e),r=!n&&qt(e),s=!n&&!r&&Ft(e),h=!n&&!r&&!s&&un(e),m=n||r||s||h,v=m?mi(e.length,Bc):[],_=v.length;for(var w in e)(t||te.call(e,w))&&!(m&&(w=="length"||s&&(w=="offset"||w=="parent")||h&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||_t(w,_)))&&v.push(w);return v}function Mo(e){var t=e.length;return t?e[xi(0,t-1)]:o}function If(e,t){return yr(Re(e),Ht(t,0,e.length))}function Lf(e){return yr(Re(e))}function Ci(e,t,n){(n!==o&&!st(e[t],n)||n===o&&!(t in e))&&mt(e,t,n)}function Mn(e,t,n){var r=e[t];(!(te.call(e,t)&&st(r,n))||n===o&&!(t in e))&&mt(e,t,n)}function pr(e,t){for(var n=e.length;n--;)if(st(e[n][0],t))return n;return-1}function Sf(e,t,n,r){return Lt(e,function(s,h,m){t(r,s,n(s),m)}),r}function Io(e,t){return e&&ct(t,Pe(t),e)}function Rf(e,t){return e&&ct(t,Fe(t),e)}function mt(e,t,n){t=="__proto__"&&ur?ur(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Pi(e,t){for(var n=-1,r=t.length,s=A(r),h=e==null;++n<r;)s[n]=h?o:is(e,t[n]);return s}function Ht(e,t,n){return e===e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function Je(e,t,n,r,s,h){var m,v=t&g,_=t&y,w=t&T;if(n&&(m=s?n(e,r,s,h):n(e)),m!==o)return m;if(!le(e))return e;var O=k(e);if(O){if(m=Eh(e),!v)return Re(e,m)}else{var M=ye(e),S=M==qn||M==Ls;if(Ft(e))return jo(e,v);if(M==dt||M==Jt||S&&!s){if(m=_||S?{}:ba(e),!v)return _?lh(e,Rf(m,e)):uh(e,Io(m,e))}else{if(!re[M])return s?e:{};m=Ah(e,M,v)}}h||(h=new it);var F=h.get(e);if(F)return F;h.set(e,m),Va(e)?e.forEach(function(U){m.add(Je(U,t,n,U,e,h))}):Ka(e)&&e.forEach(function(U,J){m.set(J,Je(U,t,n,J,e,h))});var G=w?_?$i:zi:_?Fe:Pe,z=O?o:G(e);return Ke(z||e,function(U,J){z&&(J=U,U=e[J]),Mn(m,J,Je(U,t,n,J,e,h))}),m}function xf(e){var t=Pe(e);return function(n){return Lo(n,e,t)}}function Lo(e,t,n){var r=n.length;if(e==null)return!r;for(e=ne(e);r--;){var s=n[r],h=t[s],m=e[s];if(m===o&&!(s in e)||!h(m))return!1}return!0}function So(e,t,n){if(typeof e!="function")throw new qe(c);return Nn(function(){e.apply(o,n)},t)}function In(e,t,n,r){var s=-1,h=Xn,m=!0,v=e.length,_=[],w=t.length;if(!v)return _;n&&(t=ae(t,Be(n))),r?(h=ci,m=!1):t.length>=i&&(h=Tn,m=!1,t=new kt(t));e:for(;++s<v;){var O=e[s],M=n==null?O:n(O);if(O=r||O!==0?O:0,m&&M===M){for(var S=w;S--;)if(t[S]===M)continue e;_.push(O)}else h(t,M,r)||_.push(O)}return _}var Lt=ia(lt),Ro=ia(Oi,!0);function Ff(e,t){var n=!0;return Lt(e,function(r,s,h){return n=!!t(r,s,h),n}),n}function gr(e,t,n){for(var r=-1,s=e.length;++r<s;){var h=e[r],m=t(h);if(m!=null&&(v===o?m===m&&!Ue(m):n(m,v)))var v=m,_=h}return _}function Nf(e,t,n,r){var s=e.length;for(n=H(n),n<0&&(n=-n>s?0:s+n),r=r===o||r>s?s:H(r),r<0&&(r+=s),r=n>r?0:Za(r);n<r;)e[n++]=t;return e}function xo(e,t){var n=[];return Lt(e,function(r,s,h){t(r,s,h)&&n.push(r)}),n}function we(e,t,n,r,s){var h=-1,m=e.length;for(n||(n=Ch),s||(s=[]);++h<m;){var v=e[h];t>0&&n(v)?t>1?we(v,t-1,n,r,s):Ot(s,v):r||(s[s.length]=v)}return s}var wi=sa(),Fo=sa(!0);function lt(e,t){return e&&wi(e,t,Pe)}function Oi(e,t){return e&&Fo(e,t,Pe)}function mr(e,t){return wt(t,function(n){return Et(e[n])})}function zt(e,t){t=Rt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ft(t[n++])];return n&&n==r?e:o}function No(e,t,n){var r=t(e);return k(e)?r:Ot(r,n(e))}function Me(e){return e==null?e===o?ll:al:Ut&&Ut in ne(e)?vh(e):Lh(e)}function yi(e,t){return e>t}function Df(e,t){return e!=null&&te.call(e,t)}function Bf(e,t){return e!=null&&t in ne(e)}function Gf(e,t,n){return e>=Oe(t,n)&&e<Te(t,n)}function Mi(e,t,n){for(var r=n?ci:Xn,s=e[0].length,h=e.length,m=h,v=A(h),_=1/0,w=[];m--;){var O=e[m];m&&t&&(O=ae(O,Be(t))),_=Oe(O.length,_),v[m]=!n&&(t||s>=120&&O.length>=120)?new kt(m&&O):o}O=e[0];var M=-1,S=v[0];e:for(;++M<s&&w.length<_;){var F=O[M],G=t?t(F):F;if(F=n||F!==0?F:0,!(S?Tn(S,G):r(w,G,n))){for(m=h;--m;){var z=v[m];if(!(z?Tn(z,G):r(e[m],G,n)))continue e}S&&S.push(G),w.push(F)}}return w}function Uf(e,t,n,r){return lt(e,function(s,h,m){t(r,n(s),h,m)}),r}function Ln(e,t,n){t=Rt(t,e),e=Ta(e,t);var r=e==null?e:e[ft(Ye(t))];return r==null?o:De(r,e,n)}function Do(e){return de(e)&&Me(e)==Jt}function Wf(e){return de(e)&&Me(e)==An}function kf(e){return de(e)&&Me(e)==mn}function Sn(e,t,n,r,s){return e===t?!0:e==null||t==null||!de(e)&&!de(t)?e!==e&&t!==t:Hf(e,t,n,r,Sn,s)}function Hf(e,t,n,r,s,h){var m=k(e),v=k(t),_=m?$n:ye(e),w=v?$n:ye(t);_=_==Jt?dt:_,w=w==Jt?dt:w;var O=_==dt,M=w==dt,S=_==w;if(S&&Ft(e)){if(!Ft(t))return!1;m=!0,O=!1}if(S&&!O)return h||(h=new it),m||un(e)?ga(e,t,n,r,s,h):gh(e,t,_,n,r,s,h);if(!(n&C)){var F=O&&te.call(e,"__wrapped__"),G=M&&te.call(t,"__wrapped__");if(F||G){var z=F?e.value():e,U=G?t.value():t;return h||(h=new it),s(z,U,n,r,h)}}return S?(h||(h=new it),mh(e,t,n,r,s,h)):!1}function zf(e){return de(e)&&ye(e)==tt}function Ii(e,t,n,r){var s=n.length,h=s,m=!r;if(e==null)return!h;for(e=ne(e);s--;){var v=n[s];if(m&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++s<h;){v=n[s];var _=v[0],w=e[_],O=v[1];if(m&&v[2]){if(w===o&&!(_ in e))return!1}else{var M=new it;if(r)var S=r(w,O,_,e,t,M);if(!(S===o?Sn(O,w,C|L,r,M):S))return!1}}return!0}function Bo(e){if(!le(e)||wh(e))return!1;var t=Et(e)?Hc:Rl;return t.test(Kt(e))}function $f(e){return de(e)&&Me(e)==bn}function Kf(e){return de(e)&&ye(e)==nt}function qf(e){return de(e)&&xr(e.length)&&!!ie[Me(e)]}function Go(e){return typeof e=="function"?e:e==null?Ne:typeof e=="object"?k(e)?ko(e[0],e[1]):Wo(e):ou(e)}function Li(e){if(!Fn(e))return Jc(e);var t=[];for(var n in ne(e))te.call(e,n)&&n!="constructor"&&t.push(n);return t}function Vf(e){if(!le(e))return Ih(e);var t=Fn(e),n=[];for(var r in e)r=="constructor"&&(t||!te.call(e,r))||n.push(r);return n}function Si(e,t){return e<t}function Uo(e,t){var n=-1,r=xe(e)?A(e.length):[];return Lt(e,function(s,h,m){r[++n]=t(s,h,m)}),r}function Wo(e){var t=qi(e);return t.length==1&&t[0][2]?Ea(t[0][0],t[0][1]):function(n){return n===e||Ii(n,e,t)}}function ko(e,t){return Ji(e)&&_a(t)?Ea(ft(e),t):function(n){var r=is(n,e);return r===o&&r===t?ss(n,e):Sn(t,r,C|L)}}function vr(e,t,n,r,s){e!==t&&wi(t,function(h,m){if(s||(s=new it),le(h))Jf(e,t,m,n,vr,r,s);else{var v=r?r(Yi(e,m),h,m+"",e,t,s):o;v===o&&(v=h),Ci(e,m,v)}},Fe)}function Jf(e,t,n,r,s,h,m){var v=Yi(e,n),_=Yi(t,n),w=m.get(_);if(w){Ci(e,n,w);return}var O=h?h(v,_,n+"",e,t,m):o,M=O===o;if(M){var S=k(_),F=!S&&Ft(_),G=!S&&!F&&un(_);O=_,S||F||G?k(v)?O=v:me(v)?O=Re(v):F?(M=!1,O=jo(_,!0)):G?(M=!1,O=ea(_,!0)):O=[]:Dn(_)||qt(_)?(O=v,qt(v)?O=Ya(v):(!le(v)||Et(v))&&(O=ba(_))):M=!1}M&&(m.set(_,O),s(O,_,r,h,m),m.delete(_)),Ci(e,n,O)}function Ho(e,t){var n=e.length;if(!!n)return t+=t<0?n:0,_t(t,n)?e[t]:o}function zo(e,t,n){t.length?t=ae(t,function(h){return k(h)?function(m){return zt(m,h.length===1?h[0]:h)}:h}):t=[Ne];var r=-1;t=ae(t,Be(D()));var s=Uo(e,function(h,m,v){var _=ae(t,function(w){return w(h)});return{criteria:_,index:++r,value:h}});return Ec(s,function(h,m){return ah(h,m,n)})}function Zf(e,t){return $o(e,t,function(n,r){return ss(e,r)})}function $o(e,t,n){for(var r=-1,s=t.length,h={};++r<s;){var m=t[r],v=zt(e,m);n(v,m)&&Rn(h,Rt(m,e),v)}return h}function Yf(e){return function(t){return zt(t,e)}}function Ri(e,t,n,r){var s=r?_c:Xt,h=-1,m=t.length,v=e;for(e===t&&(t=Re(t)),n&&(v=ae(e,Be(n)));++h<m;)for(var _=0,w=t[h],O=n?n(w):w;(_=s(v,O,_,r))>-1;)v!==e&&ar.call(v,_,1),ar.call(e,_,1);return e}function Ko(e,t){for(var n=e?t.length:0,r=n-1;n--;){var s=t[n];if(n==r||s!==h){var h=s;_t(s)?ar.call(e,s,1):Di(e,s)}}return e}function xi(e,t){return e+cr(wo()*(t-e+1))}function Xf(e,t,n,r){for(var s=-1,h=Te(lr((t-e)/(n||1)),0),m=A(h);h--;)m[r?h:++s]=e,e+=n;return m}function Fi(e,t){var n="";if(!e||t<1||t>et)return n;do t%2&&(n+=e),t=cr(t/2),t&&(e+=e);while(t);return n}function $(e,t){return Xi(Aa(e,t,Ne),e+"")}function Qf(e){return Mo(ln(e))}function jf(e,t){var n=ln(e);return yr(n,Ht(t,0,n.length))}function Rn(e,t,n,r){if(!le(e))return e;t=Rt(t,e);for(var s=-1,h=t.length,m=h-1,v=e;v!=null&&++s<h;){var _=ft(t[s]),w=n;if(_==="__proto__"||_==="constructor"||_==="prototype")return e;if(s!=m){var O=v[_];w=r?r(O,_,v):o,w===o&&(w=le(O)?O:_t(t[s+1])?[]:{})}Mn(v,_,w),v=v[_]}return e}var qo=fr?function(e,t){return fr.set(e,t),e}:Ne,eh=ur?function(e,t){return ur(e,"toString",{configurable:!0,enumerable:!1,value:as(t),writable:!0})}:Ne;function th(e){return yr(ln(e))}function Ze(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var h=A(s);++r<s;)h[r]=e[r+t];return h}function nh(e,t){var n;return Lt(e,function(r,s,h){return n=t(r,s,h),!n}),!!n}function br(e,t,n){var r=0,s=e==null?r:e.length;if(typeof t=="number"&&t===t&&s<=rl){for(;r<s;){var h=r+s>>>1,m=e[h];m!==null&&!Ue(m)&&(n?m<=t:m<t)?r=h+1:s=h}return s}return Ni(e,t,Ne,n)}function Ni(e,t,n,r){var s=0,h=e==null?0:e.length;if(h===0)return 0;t=n(t);for(var m=t!==t,v=t===null,_=Ue(t),w=t===o;s<h;){var O=cr((s+h)/2),M=n(e[O]),S=M!==o,F=M===null,G=M===M,z=Ue(M);if(m)var U=r||G;else w?U=G&&(r||S):v?U=G&&S&&(r||!F):_?U=G&&S&&!F&&(r||!z):F||z?U=!1:U=r?M<=t:M<t;U?s=O+1:h=O}return Oe(h,nl)}function Vo(e,t){for(var n=-1,r=e.length,s=0,h=[];++n<r;){var m=e[n],v=t?t(m):m;if(!n||!st(v,_)){var _=v;h[s++]=m===0?0:m}}return h}function Jo(e){return typeof e=="number"?e:Ue(e)?Bt:+e}function Ge(e){if(typeof e=="string")return e;if(k(e))return ae(e,Ge)+"";if(Ue(e))return Oo?Oo.call(e):"";var t=e+"";return t=="0"&&1/e==-at?"-0":t}function St(e,t,n){var r=-1,s=Xn,h=e.length,m=!0,v=[],_=v;if(n)m=!1,s=ci;else if(h>=i){var w=t?null:dh(e);if(w)return jn(w);m=!1,s=Tn,_=new kt}else _=t?[]:v;e:for(;++r<h;){var O=e[r],M=t?t(O):O;if(O=n||O!==0?O:0,m&&M===M){for(var S=_.length;S--;)if(_[S]===M)continue e;t&&_.push(M),v.push(O)}else s(_,M,n)||(_!==v&&_.push(M),v.push(O))}return v}function Di(e,t){return t=Rt(t,e),e=Ta(e,t),e==null||delete e[ft(Ye(t))]}function Zo(e,t,n,r){return Rn(e,t,n(zt(e,t)),r)}function _r(e,t,n,r){for(var s=e.length,h=r?s:-1;(r?h--:++h<s)&&t(e[h],h,e););return n?Ze(e,r?0:h,r?h+1:s):Ze(e,r?h+1:0,r?s:h)}function Yo(e,t){var n=e;return n instanceof Y&&(n=n.value()),fi(t,function(r,s){return s.func.apply(s.thisArg,Ot([r],s.args))},n)}function Bi(e,t,n){var r=e.length;if(r<2)return r?St(e[0]):[];for(var s=-1,h=A(r);++s<r;)for(var m=e[s],v=-1;++v<r;)v!=s&&(h[s]=In(h[s]||m,e[v],t,n));return St(we(h,1),t,n)}function Xo(e,t,n){for(var r=-1,s=e.length,h=t.length,m={};++r<s;){var v=r<h?t[r]:o;n(m,e[r],v)}return m}function Gi(e){return me(e)?e:[]}function Ui(e){return typeof e=="function"?e:Ne}function Rt(e,t){return k(e)?e:Ji(e,t)?[e]:Oa(ee(e))}var rh=$;function xt(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:Ze(e,t,n)}var Qo=zc||function(e){return Ce.clearTimeout(e)};function jo(e,t){if(t)return e.slice();var n=e.length,r=Eo?Eo(n):new e.constructor(n);return e.copy(r),r}function Wi(e){var t=new e.constructor(e.byteLength);return new sr(t).set(new sr(e)),t}function ih(e,t){var n=t?Wi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function sh(e){var t=new e.constructor(e.source,Ns.exec(e));return t.lastIndex=e.lastIndex,t}function oh(e){return yn?ne(yn.call(e)):{}}function ea(e,t){var n=t?Wi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ta(e,t){if(e!==t){var n=e!==o,r=e===null,s=e===e,h=Ue(e),m=t!==o,v=t===null,_=t===t,w=Ue(t);if(!v&&!w&&!h&&e>t||h&&m&&_&&!v&&!w||r&&m&&_||!n&&_||!s)return 1;if(!r&&!h&&!w&&e<t||w&&n&&s&&!r&&!h||v&&n&&s||!m&&s||!_)return-1}return 0}function ah(e,t,n){for(var r=-1,s=e.criteria,h=t.criteria,m=s.length,v=n.length;++r<m;){var _=ta(s[r],h[r]);if(_){if(r>=v)return _;var w=n[r];return _*(w=="desc"?-1:1)}}return e.index-t.index}function na(e,t,n,r){for(var s=-1,h=e.length,m=n.length,v=-1,_=t.length,w=Te(h-m,0),O=A(_+w),M=!r;++v<_;)O[v]=t[v];for(;++s<m;)(M||s<h)&&(O[n[s]]=e[s]);for(;w--;)O[v++]=e[s++];return O}function ra(e,t,n,r){for(var s=-1,h=e.length,m=-1,v=n.length,_=-1,w=t.length,O=Te(h-v,0),M=A(O+w),S=!r;++s<O;)M[s]=e[s];for(var F=s;++_<w;)M[F+_]=t[_];for(;++m<v;)(S||s<h)&&(M[F+n[m]]=e[s++]);return M}function Re(e,t){var n=-1,r=e.length;for(t||(t=A(r));++n<r;)t[n]=e[n];return t}function ct(e,t,n,r){var s=!n;n||(n={});for(var h=-1,m=t.length;++h<m;){var v=t[h],_=r?r(n[v],e[v],v,n,e):o;_===o&&(_=e[v]),s?mt(n,v,_):Mn(n,v,_)}return n}function uh(e,t){return ct(e,Vi(e),t)}function lh(e,t){return ct(e,ma(e),t)}function Er(e,t){return function(n,r){var s=k(n)?dc:Sf,h=t?t():{};return s(n,e,D(r,2),h)}}function sn(e){return $(function(t,n){var r=-1,s=n.length,h=s>1?n[s-1]:o,m=s>2?n[2]:o;for(h=e.length>3&&typeof h=="function"?(s--,h):o,m&&Ie(n[0],n[1],m)&&(h=s<3?o:h,s=1),t=ne(t);++r<s;){var v=n[r];v&&e(t,v,r,h)}return t})}function ia(e,t){return function(n,r){if(n==null)return n;if(!xe(n))return e(n,r);for(var s=n.length,h=t?s:-1,m=ne(n);(t?h--:++h<s)&&r(m[h],h,m)!==!1;);return n}}function sa(e){return function(t,n,r){for(var s=-1,h=ne(t),m=r(t),v=m.length;v--;){var _=m[e?v:++s];if(n(h[_],_,h)===!1)break}return t}}function ch(e,t,n){var r=t&R,s=xn(e);function h(){var m=this&&this!==Ce&&this instanceof h?s:e;return m.apply(r?n:this,arguments)}return h}function oa(e){return function(t){t=ee(t);var n=Qt(t)?rt(t):o,r=n?n[0]:t.charAt(0),s=n?xt(n,1).join(""):t.slice(1);return r[e]()+s}}function on(e){return function(t){return fi(iu(ru(t).replace(jl,"")),e,"")}}function xn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=rn(e.prototype),r=e.apply(n,t);return le(r)?r:n}}function fh(e,t,n){var r=xn(e);function s(){for(var h=arguments.length,m=A(h),v=h,_=an(s);v--;)m[v]=arguments[v];var w=h<3&&m[0]!==_&&m[h-1]!==_?[]:yt(m,_);if(h-=w.length,h<n)return fa(e,t,Ar,s.placeholder,o,m,w,o,o,n-h);var O=this&&this!==Ce&&this instanceof s?r:e;return De(O,this,m)}return s}function aa(e){return function(t,n,r){var s=ne(t);if(!xe(t)){var h=D(n,3);t=Pe(t),n=function(v){return h(s[v],v,s)}}var m=e(t,n,r);return m>-1?s[h?t[m]:m]:o}}function ua(e){return bt(function(t){var n=t.length,r=n,s=Ve.prototype.thru;for(e&&t.reverse();r--;){var h=t[r];if(typeof h!="function")throw new qe(c);if(s&&!m&&wr(h)=="wrapper")var m=new Ve([],!0)}for(r=m?r:n;++r<n;){h=t[r];var v=wr(h),_=v=="wrapper"?Ki(h):o;_&&Zi(_[0])&&_[1]==(j|Z|he|V)&&!_[4].length&&_[9]==1?m=m[wr(_[0])].apply(m,_[3]):m=h.length==1&&Zi(h)?m[v]():m.thru(h)}return function(){var w=arguments,O=w[0];if(m&&w.length==1&&k(O))return m.plant(O).value();for(var M=0,S=n?t[M].apply(this,w):O;++M<n;)S=t[M].call(this,S);return S}})}function Ar(e,t,n,r,s,h,m,v,_,w){var O=t&j,M=t&R,S=t&N,F=t&(Z|fe),G=t&ge,z=S?o:xn(e);function U(){for(var J=arguments.length,X=A(J),We=J;We--;)X[We]=arguments[We];if(F)var Le=an(U),ke=Tc(X,Le);if(r&&(X=na(X,r,s,F)),h&&(X=ra(X,h,m,F)),J-=ke,F&&J<w){var ve=yt(X,Le);return fa(e,t,Ar,U.placeholder,n,X,ve,v,_,w-J)}var ot=M?n:this,Tt=S?ot[e]:e;return J=X.length,v?X=Sh(X,v):G&&J>1&&X.reverse(),O&&_<J&&(X.length=_),this&&this!==Ce&&this instanceof U&&(Tt=z||xn(Tt)),Tt.apply(ot,X)}return U}function la(e,t){return function(n,r){return Uf(n,e,t(r),{})}}function Tr(e,t){return function(n,r){var s;if(n===o&&r===o)return t;if(n!==o&&(s=n),r!==o){if(s===o)return r;typeof n=="string"||typeof r=="string"?(n=Ge(n),r=Ge(r)):(n=Jo(n),r=Jo(r)),s=e(n,r)}return s}}function ki(e){return bt(function(t){return t=ae(t,Be(D())),$(function(n){var r=this;return e(t,function(s){return De(s,r,n)})})})}function Cr(e,t){t=t===o?" ":Ge(t);var n=t.length;if(n<2)return n?Fi(t,e):t;var r=Fi(t,lr(e/jt(t)));return Qt(t)?xt(rt(r),0,e).join(""):r.slice(0,e)}function hh(e,t,n,r){var s=t&R,h=xn(e);function m(){for(var v=-1,_=arguments.length,w=-1,O=r.length,M=A(O+_),S=this&&this!==Ce&&this instanceof m?h:e;++w<O;)M[w]=r[w];for(;_--;)M[w++]=arguments[++v];return De(S,s?n:this,M)}return m}function ca(e){return function(t,n,r){return r&&typeof r!="number"&&Ie(t,n,r)&&(n=r=o),t=At(t),n===o?(n=t,t=0):n=At(n),r=r===o?t<n?1:-1:At(r),Xf(t,n,r,e)}}function Pr(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Xe(t),n=Xe(n)),e(t,n)}}function fa(e,t,n,r,s,h,m,v,_,w){var O=t&Z,M=O?m:o,S=O?o:m,F=O?h:o,G=O?o:h;t|=O?he:pe,t&=~(O?pe:he),t&q||(t&=~(R|N));var z=[e,t,s,F,M,G,S,v,_,w],U=n.apply(o,z);return Zi(e)&&Ca(U,z),U.placeholder=r,Pa(U,e,t)}function Hi(e){var t=Ae[e];return function(n,r){if(n=Xe(n),r=r==null?0:Oe(H(r),292),r&&Po(n)){var s=(ee(n)+"e").split("e"),h=t(s[0]+"e"+(+s[1]+r));return s=(ee(h)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return t(n)}}var dh=tn&&1/jn(new tn([,-0]))[1]==at?function(e){return new tn(e)}:cs;function ha(e){return function(t){var n=ye(t);return n==tt?bi(t):n==nt?Ic(t):Ac(t,e(t))}}function vt(e,t,n,r,s,h,m,v){var _=t&N;if(!_&&typeof e!="function")throw new qe(c);var w=r?r.length:0;if(w||(t&=~(he|pe),r=s=o),m=m===o?m:Te(H(m),0),v=v===o?v:H(v),w-=s?s.length:0,t&pe){var O=r,M=s;r=s=o}var S=_?o:Ki(e),F=[e,t,n,r,s,O,M,h,m,v];if(S&&Mh(F,S),e=F[0],t=F[1],n=F[2],r=F[3],s=F[4],v=F[9]=F[9]===o?_?0:e.length:Te(F[9]-w,0),!v&&t&(Z|fe)&&(t&=~(Z|fe)),!t||t==R)var G=ch(e,t,n);else t==Z||t==fe?G=fh(e,t,v):(t==he||t==(R|he))&&!s.length?G=hh(e,t,n,r):G=Ar.apply(o,F);var z=S?qo:Ca;return Pa(z(G,F),e,t)}function da(e,t,n,r){return e===o||st(e,en[n])&&!te.call(r,n)?t:e}function pa(e,t,n,r,s,h){return le(e)&&le(t)&&(h.set(t,e),vr(e,t,o,pa,h),h.delete(t)),e}function ph(e){return Dn(e)?o:e}function ga(e,t,n,r,s,h){var m=n&C,v=e.length,_=t.length;if(v!=_&&!(m&&_>v))return!1;var w=h.get(e),O=h.get(t);if(w&&O)return w==t&&O==e;var M=-1,S=!0,F=n&L?new kt:o;for(h.set(e,t),h.set(t,e);++M<v;){var G=e[M],z=t[M];if(r)var U=m?r(z,G,M,t,e,h):r(G,z,M,e,t,h);if(U!==o){if(U)continue;S=!1;break}if(F){if(!hi(t,function(J,X){if(!Tn(F,X)&&(G===J||s(G,J,n,r,h)))return F.push(X)})){S=!1;break}}else if(!(G===z||s(G,z,n,r,h))){S=!1;break}}return h.delete(e),h.delete(t),S}function gh(e,t,n,r,s,h,m){switch(n){case Zt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case An:return!(e.byteLength!=t.byteLength||!h(new sr(e),new sr(t)));case gn:case mn:case vn:return st(+e,+t);case Kn:return e.name==t.name&&e.message==t.message;case bn:case _n:return e==t+"";case tt:var v=bi;case nt:var _=r&C;if(v||(v=jn),e.size!=t.size&&!_)return!1;var w=m.get(e);if(w)return w==t;r|=L,m.set(e,t);var O=ga(v(e),v(t),r,s,h,m);return m.delete(e),O;case Vn:if(yn)return yn.call(e)==yn.call(t)}return!1}function mh(e,t,n,r,s,h){var m=n&C,v=zi(e),_=v.length,w=zi(t),O=w.length;if(_!=O&&!m)return!1;for(var M=_;M--;){var S=v[M];if(!(m?S in t:te.call(t,S)))return!1}var F=h.get(e),G=h.get(t);if(F&&G)return F==t&&G==e;var z=!0;h.set(e,t),h.set(t,e);for(var U=m;++M<_;){S=v[M];var J=e[S],X=t[S];if(r)var We=m?r(X,J,S,t,e,h):r(J,X,S,e,t,h);if(!(We===o?J===X||s(J,X,n,r,h):We)){z=!1;break}U||(U=S=="constructor")}if(z&&!U){var Le=e.constructor,ke=t.constructor;Le!=ke&&"constructor"in e&&"constructor"in t&&!(typeof Le=="function"&&Le instanceof Le&&typeof ke=="function"&&ke instanceof ke)&&(z=!1)}return h.delete(e),h.delete(t),z}function bt(e){return Xi(Aa(e,o,La),e+"")}function zi(e){return No(e,Pe,Vi)}function $i(e){return No(e,Fe,ma)}var Ki=fr?function(e){return fr.get(e)}:cs;function wr(e){for(var t=e.name+"",n=nn[t],r=te.call(nn,t)?n.length:0;r--;){var s=n[r],h=s.func;if(h==null||h==e)return s.name}return t}function an(e){var t=te.call(l,"placeholder")?l:e;return t.placeholder}function D(){var e=l.iteratee||us;return e=e===us?Go:e,arguments.length?e(arguments[0],arguments[1]):e}function Or(e,t){var n=e.__data__;return Ph(t)?n[typeof t=="string"?"string":"hash"]:n.map}function qi(e){for(var t=Pe(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,_a(s)]}return t}function $t(e,t){var n=Oc(e,t);return Bo(n)?n:o}function vh(e){var t=te.call(e,Ut),n=e[Ut];try{e[Ut]=o;var r=!0}catch(h){}var s=rr.call(e);return r&&(t?e[Ut]=n:delete e[Ut]),s}var Vi=Ei?function(e){return e==null?[]:(e=ne(e),wt(Ei(e),function(t){return To.call(e,t)}))}:fs,ma=Ei?function(e){for(var t=[];e;)Ot(t,Vi(e)),e=or(e);return t}:fs,ye=Me;(Ai&&ye(new Ai(new ArrayBuffer(1)))!=Zt||Pn&&ye(new Pn)!=tt||Ti&&ye(Ti.resolve())!=Ss||tn&&ye(new tn)!=nt||wn&&ye(new wn)!=En)&&(ye=function(e){var t=Me(e),n=t==dt?e.constructor:o,r=n?Kt(n):"";if(r)switch(r){case Qc:return Zt;case jc:return tt;case ef:return Ss;case tf:return nt;case nf:return En}return t});function bh(e,t,n){for(var r=-1,s=n.length;++r<s;){var h=n[r],m=h.size;switch(h.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Oe(t,e+m);break;case"takeRight":e=Te(e,t-m);break}}return{start:e,end:t}}function _h(e){var t=e.match(Pl);return t?t[1].split(wl):[]}function va(e,t,n){t=Rt(t,e);for(var r=-1,s=t.length,h=!1;++r<s;){var m=ft(t[r]);if(!(h=e!=null&&n(e,m)))break;e=e[m]}return h||++r!=s?h:(s=e==null?0:e.length,!!s&&xr(s)&&_t(m,s)&&(k(e)||qt(e)))}function Eh(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&te.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ba(e){return typeof e.constructor=="function"&&!Fn(e)?rn(or(e)):{}}function Ah(e,t,n){var r=e.constructor;switch(t){case An:return Wi(e);case gn:case mn:return new r(+e);case Zt:return ih(e,n);case qr:case Vr:case Jr:case Zr:case Yr:case Xr:case Qr:case jr:case ei:return ea(e,n);case tt:return new r;case vn:case _n:return new r(e);case bn:return sh(e);case nt:return new r;case Vn:return oh(e)}}function Th(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Cl,`{
/* [wrapped with `+t+`] */
`)}function Ch(e){return k(e)||qt(e)||!!(Co&&e&&e[Co])}function _t(e,t){var n=typeof e;return t=t==null?et:t,!!t&&(n=="number"||n!="symbol"&&Fl.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t,n){if(!le(n))return!1;var r=typeof t;return(r=="number"?xe(n)&&_t(t,n.length):r=="string"&&t in n)?st(n[t],e):!1}function Ji(e,t){if(k(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ue(e)?!0:_l.test(e)||!bl.test(e)||t!=null&&e in ne(t)}function Ph(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Zi(e){var t=wr(e),n=l[t];if(typeof n!="function"||!(t in Y.prototype))return!1;if(e===n)return!0;var r=Ki(n);return!!r&&e===r[0]}function wh(e){return!!_o&&_o in e}var Oh=tr?Et:hs;function Fn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||en;return e===n}function _a(e){return e===e&&!le(e)}function Ea(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==o||e in ne(n))}}function yh(e){var t=Sr(e,function(r){return n.size===u&&n.clear(),r}),n=t.cache;return t}function Mh(e,t){var n=e[1],r=t[1],s=n|r,h=s<(R|N|j),m=r==j&&n==Z||r==j&&n==V&&e[7].length<=t[8]||r==(j|V)&&t[7].length<=t[8]&&n==Z;if(!(h||m))return e;r&R&&(e[2]=t[2],s|=n&R?0:q);var v=t[3];if(v){var _=e[3];e[3]=_?na(_,v,t[4]):v,e[4]=_?yt(e[3],f):t[4]}return v=t[5],v&&(_=e[5],e[5]=_?ra(_,v,t[6]):v,e[6]=_?yt(e[5],f):t[6]),v=t[7],v&&(e[7]=v),r&j&&(e[8]=e[8]==null?t[8]:Oe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function Ih(e){var t=[];if(e!=null)for(var n in ne(e))t.push(n);return t}function Lh(e){return rr.call(e)}function Aa(e,t,n){return t=Te(t===o?e.length-1:t,0),function(){for(var r=arguments,s=-1,h=Te(r.length-t,0),m=A(h);++s<h;)m[s]=r[t+s];s=-1;for(var v=A(t+1);++s<t;)v[s]=r[s];return v[t]=n(m),De(e,this,v)}}function Ta(e,t){return t.length<2?e:zt(e,Ze(t,0,-1))}function Sh(e,t){for(var n=e.length,r=Oe(t.length,n),s=Re(e);r--;){var h=t[r];e[r]=_t(h,n)?s[h]:o}return e}function Yi(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ca=wa(qo),Nn=Kc||function(e,t){return Ce.setTimeout(e,t)},Xi=wa(eh);function Pa(e,t,n){var r=t+"";return Xi(e,Th(r,Rh(_h(r),n)))}function wa(e){var t=0,n=0;return function(){var r=Zc(),s=Nt-(r-n);if(n=r,s>0){if(++t>=ze)return arguments[0]}else t=0;return e.apply(o,arguments)}}function yr(e,t){var n=-1,r=e.length,s=r-1;for(t=t===o?r:t;++n<t;){var h=xi(n,s),m=e[h];e[h]=e[n],e[n]=m}return e.length=t,e}var Oa=yh(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(El,function(n,r,s,h){t.push(s?h.replace(Ml,"$1"):r||n)}),t});function ft(e){if(typeof e=="string"||Ue(e))return e;var t=e+"";return t=="0"&&1/e==-at?"-0":t}function Kt(e){if(e!=null){try{return nr.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Rh(e,t){return Ke(il,function(n){var r="_."+n[0];t&n[1]&&!Xn(e,r)&&e.push(r)}),e.sort()}function ya(e){if(e instanceof Y)return e.clone();var t=new Ve(e.__wrapped__,e.__chain__);return t.__actions__=Re(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function xh(e,t,n){(n?Ie(e,t,n):t===o)?t=1:t=Te(H(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var s=0,h=0,m=A(lr(r/t));s<r;)m[h++]=Ze(e,s,s+=t);return m}function Fh(e){for(var t=-1,n=e==null?0:e.length,r=0,s=[];++t<n;){var h=e[t];h&&(s[r++]=h)}return s}function Nh(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Ot(k(n)?Re(n):[n],we(t,1))}var Dh=$(function(e,t){return me(e)?In(e,we(t,1,me,!0)):[]}),Bh=$(function(e,t){var n=Ye(t);return me(n)&&(n=o),me(e)?In(e,we(t,1,me,!0),D(n,2)):[]}),Gh=$(function(e,t){var n=Ye(t);return me(n)&&(n=o),me(e)?In(e,we(t,1,me,!0),o,n):[]});function Uh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===o?1:H(t),Ze(e,t<0?0:t,r)):[]}function Wh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===o?1:H(t),t=r-t,Ze(e,0,t<0?0:t)):[]}function kh(e,t){return e&&e.length?_r(e,D(t,3),!0,!0):[]}function Hh(e,t){return e&&e.length?_r(e,D(t,3),!0):[]}function zh(e,t,n,r){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&Ie(e,t,n)&&(n=0,r=s),Nf(e,t,n,r)):[]}function Ma(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var s=n==null?0:H(n);return s<0&&(s=Te(r+s,0)),Qn(e,D(t,3),s)}function Ia(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var s=r-1;return n!==o&&(s=H(n),s=n<0?Te(r+s,0):Oe(s,r-1)),Qn(e,D(t,3),s,!0)}function La(e){var t=e==null?0:e.length;return t?we(e,1):[]}function $h(e){var t=e==null?0:e.length;return t?we(e,at):[]}function Kh(e,t){var n=e==null?0:e.length;return n?(t=t===o?1:H(t),we(e,t)):[]}function qh(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var s=e[t];r[s[0]]=s[1]}return r}function Sa(e){return e&&e.length?e[0]:o}function Vh(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var s=n==null?0:H(n);return s<0&&(s=Te(r+s,0)),Xt(e,t,s)}function Jh(e){var t=e==null?0:e.length;return t?Ze(e,0,-1):[]}var Zh=$(function(e){var t=ae(e,Gi);return t.length&&t[0]===e[0]?Mi(t):[]}),Yh=$(function(e){var t=Ye(e),n=ae(e,Gi);return t===Ye(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Mi(n,D(t,2)):[]}),Xh=$(function(e){var t=Ye(e),n=ae(e,Gi);return t=typeof t=="function"?t:o,t&&n.pop(),n.length&&n[0]===e[0]?Mi(n,o,t):[]});function Qh(e,t){return e==null?"":Vc.call(e,t)}function Ye(e){var t=e==null?0:e.length;return t?e[t-1]:o}function jh(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var s=r;return n!==o&&(s=H(n),s=s<0?Te(r+s,0):Oe(s,r-1)),t===t?Sc(e,t,s):Qn(e,co,s,!0)}function ed(e,t){return e&&e.length?Ho(e,H(t)):o}var td=$(Ra);function Ra(e,t){return e&&e.length&&t&&t.length?Ri(e,t):e}function nd(e,t,n){return e&&e.length&&t&&t.length?Ri(e,t,D(n,2)):e}function rd(e,t,n){return e&&e.length&&t&&t.length?Ri(e,t,o,n):e}var id=bt(function(e,t){var n=e==null?0:e.length,r=Pi(e,t);return Ko(e,ae(t,function(s){return _t(s,n)?+s:s}).sort(ta)),r});function sd(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,s=[],h=e.length;for(t=D(t,3);++r<h;){var m=e[r];t(m,r,e)&&(n.push(m),s.push(r))}return Ko(e,s),n}function Qi(e){return e==null?e:Xc.call(e)}function od(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Ie(e,t,n)?(t=0,n=r):(t=t==null?0:H(t),n=n===o?r:H(n)),Ze(e,t,n)):[]}function ad(e,t){return br(e,t)}function ud(e,t,n){return Ni(e,t,D(n,2))}function ld(e,t){var n=e==null?0:e.length;if(n){var r=br(e,t);if(r<n&&st(e[r],t))return r}return-1}function cd(e,t){return br(e,t,!0)}function fd(e,t,n){return Ni(e,t,D(n,2),!0)}function hd(e,t){var n=e==null?0:e.length;if(n){var r=br(e,t,!0)-1;if(st(e[r],t))return r}return-1}function dd(e){return e&&e.length?Vo(e):[]}function pd(e,t){return e&&e.length?Vo(e,D(t,2)):[]}function gd(e){var t=e==null?0:e.length;return t?Ze(e,1,t):[]}function md(e,t,n){return e&&e.length?(t=n||t===o?1:H(t),Ze(e,0,t<0?0:t)):[]}function vd(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===o?1:H(t),t=r-t,Ze(e,t<0?0:t,r)):[]}function bd(e,t){return e&&e.length?_r(e,D(t,3),!1,!0):[]}function _d(e,t){return e&&e.length?_r(e,D(t,3)):[]}var Ed=$(function(e){return St(we(e,1,me,!0))}),Ad=$(function(e){var t=Ye(e);return me(t)&&(t=o),St(we(e,1,me,!0),D(t,2))}),Td=$(function(e){var t=Ye(e);return t=typeof t=="function"?t:o,St(we(e,1,me,!0),o,t)});function Cd(e){return e&&e.length?St(e):[]}function Pd(e,t){return e&&e.length?St(e,D(t,2)):[]}function wd(e,t){return t=typeof t=="function"?t:o,e&&e.length?St(e,o,t):[]}function ji(e){if(!(e&&e.length))return[];var t=0;return e=wt(e,function(n){if(me(n))return t=Te(n.length,t),!0}),mi(t,function(n){return ae(e,di(n))})}function xa(e,t){if(!(e&&e.length))return[];var n=ji(e);return t==null?n:ae(n,function(r){return De(t,o,r)})}var Od=$(function(e,t){return me(e)?In(e,t):[]}),yd=$(function(e){return Bi(wt(e,me))}),Md=$(function(e){var t=Ye(e);return me(t)&&(t=o),Bi(wt(e,me),D(t,2))}),Id=$(function(e){var t=Ye(e);return t=typeof t=="function"?t:o,Bi(wt(e,me),o,t)}),Ld=$(ji);function Sd(e,t){return Xo(e||[],t||[],Mn)}function Rd(e,t){return Xo(e||[],t||[],Rn)}var xd=$(function(e){var t=e.length,n=t>1?e[t-1]:o;return n=typeof n=="function"?(e.pop(),n):o,xa(e,n)});function Fa(e){var t=l(e);return t.__chain__=!0,t}function Fd(e,t){return t(e),e}function Mr(e,t){return t(e)}var Nd=bt(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,s=function(h){return Pi(h,e)};return t>1||this.__actions__.length||!(r instanceof Y)||!_t(n)?this.thru(s):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Mr,args:[s],thisArg:o}),new Ve(r,this.__chain__).thru(function(h){return t&&!h.length&&h.push(o),h}))});function Dd(){return Fa(this)}function Bd(){return new Ve(this.value(),this.__chain__)}function Gd(){this.__values__===o&&(this.__values__=Ja(this.value()));var e=this.__index__>=this.__values__.length,t=e?o:this.__values__[this.__index__++];return{done:e,value:t}}function Ud(){return this}function Wd(e){for(var t,n=this;n instanceof dr;){var r=ya(n);r.__index__=0,r.__values__=o,t?s.__wrapped__=r:t=r;var s=r;n=n.__wrapped__}return s.__wrapped__=e,t}function kd(){var e=this.__wrapped__;if(e instanceof Y){var t=e;return this.__actions__.length&&(t=new Y(this)),t=t.reverse(),t.__actions__.push({func:Mr,args:[Qi],thisArg:o}),new Ve(t,this.__chain__)}return this.thru(Qi)}function Hd(){return Yo(this.__wrapped__,this.__actions__)}var zd=Er(function(e,t,n){te.call(e,n)?++e[n]:mt(e,n,1)});function $d(e,t,n){var r=k(e)?uo:Ff;return n&&Ie(e,t,n)&&(t=o),r(e,D(t,3))}function Kd(e,t){var n=k(e)?wt:xo;return n(e,D(t,3))}var qd=aa(Ma),Vd=aa(Ia);function Jd(e,t){return we(Ir(e,t),1)}function Zd(e,t){return we(Ir(e,t),at)}function Yd(e,t,n){return n=n===o?1:H(n),we(Ir(e,t),n)}function Na(e,t){var n=k(e)?Ke:Lt;return n(e,D(t,3))}function Da(e,t){var n=k(e)?pc:Ro;return n(e,D(t,3))}var Xd=Er(function(e,t,n){te.call(e,n)?e[n].push(t):mt(e,n,[t])});function Qd(e,t,n,r){e=xe(e)?e:ln(e),n=n&&!r?H(n):0;var s=e.length;return n<0&&(n=Te(s+n,0)),Fr(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&Xt(e,t,n)>-1}var jd=$(function(e,t,n){var r=-1,s=typeof t=="function",h=xe(e)?A(e.length):[];return Lt(e,function(m){h[++r]=s?De(t,m,n):Ln(m,t,n)}),h}),ep=Er(function(e,t,n){mt(e,n,t)});function Ir(e,t){var n=k(e)?ae:Uo;return n(e,D(t,3))}function tp(e,t,n,r){return e==null?[]:(k(t)||(t=t==null?[]:[t]),n=r?o:n,k(n)||(n=n==null?[]:[n]),zo(e,t,n))}var np=Er(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function rp(e,t,n){var r=k(e)?fi:ho,s=arguments.length<3;return r(e,D(t,4),n,s,Lt)}function ip(e,t,n){var r=k(e)?gc:ho,s=arguments.length<3;return r(e,D(t,4),n,s,Ro)}function sp(e,t){var n=k(e)?wt:xo;return n(e,Rr(D(t,3)))}function op(e){var t=k(e)?Mo:Qf;return t(e)}function ap(e,t,n){(n?Ie(e,t,n):t===o)?t=1:t=H(t);var r=k(e)?If:jf;return r(e,t)}function up(e){var t=k(e)?Lf:th;return t(e)}function lp(e){if(e==null)return 0;if(xe(e))return Fr(e)?jt(e):e.length;var t=ye(e);return t==tt||t==nt?e.size:Li(e).length}function cp(e,t,n){var r=k(e)?hi:nh;return n&&Ie(e,t,n)&&(t=o),r(e,D(t,3))}var fp=$(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Ie(e,t[0],t[1])?t=[]:n>2&&Ie(t[0],t[1],t[2])&&(t=[t[0]]),zo(e,we(t,1),[])}),Lr=$c||function(){return Ce.Date.now()};function hp(e,t){if(typeof t!="function")throw new qe(c);return e=H(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ba(e,t,n){return t=n?o:t,t=e&&t==null?e.length:t,vt(e,j,o,o,o,o,t)}function Ga(e,t){var n;if(typeof t!="function")throw new qe(c);return e=H(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var es=$(function(e,t,n){var r=R;if(n.length){var s=yt(n,an(es));r|=he}return vt(e,r,t,n,s)}),Ua=$(function(e,t,n){var r=R|N;if(n.length){var s=yt(n,an(Ua));r|=he}return vt(t,r,e,n,s)});function Wa(e,t,n){t=n?o:t;var r=vt(e,Z,o,o,o,o,o,t);return r.placeholder=Wa.placeholder,r}function ka(e,t,n){t=n?o:t;var r=vt(e,fe,o,o,o,o,o,t);return r.placeholder=ka.placeholder,r}function Ha(e,t,n){var r,s,h,m,v,_,w=0,O=!1,M=!1,S=!0;if(typeof e!="function")throw new qe(c);t=Xe(t)||0,le(n)&&(O=!!n.leading,M="maxWait"in n,h=M?Te(Xe(n.maxWait)||0,t):h,S="trailing"in n?!!n.trailing:S);function F(ve){var ot=r,Tt=s;return r=s=o,w=ve,m=e.apply(Tt,ot),m}function G(ve){return w=ve,v=Nn(J,t),O?F(ve):m}function z(ve){var ot=ve-_,Tt=ve-w,au=t-ot;return M?Oe(au,h-Tt):au}function U(ve){var ot=ve-_,Tt=ve-w;return _===o||ot>=t||ot<0||M&&Tt>=h}function J(){var ve=Lr();if(U(ve))return X(ve);v=Nn(J,z(ve))}function X(ve){return v=o,S&&r?F(ve):(r=s=o,m)}function We(){v!==o&&Qo(v),w=0,r=_=s=v=o}function Le(){return v===o?m:X(Lr())}function ke(){var ve=Lr(),ot=U(ve);if(r=arguments,s=this,_=ve,ot){if(v===o)return G(_);if(M)return Qo(v),v=Nn(J,t),F(_)}return v===o&&(v=Nn(J,t)),m}return ke.cancel=We,ke.flush=Le,ke}var dp=$(function(e,t){return So(e,1,t)}),pp=$(function(e,t,n){return So(e,Xe(t)||0,n)});function gp(e){return vt(e,ge)}function Sr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new qe(c);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],h=n.cache;if(h.has(s))return h.get(s);var m=e.apply(this,r);return n.cache=h.set(s,m)||h,m};return n.cache=new(Sr.Cache||gt),n}Sr.Cache=gt;function Rr(e){if(typeof e!="function")throw new qe(c);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function mp(e){return Ga(2,e)}var vp=rh(function(e,t){t=t.length==1&&k(t[0])?ae(t[0],Be(D())):ae(we(t,1),Be(D()));var n=t.length;return $(function(r){for(var s=-1,h=Oe(r.length,n);++s<h;)r[s]=t[s].call(this,r[s]);return De(e,this,r)})}),ts=$(function(e,t){var n=yt(t,an(ts));return vt(e,he,o,t,n)}),za=$(function(e,t){var n=yt(t,an(za));return vt(e,pe,o,t,n)}),bp=bt(function(e,t){return vt(e,V,o,o,o,t)});function _p(e,t){if(typeof e!="function")throw new qe(c);return t=t===o?t:H(t),$(e,t)}function Ep(e,t){if(typeof e!="function")throw new qe(c);return t=t==null?0:Te(H(t),0),$(function(n){var r=n[t],s=xt(n,0,t);return r&&Ot(s,r),De(e,this,s)})}function Ap(e,t,n){var r=!0,s=!0;if(typeof e!="function")throw new qe(c);return le(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),Ha(e,t,{leading:r,maxWait:t,trailing:s})}function Tp(e){return Ba(e,1)}function Cp(e,t){return ts(Ui(t),e)}function Pp(){if(!arguments.length)return[];var e=arguments[0];return k(e)?e:[e]}function wp(e){return Je(e,T)}function Op(e,t){return t=typeof t=="function"?t:o,Je(e,T,t)}function yp(e){return Je(e,g|T)}function Mp(e,t){return t=typeof t=="function"?t:o,Je(e,g|T,t)}function Ip(e,t){return t==null||Lo(e,t,Pe(t))}function st(e,t){return e===t||e!==e&&t!==t}var Lp=Pr(yi),Sp=Pr(function(e,t){return e>=t}),qt=Do(function(){return arguments}())?Do:function(e){return de(e)&&te.call(e,"callee")&&!To.call(e,"callee")},k=A.isArray,Rp=no?Be(no):Wf;function xe(e){return e!=null&&xr(e.length)&&!Et(e)}function me(e){return de(e)&&xe(e)}function xp(e){return e===!0||e===!1||de(e)&&Me(e)==gn}var Ft=qc||hs,Fp=ro?Be(ro):kf;function Np(e){return de(e)&&e.nodeType===1&&!Dn(e)}function Dp(e){if(e==null)return!0;if(xe(e)&&(k(e)||typeof e=="string"||typeof e.splice=="function"||Ft(e)||un(e)||qt(e)))return!e.length;var t=ye(e);if(t==tt||t==nt)return!e.size;if(Fn(e))return!Li(e).length;for(var n in e)if(te.call(e,n))return!1;return!0}function Bp(e,t){return Sn(e,t)}function Gp(e,t,n){n=typeof n=="function"?n:o;var r=n?n(e,t):o;return r===o?Sn(e,t,o,n):!!r}function ns(e){if(!de(e))return!1;var t=Me(e);return t==Kn||t==ol||typeof e.message=="string"&&typeof e.name=="string"&&!Dn(e)}function Up(e){return typeof e=="number"&&Po(e)}function Et(e){if(!le(e))return!1;var t=Me(e);return t==qn||t==Ls||t==sl||t==ul}function $a(e){return typeof e=="number"&&e==H(e)}function xr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=et}function le(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function de(e){return e!=null&&typeof e=="object"}var Ka=io?Be(io):zf;function Wp(e,t){return e===t||Ii(e,t,qi(t))}function kp(e,t,n){return n=typeof n=="function"?n:o,Ii(e,t,qi(t),n)}function Hp(e){return qa(e)&&e!=+e}function zp(e){if(Oh(e))throw new W(d);return Bo(e)}function $p(e){return e===null}function Kp(e){return e==null}function qa(e){return typeof e=="number"||de(e)&&Me(e)==vn}function Dn(e){if(!de(e)||Me(e)!=dt)return!1;var t=or(e);if(t===null)return!0;var n=te.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&nr.call(n)==Wc}var rs=so?Be(so):$f;function qp(e){return $a(e)&&e>=-et&&e<=et}var Va=oo?Be(oo):Kf;function Fr(e){return typeof e=="string"||!k(e)&&de(e)&&Me(e)==_n}function Ue(e){return typeof e=="symbol"||de(e)&&Me(e)==Vn}var un=ao?Be(ao):qf;function Vp(e){return e===o}function Jp(e){return de(e)&&ye(e)==En}function Zp(e){return de(e)&&Me(e)==cl}var Yp=Pr(Si),Xp=Pr(function(e,t){return e<=t});function Ja(e){if(!e)return[];if(xe(e))return Fr(e)?rt(e):Re(e);if(Cn&&e[Cn])return Mc(e[Cn]());var t=ye(e),n=t==tt?bi:t==nt?jn:ln;return n(e)}function At(e){if(!e)return e===0?e:0;if(e=Xe(e),e===at||e===-at){var t=e<0?-1:1;return t*zn}return e===e?e:0}function H(e){var t=At(e),n=t%1;return t===t?n?t-n:t:0}function Za(e){return e?Ht(H(e),0,ut):0}function Xe(e){if(typeof e=="number")return e;if(Ue(e))return Bt;if(le(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=le(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=po(e);var n=Sl.test(e);return n||xl.test(e)?fc(e.slice(2),n?2:8):Ll.test(e)?Bt:+e}function Ya(e){return ct(e,Fe(e))}function Qp(e){return e?Ht(H(e),-et,et):e===0?e:0}function ee(e){return e==null?"":Ge(e)}var jp=sn(function(e,t){if(Fn(t)||xe(t)){ct(t,Pe(t),e);return}for(var n in t)te.call(t,n)&&Mn(e,n,t[n])}),Xa=sn(function(e,t){ct(t,Fe(t),e)}),Nr=sn(function(e,t,n,r){ct(t,Fe(t),e,r)}),eg=sn(function(e,t,n,r){ct(t,Pe(t),e,r)}),tg=bt(Pi);function ng(e,t){var n=rn(e);return t==null?n:Io(n,t)}var rg=$(function(e,t){e=ne(e);var n=-1,r=t.length,s=r>2?t[2]:o;for(s&&Ie(t[0],t[1],s)&&(r=1);++n<r;)for(var h=t[n],m=Fe(h),v=-1,_=m.length;++v<_;){var w=m[v],O=e[w];(O===o||st(O,en[w])&&!te.call(e,w))&&(e[w]=h[w])}return e}),ig=$(function(e){return e.push(o,pa),De(Qa,o,e)});function sg(e,t){return lo(e,D(t,3),lt)}function og(e,t){return lo(e,D(t,3),Oi)}function ag(e,t){return e==null?e:wi(e,D(t,3),Fe)}function ug(e,t){return e==null?e:Fo(e,D(t,3),Fe)}function lg(e,t){return e&&lt(e,D(t,3))}function cg(e,t){return e&&Oi(e,D(t,3))}function fg(e){return e==null?[]:mr(e,Pe(e))}function hg(e){return e==null?[]:mr(e,Fe(e))}function is(e,t,n){var r=e==null?o:zt(e,t);return r===o?n:r}function dg(e,t){return e!=null&&va(e,t,Df)}function ss(e,t){return e!=null&&va(e,t,Bf)}var pg=la(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=rr.call(t)),e[t]=n},as(Ne)),gg=la(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=rr.call(t)),te.call(e,t)?e[t].push(n):e[t]=[n]},D),mg=$(Ln);function Pe(e){return xe(e)?yo(e):Li(e)}function Fe(e){return xe(e)?yo(e,!0):Vf(e)}function vg(e,t){var n={};return t=D(t,3),lt(e,function(r,s,h){mt(n,t(r,s,h),r)}),n}function bg(e,t){var n={};return t=D(t,3),lt(e,function(r,s,h){mt(n,s,t(r,s,h))}),n}var _g=sn(function(e,t,n){vr(e,t,n)}),Qa=sn(function(e,t,n,r){vr(e,t,n,r)}),Eg=bt(function(e,t){var n={};if(e==null)return n;var r=!1;t=ae(t,function(h){return h=Rt(h,e),r||(r=h.length>1),h}),ct(e,$i(e),n),r&&(n=Je(n,g|y|T,ph));for(var s=t.length;s--;)Di(n,t[s]);return n});function Ag(e,t){return ja(e,Rr(D(t)))}var Tg=bt(function(e,t){return e==null?{}:Zf(e,t)});function ja(e,t){if(e==null)return{};var n=ae($i(e),function(r){return[r]});return t=D(t),$o(e,n,function(r,s){return t(r,s[0])})}function Cg(e,t,n){t=Rt(t,e);var r=-1,s=t.length;for(s||(s=1,e=o);++r<s;){var h=e==null?o:e[ft(t[r])];h===o&&(r=s,h=n),e=Et(h)?h.call(e):h}return e}function Pg(e,t,n){return e==null?e:Rn(e,t,n)}function wg(e,t,n,r){return r=typeof r=="function"?r:o,e==null?e:Rn(e,t,n,r)}var eu=ha(Pe),tu=ha(Fe);function Og(e,t,n){var r=k(e),s=r||Ft(e)||un(e);if(t=D(t,4),n==null){var h=e&&e.constructor;s?n=r?new h:[]:le(e)?n=Et(h)?rn(or(e)):{}:n={}}return(s?Ke:lt)(e,function(m,v,_){return t(n,m,v,_)}),n}function yg(e,t){return e==null?!0:Di(e,t)}function Mg(e,t,n){return e==null?e:Zo(e,t,Ui(n))}function Ig(e,t,n,r){return r=typeof r=="function"?r:o,e==null?e:Zo(e,t,Ui(n),r)}function ln(e){return e==null?[]:vi(e,Pe(e))}function Lg(e){return e==null?[]:vi(e,Fe(e))}function Sg(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=Xe(n),n=n===n?n:0),t!==o&&(t=Xe(t),t=t===t?t:0),Ht(Xe(e),t,n)}function Rg(e,t,n){return t=At(t),n===o?(n=t,t=0):n=At(n),e=Xe(e),Gf(e,t,n)}function xg(e,t,n){if(n&&typeof n!="boolean"&&Ie(e,t,n)&&(t=n=o),n===o&&(typeof t=="boolean"?(n=t,t=o):typeof e=="boolean"&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=At(e),t===o?(t=e,e=0):t=At(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var s=wo();return Oe(e+s*(t-e+cc("1e-"+((s+"").length-1))),t)}return xi(e,t)}var Fg=on(function(e,t,n){return t=t.toLowerCase(),e+(n?nu(t):t)});function nu(e){return os(ee(e).toLowerCase())}function ru(e){return e=ee(e),e&&e.replace(Nl,Cc).replace(ec,"")}function Ng(e,t,n){e=ee(e),t=Ge(t);var r=e.length;n=n===o?r:Ht(H(n),0,r);var s=n;return n-=t.length,n>=0&&e.slice(n,s)==t}function Dg(e){return e=ee(e),e&&gl.test(e)?e.replace(xs,Pc):e}function Bg(e){return e=ee(e),e&&Al.test(e)?e.replace(ti,"\\$&"):e}var Gg=on(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ug=on(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Wg=oa("toLowerCase");function kg(e,t,n){e=ee(e),t=H(t);var r=t?jt(e):0;if(!t||r>=t)return e;var s=(t-r)/2;return Cr(cr(s),n)+e+Cr(lr(s),n)}function Hg(e,t,n){e=ee(e),t=H(t);var r=t?jt(e):0;return t&&r<t?e+Cr(t-r,n):e}function zg(e,t,n){e=ee(e),t=H(t);var r=t?jt(e):0;return t&&r<t?Cr(t-r,n)+e:e}function $g(e,t,n){return n||t==null?t=0:t&&(t=+t),Yc(ee(e).replace(ni,""),t||0)}function Kg(e,t,n){return(n?Ie(e,t,n):t===o)?t=1:t=H(t),Fi(ee(e),t)}function qg(){var e=arguments,t=ee(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Vg=on(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Jg(e,t,n){return n&&typeof n!="number"&&Ie(e,t,n)&&(t=n=o),n=n===o?ut:n>>>0,n?(e=ee(e),e&&(typeof t=="string"||t!=null&&!rs(t))&&(t=Ge(t),!t&&Qt(e))?xt(rt(e),0,n):e.split(t,n)):[]}var Zg=on(function(e,t,n){return e+(n?" ":"")+os(t)});function Yg(e,t,n){return e=ee(e),n=n==null?0:Ht(H(n),0,e.length),t=Ge(t),e.slice(n,n+t.length)==t}function Xg(e,t,n){var r=l.templateSettings;n&&Ie(e,t,n)&&(t=o),e=ee(e),t=Nr({},t,r,da);var s=Nr({},t.imports,r.imports,da),h=Pe(s),m=vi(s,h),v,_,w=0,O=t.interpolate||Jn,M="__p += '",S=_i((t.escape||Jn).source+"|"+O.source+"|"+(O===Fs?Il:Jn).source+"|"+(t.evaluate||Jn).source+"|$","g"),F="//# sourceURL="+(te.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sc+"]")+`
`;e.replace(S,function(U,J,X,We,Le,ke){return X||(X=We),M+=e.slice(w,ke).replace(Dl,wc),J&&(v=!0,M+=`' +
__e(`+J+`) +
'`),Le&&(_=!0,M+=`';
`+Le+`;
__p += '`),X&&(M+=`' +
((__t = (`+X+`)) == null ? '' : __t) +
'`),w=ke+U.length,U}),M+=`';
`;var G=te.call(t,"variable")&&t.variable;if(!G)M=`with (obj) {
`+M+`
}
`;else if(yl.test(G))throw new W(p);M=(_?M.replace(fl,""):M).replace(hl,"$1").replace(dl,"$1;"),M="function("+(G||"obj")+`) {
`+(G?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(_?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+M+`return __p
}`;var z=su(function(){return Q(h,F+"return "+M).apply(o,m)});if(z.source=M,ns(z))throw z;return z}function Qg(e){return ee(e).toLowerCase()}function jg(e){return ee(e).toUpperCase()}function em(e,t,n){if(e=ee(e),e&&(n||t===o))return po(e);if(!e||!(t=Ge(t)))return e;var r=rt(e),s=rt(t),h=go(r,s),m=mo(r,s)+1;return xt(r,h,m).join("")}function tm(e,t,n){if(e=ee(e),e&&(n||t===o))return e.slice(0,bo(e)+1);if(!e||!(t=Ge(t)))return e;var r=rt(e),s=mo(r,rt(t))+1;return xt(r,0,s).join("")}function nm(e,t,n){if(e=ee(e),e&&(n||t===o))return e.replace(ni,"");if(!e||!(t=Ge(t)))return e;var r=rt(e),s=go(r,rt(t));return xt(r,s).join("")}function rm(e,t){var n=be,r=oe;if(le(t)){var s="separator"in t?t.separator:s;n="length"in t?H(t.length):n,r="omission"in t?Ge(t.omission):r}e=ee(e);var h=e.length;if(Qt(e)){var m=rt(e);h=m.length}if(n>=h)return e;var v=n-jt(r);if(v<1)return r;var _=m?xt(m,0,v).join(""):e.slice(0,v);if(s===o)return _+r;if(m&&(v+=_.length-v),rs(s)){if(e.slice(v).search(s)){var w,O=_;for(s.global||(s=_i(s.source,ee(Ns.exec(s))+"g")),s.lastIndex=0;w=s.exec(O);)var M=w.index;_=_.slice(0,M===o?v:M)}}else if(e.indexOf(Ge(s),v)!=v){var S=_.lastIndexOf(s);S>-1&&(_=_.slice(0,S))}return _+r}function im(e){return e=ee(e),e&&pl.test(e)?e.replace(Rs,Rc):e}var sm=on(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),os=oa("toUpperCase");function iu(e,t,n){return e=ee(e),t=n?o:t,t===o?yc(e)?Nc(e):bc(e):e.match(t)||[]}var su=$(function(e,t){try{return De(e,o,t)}catch(n){return ns(n)?n:new W(n)}}),om=bt(function(e,t){return Ke(t,function(n){n=ft(n),mt(e,n,es(e[n],e))}),e});function am(e){var t=e==null?0:e.length,n=D();return e=t?ae(e,function(r){if(typeof r[1]!="function")throw new qe(c);return[n(r[0]),r[1]]}):[],$(function(r){for(var s=-1;++s<t;){var h=e[s];if(De(h[0],this,r))return De(h[1],this,r)}})}function um(e){return xf(Je(e,g))}function as(e){return function(){return e}}function lm(e,t){return e==null||e!==e?t:e}var cm=ua(),fm=ua(!0);function Ne(e){return e}function us(e){return Go(typeof e=="function"?e:Je(e,g))}function hm(e){return Wo(Je(e,g))}function dm(e,t){return ko(e,Je(t,g))}var pm=$(function(e,t){return function(n){return Ln(n,e,t)}}),gm=$(function(e,t){return function(n){return Ln(e,n,t)}});function ls(e,t,n){var r=Pe(t),s=mr(t,r);n==null&&!(le(t)&&(s.length||!r.length))&&(n=t,t=e,e=this,s=mr(t,Pe(t)));var h=!(le(n)&&"chain"in n)||!!n.chain,m=Et(e);return Ke(s,function(v){var _=t[v];e[v]=_,m&&(e.prototype[v]=function(){var w=this.__chain__;if(h||w){var O=e(this.__wrapped__),M=O.__actions__=Re(this.__actions__);return M.push({func:_,args:arguments,thisArg:e}),O.__chain__=w,O}return _.apply(e,Ot([this.value()],arguments))})}),e}function mm(){return Ce._===this&&(Ce._=kc),this}function cs(){}function vm(e){return e=H(e),$(function(t){return Ho(t,e)})}var bm=ki(ae),_m=ki(uo),Em=ki(hi);function ou(e){return Ji(e)?di(ft(e)):Yf(e)}function Am(e){return function(t){return e==null?o:zt(e,t)}}var Tm=ca(),Cm=ca(!0);function fs(){return[]}function hs(){return!1}function Pm(){return{}}function wm(){return""}function Om(){return!0}function ym(e,t){if(e=H(e),e<1||e>et)return[];var n=ut,r=Oe(e,ut);t=D(t),e-=ut;for(var s=mi(r,t);++n<e;)t(n);return s}function Mm(e){return k(e)?ae(e,ft):Ue(e)?[e]:Re(Oa(ee(e)))}function Im(e){var t=++Uc;return ee(e)+t}var Lm=Tr(function(e,t){return e+t},0),Sm=Hi("ceil"),Rm=Tr(function(e,t){return e/t},1),xm=Hi("floor");function Fm(e){return e&&e.length?gr(e,Ne,yi):o}function Nm(e,t){return e&&e.length?gr(e,D(t,2),yi):o}function Dm(e){return fo(e,Ne)}function Bm(e,t){return fo(e,D(t,2))}function Gm(e){return e&&e.length?gr(e,Ne,Si):o}function Um(e,t){return e&&e.length?gr(e,D(t,2),Si):o}var Wm=Tr(function(e,t){return e*t},1),km=Hi("round"),Hm=Tr(function(e,t){return e-t},0);function zm(e){return e&&e.length?gi(e,Ne):0}function $m(e,t){return e&&e.length?gi(e,D(t,2)):0}return l.after=hp,l.ary=Ba,l.assign=jp,l.assignIn=Xa,l.assignInWith=Nr,l.assignWith=eg,l.at=tg,l.before=Ga,l.bind=es,l.bindAll=om,l.bindKey=Ua,l.castArray=Pp,l.chain=Fa,l.chunk=xh,l.compact=Fh,l.concat=Nh,l.cond=am,l.conforms=um,l.constant=as,l.countBy=zd,l.create=ng,l.curry=Wa,l.curryRight=ka,l.debounce=Ha,l.defaults=rg,l.defaultsDeep=ig,l.defer=dp,l.delay=pp,l.difference=Dh,l.differenceBy=Bh,l.differenceWith=Gh,l.drop=Uh,l.dropRight=Wh,l.dropRightWhile=kh,l.dropWhile=Hh,l.fill=zh,l.filter=Kd,l.flatMap=Jd,l.flatMapDeep=Zd,l.flatMapDepth=Yd,l.flatten=La,l.flattenDeep=$h,l.flattenDepth=Kh,l.flip=gp,l.flow=cm,l.flowRight=fm,l.fromPairs=qh,l.functions=fg,l.functionsIn=hg,l.groupBy=Xd,l.initial=Jh,l.intersection=Zh,l.intersectionBy=Yh,l.intersectionWith=Xh,l.invert=pg,l.invertBy=gg,l.invokeMap=jd,l.iteratee=us,l.keyBy=ep,l.keys=Pe,l.keysIn=Fe,l.map=Ir,l.mapKeys=vg,l.mapValues=bg,l.matches=hm,l.matchesProperty=dm,l.memoize=Sr,l.merge=_g,l.mergeWith=Qa,l.method=pm,l.methodOf=gm,l.mixin=ls,l.negate=Rr,l.nthArg=vm,l.omit=Eg,l.omitBy=Ag,l.once=mp,l.orderBy=tp,l.over=bm,l.overArgs=vp,l.overEvery=_m,l.overSome=Em,l.partial=ts,l.partialRight=za,l.partition=np,l.pick=Tg,l.pickBy=ja,l.property=ou,l.propertyOf=Am,l.pull=td,l.pullAll=Ra,l.pullAllBy=nd,l.pullAllWith=rd,l.pullAt=id,l.range=Tm,l.rangeRight=Cm,l.rearg=bp,l.reject=sp,l.remove=sd,l.rest=_p,l.reverse=Qi,l.sampleSize=ap,l.set=Pg,l.setWith=wg,l.shuffle=up,l.slice=od,l.sortBy=fp,l.sortedUniq=dd,l.sortedUniqBy=pd,l.split=Jg,l.spread=Ep,l.tail=gd,l.take=md,l.takeRight=vd,l.takeRightWhile=bd,l.takeWhile=_d,l.tap=Fd,l.throttle=Ap,l.thru=Mr,l.toArray=Ja,l.toPairs=eu,l.toPairsIn=tu,l.toPath=Mm,l.toPlainObject=Ya,l.transform=Og,l.unary=Tp,l.union=Ed,l.unionBy=Ad,l.unionWith=Td,l.uniq=Cd,l.uniqBy=Pd,l.uniqWith=wd,l.unset=yg,l.unzip=ji,l.unzipWith=xa,l.update=Mg,l.updateWith=Ig,l.values=ln,l.valuesIn=Lg,l.without=Od,l.words=iu,l.wrap=Cp,l.xor=yd,l.xorBy=Md,l.xorWith=Id,l.zip=Ld,l.zipObject=Sd,l.zipObjectDeep=Rd,l.zipWith=xd,l.entries=eu,l.entriesIn=tu,l.extend=Xa,l.extendWith=Nr,ls(l,l),l.add=Lm,l.attempt=su,l.camelCase=Fg,l.capitalize=nu,l.ceil=Sm,l.clamp=Sg,l.clone=wp,l.cloneDeep=yp,l.cloneDeepWith=Mp,l.cloneWith=Op,l.conformsTo=Ip,l.deburr=ru,l.defaultTo=lm,l.divide=Rm,l.endsWith=Ng,l.eq=st,l.escape=Dg,l.escapeRegExp=Bg,l.every=$d,l.find=qd,l.findIndex=Ma,l.findKey=sg,l.findLast=Vd,l.findLastIndex=Ia,l.findLastKey=og,l.floor=xm,l.forEach=Na,l.forEachRight=Da,l.forIn=ag,l.forInRight=ug,l.forOwn=lg,l.forOwnRight=cg,l.get=is,l.gt=Lp,l.gte=Sp,l.has=dg,l.hasIn=ss,l.head=Sa,l.identity=Ne,l.includes=Qd,l.indexOf=Vh,l.inRange=Rg,l.invoke=mg,l.isArguments=qt,l.isArray=k,l.isArrayBuffer=Rp,l.isArrayLike=xe,l.isArrayLikeObject=me,l.isBoolean=xp,l.isBuffer=Ft,l.isDate=Fp,l.isElement=Np,l.isEmpty=Dp,l.isEqual=Bp,l.isEqualWith=Gp,l.isError=ns,l.isFinite=Up,l.isFunction=Et,l.isInteger=$a,l.isLength=xr,l.isMap=Ka,l.isMatch=Wp,l.isMatchWith=kp,l.isNaN=Hp,l.isNative=zp,l.isNil=Kp,l.isNull=$p,l.isNumber=qa,l.isObject=le,l.isObjectLike=de,l.isPlainObject=Dn,l.isRegExp=rs,l.isSafeInteger=qp,l.isSet=Va,l.isString=Fr,l.isSymbol=Ue,l.isTypedArray=un,l.isUndefined=Vp,l.isWeakMap=Jp,l.isWeakSet=Zp,l.join=Qh,l.kebabCase=Gg,l.last=Ye,l.lastIndexOf=jh,l.lowerCase=Ug,l.lowerFirst=Wg,l.lt=Yp,l.lte=Xp,l.max=Fm,l.maxBy=Nm,l.mean=Dm,l.meanBy=Bm,l.min=Gm,l.minBy=Um,l.stubArray=fs,l.stubFalse=hs,l.stubObject=Pm,l.stubString=wm,l.stubTrue=Om,l.multiply=Wm,l.nth=ed,l.noConflict=mm,l.noop=cs,l.now=Lr,l.pad=kg,l.padEnd=Hg,l.padStart=zg,l.parseInt=$g,l.random=xg,l.reduce=rp,l.reduceRight=ip,l.repeat=Kg,l.replace=qg,l.result=Cg,l.round=km,l.runInContext=b,l.sample=op,l.size=lp,l.snakeCase=Vg,l.some=cp,l.sortedIndex=ad,l.sortedIndexBy=ud,l.sortedIndexOf=ld,l.sortedLastIndex=cd,l.sortedLastIndexBy=fd,l.sortedLastIndexOf=hd,l.startCase=Zg,l.startsWith=Yg,l.subtract=Hm,l.sum=zm,l.sumBy=$m,l.template=Xg,l.times=ym,l.toFinite=At,l.toInteger=H,l.toLength=Za,l.toLower=Qg,l.toNumber=Xe,l.toSafeInteger=Qp,l.toString=ee,l.toUpper=jg,l.trim=em,l.trimEnd=tm,l.trimStart=nm,l.truncate=rm,l.unescape=im,l.uniqueId=Im,l.upperCase=sm,l.upperFirst=os,l.each=Na,l.eachRight=Da,l.first=Sa,ls(l,function(){var e={};return lt(l,function(t,n){te.call(l.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),l.VERSION=a,Ke(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){l[e].placeholder=l}),Ke(["drop","take"],function(e,t){Y.prototype[e]=function(n){n=n===o?1:Te(H(n),0);var r=this.__filtered__&&!t?new Y(this):this.clone();return r.__filtered__?r.__takeCount__=Oe(n,r.__takeCount__):r.__views__.push({size:Oe(n,ut),type:e+(r.__dir__<0?"Right":"")}),r},Y.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Ke(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Pt||n==Hn;Y.prototype[e]=function(s){var h=this.clone();return h.__iteratees__.push({iteratee:D(s,3),type:n}),h.__filtered__=h.__filtered__||r,h}}),Ke(["head","last"],function(e,t){var n="take"+(t?"Right":"");Y.prototype[e]=function(){return this[n](1).value()[0]}}),Ke(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Y.prototype[e]=function(){return this.__filtered__?new Y(this):this[n](1)}}),Y.prototype.compact=function(){return this.filter(Ne)},Y.prototype.find=function(e){return this.filter(e).head()},Y.prototype.findLast=function(e){return this.reverse().find(e)},Y.prototype.invokeMap=$(function(e,t){return typeof e=="function"?new Y(this):this.map(function(n){return Ln(n,e,t)})}),Y.prototype.reject=function(e){return this.filter(Rr(D(e)))},Y.prototype.slice=function(e,t){e=H(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Y(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(t=H(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Y.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Y.prototype.toArray=function(){return this.take(ut)},lt(Y.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=l[r?"take"+(t=="last"?"Right":""):t],h=r||/^find/.test(t);!s||(l.prototype[t]=function(){var m=this.__wrapped__,v=r?[1]:arguments,_=m instanceof Y,w=v[0],O=_||k(m),M=function(J){var X=s.apply(l,Ot([J],v));return r&&S?X[0]:X};O&&n&&typeof w=="function"&&w.length!=1&&(_=O=!1);var S=this.__chain__,F=!!this.__actions__.length,G=h&&!S,z=_&&!F;if(!h&&O){m=z?m:new Y(this);var U=e.apply(m,v);return U.__actions__.push({func:Mr,args:[M],thisArg:o}),new Ve(U,S)}return G&&z?e.apply(this,v):(U=this.thru(M),G?r?U.value()[0]:U.value():U)})}),Ke(["pop","push","shift","sort","splice","unshift"],function(e){var t=er[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);l.prototype[e]=function(){var s=arguments;if(r&&!this.__chain__){var h=this.value();return t.apply(k(h)?h:[],s)}return this[n](function(m){return t.apply(k(m)?m:[],s)})}}),lt(Y.prototype,function(e,t){var n=l[t];if(n){var r=n.name+"";te.call(nn,r)||(nn[r]=[]),nn[r].push({name:t,func:n})}}),nn[Ar(o,N).name]=[{name:"wrapper",func:o}],Y.prototype.clone=rf,Y.prototype.reverse=sf,Y.prototype.value=of,l.prototype.at=Nd,l.prototype.chain=Dd,l.prototype.commit=Bd,l.prototype.next=Gd,l.prototype.plant=Wd,l.prototype.reverse=kd,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=Hd,l.prototype.first=l.prototype.head,Cn&&(l.prototype[Cn]=Ud),l},Mt=Dc();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ce._=Mt,define(function(){return Mt})):Gt?((Gt.exports=Mt)._=Mt,ui._=Mt):Ce._=Mt}).call(pn)});var ju=Ee((Wn,Ts)=>{I();(function(o,a){typeof Wn=="object"&&typeof Ts=="object"?Ts.exports=a():typeof define=="function"&&define.amd?define([],a):typeof Wn=="object"?Wn.bowser=a():o.bowser=a()})(Wn,function(){return function(o){var a={};function i(d){if(a[d])return a[d].exports;var c=a[d]={i:d,l:!1,exports:{}};return o[d].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=o,i.c=a,i.d=function(d,c,p){i.o(d,c)||Object.defineProperty(d,c,{enumerable:!0,get:p})},i.r=function(d){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},i.t=function(d,c){if(1&c&&(d=i(d)),8&c||4&c&&typeof d=="object"&&d&&d.__esModule)return d;var p=Object.create(null);if(i.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:d}),2&c&&typeof d!="string")for(var E in d)i.d(p,E,function(u){return d[u]}.bind(null,E));return p},i.n=function(d){var c=d&&d.__esModule?function(){return d.default}:function(){return d};return i.d(c,"a",c),c},i.o=function(d,c){return Object.prototype.hasOwnProperty.call(d,c)},i.p="",i(i.s=90)}({17:function(o,a,i){"use strict";a.__esModule=!0,a.default=void 0;var d=i(18),c=function(){function p(){}return p.getFirstMatch=function(E,u){var f=u.match(E);return f&&f.length>0&&f[1]||""},p.getSecondMatch=function(E,u){var f=u.match(E);return f&&f.length>1&&f[2]||""},p.matchAndReturnConst=function(E,u,f){if(E.test(u))return f},p.getWindowsVersionName=function(E){switch(E){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},p.getMacOSVersionName=function(E){var u=E.split(".").splice(0,2).map(function(f){return parseInt(f,10)||0});if(u.push(0),u[0]===10)switch(u[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},p.getAndroidVersionName=function(E){var u=E.split(".").splice(0,2).map(function(f){return parseInt(f,10)||0});if(u.push(0),!(u[0]===1&&u[1]<5))return u[0]===1&&u[1]<6?"Cupcake":u[0]===1&&u[1]>=6?"Donut":u[0]===2&&u[1]<2?"Eclair":u[0]===2&&u[1]===2?"Froyo":u[0]===2&&u[1]>2?"Gingerbread":u[0]===3?"Honeycomb":u[0]===4&&u[1]<1?"Ice Cream Sandwich":u[0]===4&&u[1]<4?"Jelly Bean":u[0]===4&&u[1]>=4?"KitKat":u[0]===5?"Lollipop":u[0]===6?"Marshmallow":u[0]===7?"Nougat":u[0]===8?"Oreo":u[0]===9?"Pie":void 0},p.getVersionPrecision=function(E){return E.split(".").length},p.compareVersions=function(E,u,f){f===void 0&&(f=!1);var g=p.getVersionPrecision(E),y=p.getVersionPrecision(u),T=Math.max(g,y),C=0,L=p.map([E,u],function(R){var N=T-p.getVersionPrecision(R),q=R+new Array(N+1).join(".0");return p.map(q.split("."),function(Z){return new Array(20-Z.length).join("0")+Z}).reverse()});for(f&&(C=T-Math.min(g,y)),T-=1;T>=C;){if(L[0][T]>L[1][T])return 1;if(L[0][T]===L[1][T]){if(T===C)return 0;T-=1}else if(L[0][T]<L[1][T])return-1}},p.map=function(E,u){var f,g=[];if(Array.prototype.map)return Array.prototype.map.call(E,u);for(f=0;f<E.length;f+=1)g.push(u(E[f]));return g},p.find=function(E,u){var f,g;if(Array.prototype.find)return Array.prototype.find.call(E,u);for(f=0,g=E.length;f<g;f+=1){var y=E[f];if(u(y,f))return y}},p.assign=function(E){for(var u,f,g=E,y=arguments.length,T=new Array(y>1?y-1:0),C=1;C<y;C++)T[C-1]=arguments[C];if(Object.assign)return Object.assign.apply(Object,[E].concat(T));var L=function(){var R=T[u];typeof R=="object"&&R!==null&&Object.keys(R).forEach(function(N){g[N]=R[N]})};for(u=0,f=T.length;u<f;u+=1)L();return E},p.getBrowserAlias=function(E){return d.BROWSER_ALIASES_MAP[E]},p.getBrowserTypeByAlias=function(E){return d.BROWSER_MAP[E]||""},p}();a.default=c,o.exports=a.default},18:function(o,a,i){"use strict";a.__esModule=!0,a.ENGINE_MAP=a.OS_MAP=a.PLATFORMS_MAP=a.BROWSER_MAP=a.BROWSER_ALIASES_MAP=void 0,a.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},a.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},a.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},a.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},a.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(o,a,i){"use strict";a.__esModule=!0,a.default=void 0;var d,c=(d=i(91))&&d.__esModule?d:{default:d},p=i(18);function E(f,g){for(var y=0;y<g.length;y++){var T=g[y];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(f,T.key,T)}}var u=function(){function f(){}var g,y,T;return f.getParser=function(C,L){if(L===void 0&&(L=!1),typeof C!="string")throw new Error("UserAgent should be a string");return new c.default(C,L)},f.parse=function(C){return new c.default(C).getResult()},g=f,T=[{key:"BROWSER_MAP",get:function(){return p.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return p.ENGINE_MAP}},{key:"OS_MAP",get:function(){return p.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return p.PLATFORMS_MAP}}],(y=null)&&E(g.prototype,y),T&&E(g,T),f}();a.default=u,o.exports=a.default},91:function(o,a,i){"use strict";a.__esModule=!0,a.default=void 0;var d=f(i(92)),c=f(i(93)),p=f(i(94)),E=f(i(95)),u=f(i(17));function f(y){return y&&y.__esModule?y:{default:y}}var g=function(){function y(C,L){if(L===void 0&&(L=!1),C==null||C==="")throw new Error("UserAgent parameter can't be empty");this._ua=C,this.parsedResult={},L!==!0&&this.parse()}var T=y.prototype;return T.getUA=function(){return this._ua},T.test=function(C){return C.test(this._ua)},T.parseBrowser=function(){var C=this;this.parsedResult.browser={};var L=u.default.find(d.default,function(R){if(typeof R.test=="function")return R.test(C);if(R.test instanceof Array)return R.test.some(function(N){return C.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.browser=L.describe(this.getUA())),this.parsedResult.browser},T.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},T.getBrowserName=function(C){return C?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},T.getBrowserVersion=function(){return this.getBrowser().version},T.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},T.parseOS=function(){var C=this;this.parsedResult.os={};var L=u.default.find(c.default,function(R){if(typeof R.test=="function")return R.test(C);if(R.test instanceof Array)return R.test.some(function(N){return C.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.os=L.describe(this.getUA())),this.parsedResult.os},T.getOSName=function(C){var L=this.getOS().name;return C?String(L).toLowerCase()||"":L||""},T.getOSVersion=function(){return this.getOS().version},T.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},T.getPlatformType=function(C){C===void 0&&(C=!1);var L=this.getPlatform().type;return C?String(L).toLowerCase()||"":L||""},T.parsePlatform=function(){var C=this;this.parsedResult.platform={};var L=u.default.find(p.default,function(R){if(typeof R.test=="function")return R.test(C);if(R.test instanceof Array)return R.test.some(function(N){return C.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.platform=L.describe(this.getUA())),this.parsedResult.platform},T.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},T.getEngineName=function(C){return C?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},T.parseEngine=function(){var C=this;this.parsedResult.engine={};var L=u.default.find(E.default,function(R){if(typeof R.test=="function")return R.test(C);if(R.test instanceof Array)return R.test.some(function(N){return C.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.engine=L.describe(this.getUA())),this.parsedResult.engine},T.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},T.getResult=function(){return u.default.assign({},this.parsedResult)},T.satisfies=function(C){var L=this,R={},N=0,q={},Z=0;if(Object.keys(C).forEach(function(oe){var ze=C[oe];typeof ze=="string"?(q[oe]=ze,Z+=1):typeof ze=="object"&&(R[oe]=ze,N+=1)}),N>0){var fe=Object.keys(R),he=u.default.find(fe,function(oe){return L.isOS(oe)});if(he){var pe=this.satisfies(R[he]);if(pe!==void 0)return pe}var j=u.default.find(fe,function(oe){return L.isPlatform(oe)});if(j){var V=this.satisfies(R[j]);if(V!==void 0)return V}}if(Z>0){var ge=Object.keys(q),be=u.default.find(ge,function(oe){return L.isBrowser(oe,!0)});if(be!==void 0)return this.compareVersion(q[be])}},T.isBrowser=function(C,L){L===void 0&&(L=!1);var R=this.getBrowserName().toLowerCase(),N=C.toLowerCase(),q=u.default.getBrowserTypeByAlias(N);return L&&q&&(N=q.toLowerCase()),N===R},T.compareVersion=function(C){var L=[0],R=C,N=!1,q=this.getBrowserVersion();if(typeof q=="string")return C[0]===">"||C[0]==="<"?(R=C.substr(1),C[1]==="="?(N=!0,R=C.substr(2)):L=[],C[0]===">"?L.push(1):L.push(-1)):C[0]==="="?R=C.substr(1):C[0]==="~"&&(N=!0,R=C.substr(1)),L.indexOf(u.default.compareVersions(q,R,N))>-1},T.isOS=function(C){return this.getOSName(!0)===String(C).toLowerCase()},T.isPlatform=function(C){return this.getPlatformType(!0)===String(C).toLowerCase()},T.isEngine=function(C){return this.getEngineName(!0)===String(C).toLowerCase()},T.is=function(C,L){return L===void 0&&(L=!1),this.isBrowser(C,L)||this.isOS(C)||this.isPlatform(C)},T.some=function(C){var L=this;return C===void 0&&(C=[]),C.some(function(R){return L.is(R)})},y}();a.default=g,o.exports=a.default},92:function(o,a,i){"use strict";a.__esModule=!0,a.default=void 0;var d,c=(d=i(17))&&d.__esModule?d:{default:d},p=/version\/(\d+(\.?_?\d+)+)/i,E=[{test:[/googlebot/i],describe:function(u){var f={name:"Googlebot"},g=c.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/opera/i],describe:function(u){var f={name:"Opera"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/opr\/|opios/i],describe:function(u){var f={name:"Opera"},g=c.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/SamsungBrowser/i],describe:function(u){var f={name:"Samsung Internet for Android"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/Whale/i],describe:function(u){var f={name:"NAVER Whale Browser"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/MZBrowser/i],describe:function(u){var f={name:"MZ Browser"},g=c.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/focus/i],describe:function(u){var f={name:"Focus"},g=c.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/swing/i],describe:function(u){var f={name:"Swing"},g=c.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/coast/i],describe:function(u){var f={name:"Opera Coast"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(u){var f={name:"Opera Touch"},g=c.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/yabrowser/i],describe:function(u){var f={name:"Yandex Browser"},g=c.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/ucbrowser/i],describe:function(u){var f={name:"UC Browser"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/Maxthon|mxios/i],describe:function(u){var f={name:"Maxthon"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/epiphany/i],describe:function(u){var f={name:"Epiphany"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/puffin/i],describe:function(u){var f={name:"Puffin"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/sleipnir/i],describe:function(u){var f={name:"Sleipnir"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/k-meleon/i],describe:function(u){var f={name:"K-Meleon"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/micromessenger/i],describe:function(u){var f={name:"WeChat"},g=c.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/qqbrowser/i],describe:function(u){var f={name:/qqbrowserlite/i.test(u)?"QQ Browser Lite":"QQ Browser"},g=c.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/msie|trident/i],describe:function(u){var f={name:"Internet Explorer"},g=c.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/\sedg\//i],describe:function(u){var f={name:"Microsoft Edge"},g=c.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/edg([ea]|ios)/i],describe:function(u){var f={name:"Microsoft Edge"},g=c.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/vivaldi/i],describe:function(u){var f={name:"Vivaldi"},g=c.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/seamonkey/i],describe:function(u){var f={name:"SeaMonkey"},g=c.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/sailfish/i],describe:function(u){var f={name:"Sailfish"},g=c.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,u);return g&&(f.version=g),f}},{test:[/silk/i],describe:function(u){var f={name:"Amazon Silk"},g=c.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/phantom/i],describe:function(u){var f={name:"PhantomJS"},g=c.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/slimerjs/i],describe:function(u){var f={name:"SlimerJS"},g=c.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(u){var f={name:"BlackBerry"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/(web|hpw)[o0]s/i],describe:function(u){var f={name:"WebOS Browser"},g=c.default.getFirstMatch(p,u)||c.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/bada/i],describe:function(u){var f={name:"Bada"},g=c.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/tizen/i],describe:function(u){var f={name:"Tizen"},g=c.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/qupzilla/i],describe:function(u){var f={name:"QupZilla"},g=c.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/firefox|iceweasel|fxios/i],describe:function(u){var f={name:"Firefox"},g=c.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/electron/i],describe:function(u){var f={name:"Electron"},g=c.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/MiuiBrowser/i],describe:function(u){var f={name:"Miui"},g=c.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/chromium/i],describe:function(u){var f={name:"Chromium"},g=c.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,u)||c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/chrome|crios|crmo/i],describe:function(u){var f={name:"Chrome"},g=c.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/GSA/i],describe:function(u){var f={name:"Google Search"},g=c.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:function(u){var f=!u.test(/like android/i),g=u.test(/android/i);return f&&g},describe:function(u){var f={name:"Android Browser"},g=c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/playstation 4/i],describe:function(u){var f={name:"PlayStation 4"},g=c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/safari|applewebkit/i],describe:function(u){var f={name:"Safari"},g=c.default.getFirstMatch(p,u);return g&&(f.version=g),f}},{test:[/.*/i],describe:function(u){var f=u.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:c.default.getFirstMatch(f,u),version:c.default.getSecondMatch(f,u)}}}];a.default=E,o.exports=a.default},93:function(o,a,i){"use strict";a.__esModule=!0,a.default=void 0;var d,c=(d=i(17))&&d.__esModule?d:{default:d},p=i(18),E=[{test:[/Roku\/DVP/],describe:function(u){var f=c.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,u);return{name:p.OS_MAP.Roku,version:f}}},{test:[/windows phone/i],describe:function(u){var f=c.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,u);return{name:p.OS_MAP.WindowsPhone,version:f}}},{test:[/windows /i],describe:function(u){var f=c.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,u),g=c.default.getWindowsVersionName(f);return{name:p.OS_MAP.Windows,version:f,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(u){var f={name:p.OS_MAP.iOS},g=c.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,u);return g&&(f.version=g),f}},{test:[/macintosh/i],describe:function(u){var f=c.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,u).replace(/[_\s]/g,"."),g=c.default.getMacOSVersionName(f),y={name:p.OS_MAP.MacOS,version:f};return g&&(y.versionName=g),y}},{test:[/(ipod|iphone|ipad)/i],describe:function(u){var f=c.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,u).replace(/[_\s]/g,".");return{name:p.OS_MAP.iOS,version:f}}},{test:function(u){var f=!u.test(/like android/i),g=u.test(/android/i);return f&&g},describe:function(u){var f=c.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,u),g=c.default.getAndroidVersionName(f),y={name:p.OS_MAP.Android,version:f};return g&&(y.versionName=g),y}},{test:[/(web|hpw)[o0]s/i],describe:function(u){var f=c.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,u),g={name:p.OS_MAP.WebOS};return f&&f.length&&(g.version=f),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(u){var f=c.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,u)||c.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,u)||c.default.getFirstMatch(/\bbb(\d+)/i,u);return{name:p.OS_MAP.BlackBerry,version:f}}},{test:[/bada/i],describe:function(u){var f=c.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,u);return{name:p.OS_MAP.Bada,version:f}}},{test:[/tizen/i],describe:function(u){var f=c.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,u);return{name:p.OS_MAP.Tizen,version:f}}},{test:[/linux/i],describe:function(){return{name:p.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:p.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(u){var f=c.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,u);return{name:p.OS_MAP.PlayStation4,version:f}}}];a.default=E,o.exports=a.default},94:function(o,a,i){"use strict";a.__esModule=!0,a.default=void 0;var d,c=(d=i(17))&&d.__esModule?d:{default:d},p=i(18),E=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(u){var f=c.default.getFirstMatch(/(can-l01)/i,u)&&"Nova",g={type:p.PLATFORMS_MAP.mobile,vendor:"Huawei"};return f&&(g.model=f),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(u){var f=u.test(/ipod|iphone/i),g=u.test(/like (ipod|iphone)/i);return f&&!g},describe:function(u){var f=c.default.getFirstMatch(/(ipod|iphone)/i,u);return{type:p.PLATFORMS_MAP.mobile,vendor:"Apple",model:f}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(u){return u.getBrowserName(!0)==="blackberry"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(u){return u.getBrowserName(!0)==="bada"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(u){return u.getBrowserName()==="windows phone"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(u){var f=Number(String(u.getOSVersion()).split(".")[0]);return u.getOSName(!0)==="android"&&f>=3},describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(u){return u.getOSName(!0)==="android"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(u){return u.getOSName(!0)==="macos"},describe:function(){return{type:p.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(u){return u.getOSName(!0)==="windows"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(u){return u.getOSName(!0)==="linux"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(u){return u.getOSName(!0)==="playstation 4"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}},{test:function(u){return u.getOSName(!0)==="roku"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}}];a.default=E,o.exports=a.default},95:function(o,a,i){"use strict";a.__esModule=!0,a.default=void 0;var d,c=(d=i(17))&&d.__esModule?d:{default:d},p=i(18),E=[{test:function(u){return u.getBrowserName(!0)==="microsoft edge"},describe:function(u){if(/\sedg\//i.test(u))return{name:p.ENGINE_MAP.Blink};var f=c.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,u);return{name:p.ENGINE_MAP.EdgeHTML,version:f}}},{test:[/trident/i],describe:function(u){var f={name:p.ENGINE_MAP.Trident},g=c.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:function(u){return u.test(/presto/i)},describe:function(u){var f={name:p.ENGINE_MAP.Presto},g=c.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:function(u){var f=u.test(/gecko/i),g=u.test(/like gecko/i);return f&&!g},describe:function(u){var f={name:p.ENGINE_MAP.Gecko},g=c.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:p.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(u){var f={name:p.ENGINE_MAP.WebKit},g=c.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,u);return g&&(f.version=g),f}}];a.default=E,o.exports=a.default}})})});I();I();I();I();var Se=(c,p,E,...u)=>ue(void 0,[c,p,E,...u],function*(o,a,i,d={}){let f=yield fetch(o,{method:a,headers:_e({"Content-Type":"application/json"},d),body:i?JSON.stringify(i):null});if(!f.ok)throw f;try{return yield f.json()}catch(g){return f.ok}});I();var mu=cn(gu()),ce=class{constructor(a){this.debug=(0,mu.default)(a)}log(a,...i){this.debug(a,...i)}};I();I();var Xu=cn(Yu());var se=class{constructor(a={}){this.subscribe=a=>{this.callbacks.push(a)};this.unsubscribe=a=>{this.callbacks=this.callbacks.filter(i=>i!==a)};this.publish=(...a)=>{!this.callbacks||this.callbacks.forEach(i=>{this.callListener(i,a).catch(d=>{this.logger.log("superviz-sdk:observer-helper:publish:error",`
            Failed to execute callback on publish value.
            Callback: ${i}
            Event: ${JSON.stringify(a)}
            Error: ${d}
          `)})})};this.reset=()=>{this.callbacks=[]};this.destroy=()=>{delete this.logger,delete this.callbacks};this.callListener=(a,i)=>new Promise((d,c)=>{try{let p=a(...i);d(p)}catch(p){c(p)}});let{logger:i,throttleTime:d}=a;this.logger=i!=null?i:new ce("@superviz/sdk/observer-helper"),this.throttle=d,this.callbacks=[],this.throttle&&(this.publish=(0,Xu.default)(this.publish,this.throttle))}};var Gn=class{constructor(){this.observers={};this.subscribe=(a,i)=>{this.logger.log(`subscribed to ${a} event`),this.observers[a]||(this.observers[a]=new se({logger:this.logger})),this.observers[a].subscribe(i)};this.unsubscribe=(a,i)=>{if(this.logger.log(`unsubscribed from ${a} event`),!!this.observers[a]){if(!i){this.observers[a].destroy(),delete this.observers[a];return}this.observers[a].unsubscribe(i)}};this.publish=(a,i)=>{a in this.observers&&this.observers[a].publish(i)}}};I();I();I();var Qu=cn(Ur()),vs=class{setConfig(a){this.configuration=a}get(a,i){return this.configuration?Qu.default.get(this.configuration,a,i):i}},K=new vs;var Qe=class{static createUrl(a,i,d={}){let c=new URL(i,a);return Object.keys(d).forEach(p=>c.searchParams.append(p,d[p])),c.toString()}static validateApiKey(a,i){let d="/user/checkapikey",c=this.createUrl(a,d);return Se(c,"POST",{apiKey:i})}static fetchConfig(a,i){let d="/immersive-config",c=this.createUrl(a,d);return Se(c,"POST",{apiKey:i})}static fetchLimits(a,i){return ue(this,null,function*(){let d="/user/check_limits",c=this.createUrl(a,d);return(yield Se(c,"GET","",{apikey:i})).usage})}static fetchWaterMark(a,i){return ue(this,null,function*(){let d="/user/watermark",c=this.createUrl(a,d),{message:p}=yield Se(c,"POST",{apiKey:i});return p})}static createAnnotations(a,i,d){return ue(this,null,function*(){let c="/annotations",p=this.createUrl(a,c);return Se(p,"POST",_e({},d),{apikey:i})})}static updateComment(a,i,d,c){return ue(this,null,function*(){let p=`/comments/${d}`,E=this.createUrl(a,p);return Se(E,"PUT",{text:c},{apikey:i})})}static createComment(a,i,d){return ue(this,null,function*(){let c="/comments",p=this.createUrl(a,c);return Se(p,"POST",_e({},d),{apikey:i})})}static fetchAnnotation(a,i,d){return ue(this,null,function*(){let c="/annotations",p=this.createUrl(a,c,{roomId:d.roomId,url:d.url});return Se(p,"GET",void 0,{apikey:i})})}static resolveAnnotation(a,i,d){return ue(this,null,function*(){let c=`/annotations/resolve/${d}`,p=this.createUrl(a,c);return Se(p,"POST",{},{apikey:i})})}static deleteComment(a,i,d){return ue(this,null,function*(){let c=`/comments/${d}`,p=this.createUrl(a,c);return Se(p,"DELETE",{},{apikey:i})})}static deleteAnnotation(a,i,d){return ue(this,null,function*(){let c=`/annotations/${d}`,p=this.createUrl(a,c);return Se(p,"DELETE",{},{apikey:i})})}static createOrUpdateParticipant(a){return ue(this,null,function*(){let i=K.get("apiUrl"),d="/participants",c=this.createUrl(i,d);return Se(c,"POST",_e({},a),{apikey:K.get("apiKey")})})}static sendActivity(a,i,d,c){return ue(this,null,function*(){let p="/activity",E=K.get("apiUrl"),u=K.get("roomId"),f=K.get("apiKey"),g=this.createUrl(E,p);return Se(g,"POST",{groupId:i,groupName:d,meetingId:u,product:c,userId:a},{apikey:f})})}static validadeParticipantIsEnteringTwice(a,i,d,c){return ue(this,null,function*(){let p=window.btoa(c),u=`https://rest.ably.io/channels/${`superviz:${i.toLowerCase()}-${d}`}/presence`;try{return(yield(yield fetch(u,{headers:{Authorization:`Basic ${p}`}})).json()).some(T=>JSON.parse(T.data).id===a.id)}catch(f){throw new Error("Failed to fetch realtime participants")}})}};I();var je=class extends Gn{constructor(){super(...arguments);this.isAttached=!1;this.attach=i=>{if(Object.values(i).includes(null)||Object.values(i).includes(void 0)){let f=`${this.name} @ attach - params are required`;throw this.logger.log(f),new Error(f)}let{realtime:d,localParticipant:c,group:p,config:E,eventBus:u}=i;if(!d.isDomainWhitelisted){let f=`Component ${this.name} can't be used because this website's domain is not whitelisted. Please add your domain in https://dashboard.superviz.com/developer`;this.logger.log(f);return}if(K.setConfig(E),this.realtime=d,this.localParticipant=c,this.group=p,this.eventBus=u,this.isAttached=!0,!this.realtime.isJoinedRoom){this.logger.log(`${this.name} @ attach - not joined yet`),setTimeout(()=>{this.logger.log(`${this.name} @ attach - retrying`),this.attach(i)},1e3);return}this.logger.log(`${this.name} @ attached`),this.start()};this.detach=()=>{if(!this.isAttached){this.logger.log(`${this.name} @ detach - component is not attached}`);return}this.logger.log("detached"),this.destroy(),Object.values(this.observers).forEach(i=>{i.reset(),i.destroy()}),this.observers=void 0,this.realtime=void 0,this.localParticipant=void 0,this.isAttached=!1}}};I();I();var bs=(i=>(i.LEFT="left",i.RIGHT="right",i))(bs||{}),_s=(c=>(c.TOP_LEFT="top-left",c.TOP_RIGHT="top-right",c.BOTTOM_LEFT="bottom-left",c.BOTTOM_RIGHT="bottom-right",c))(_s||{});var Es=class extends je{constructor(i,d){super();this.sidebarOpen=!1;this.onPinFixed=i=>{this.coordinates=i};this.toggleAnnotationSidebar=()=>{this.element.toggleAttribute("open"),this.sidebarOpen=this.element.hasAttribute("open"),this.pinAdapter.setActive(this.sidebarOpen),document.body.dispatchEvent(new CustomEvent("prepare-to-create-annotation",{detail:void 0,composed:!0,bubbles:!0})),document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0}))};this.onSelectAnnotation=i=>{this.sidebarOpen||this.toggleAnnotationSidebar()};this.positionFloatingButton=()=>{var f,g;this.button=document.createElement("superviz-comments-button");let i=(f=this.layoutOptions)==null?void 0:f.buttonLocation,d=(g=this.layoutOptions)==null?void 0:g.position;if(!i){document.body.appendChild(this.button),this.button.commentsPosition=d;return}let c="",p=Object.values(_s),E=!1,u=!p.includes(i.toLocaleLowerCase());if(u){let y=window.document.body.querySelector(`#${i}`);y?(y.appendChild(this.button),c="position: relative"):(E=!0,i="top-left")}if(!u||E){document.body.appendChild(this.button);let[y,T]=i.split("-");c=`${y}: 20px; ${T}: 20px;`}this.button.positionStyles=c,this.button.commentsPosition=d};this.positionComments=()=>{var E;this.element=document.createElement("superviz-comments"),this.element.setAttribute("comments",JSON.stringify([])),this.element.side="left: 0;",document.body.appendChild(this.element);let i=(E=this.layoutOptions)==null?void 0:E.position;if(!i)return;let d=Object.values(bs),c=i.toLocaleLowerCase();if(!d.includes(c))return;let p=i==="left"?"left: 0;":"right: 0;";this.element.side=p};this.createAnnotation=d=>ue(this,[d],function*({detail:i}){try{let{text:c}=i,{url:p}=this,E=_e({},this.coordinates),u=yield Qe.createAnnotations(K.get("apiUrl"),K.get("apiKey"),{roomId:K.get("roomId"),position:JSON.stringify(E),url:p,userId:this.localParticipant.id}),f=yield this.createComment(u.uuid,c);this.addAnnotation(Ct(_e({},u),{comments:[f]})),this.pinAdapter.removeAnnotationPin("temporary-pin"),document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:u.uuid},composed:!0,bubbles:!0}))}catch(c){this.logger.log("error when creating annotation",c)}});this.deleteAnnotation=d=>ue(this,[d],function*({detail:i}){try{let{uuid:c}=i;yield Qe.deleteAnnotation(K.get("apiUrl"),K.get("apiKey"),c);let p=this.annotations.filter(E=>E.uuid!==c);this.updateAnnotationList(p),this.pinAdapter.removeAnnotationPin(c),this.element.updateAnnotations(this.annotations)}catch(c){this.logger.log("error when deleting annotation",c)}});this.updateComment=d=>ue(this,[d],function*({detail:i}){try{let{uuid:c,text:p}=i;yield Qe.updateComment(K.get("apiUrl"),K.get("apiKey"),c,p);let E=this.annotations.map(u=>Object.assign({},u,{comments:u.comments.map(f=>f.uuid===c?Object.assign({},f,{text:p}):f)}));this.updateAnnotationList(E)}catch(c){this.logger.log("error when updating comment",c)}});this.resolveAnnotation=d=>ue(this,[d],function*({detail:i}){try{let{uuid:c}=i,{resolved:p}=yield Qe.resolveAnnotation(K.get("apiUrl"),K.get("apiKey"),c),E=this.annotations.map(u=>u.uuid===c?Object.assign({},u,{resolved:p}):u);if(this.updateAnnotationList(E),p){this.pinAdapter.removeAnnotationPin(c);return}this.pinAdapter.updateAnnotations(this.annotations)}catch(c){this.logger.log("error when resolve annotation",c)}});this.deleteComment=d=>ue(this,[d],function*({detail:i}){try{let{uuid:c,annotationId:p}=i;if(!c||!p)return;yield Qe.deleteComment(K.get("apiUrl"),K.get("apiKey"),c);let E=this.annotations.find(f=>f.uuid===p);E.comments=E.comments.filter(f=>f.uuid!==c);let u=this.annotations.map(f=>f.uuid===p?E:f);this.element.updateAnnotations(u),this.updateAnnotationList(u)}catch(c){this.logger.log("error when deleting comment",c)}});this.onAnnotationListUpdate=i=>{let{data:d,clientId:c}=i;this.localParticipant.id!==c&&(this.annotations=d,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations))};this.name="comments",this.logger=new ce("@superviz/sdk/comments-component"),this.annotations=[],this.layoutOptions=d!=null?d:{position:"left",buttonLocation:"top-left"},setTimeout(()=>{var c,p,E,u,f;i.setCommentsMetadata((p=(c=this.layoutOptions)==null?void 0:c.position)!=null?p:"left",(u=(E=this.localParticipant)==null?void 0:E.avatar)==null?void 0:u.imageUrl,(f=this.localParticipant)==null?void 0:f.name)}),this.pinAdapter=i}get url(){let i=new URL(this.clientUrl);return i.search="",i.toString()}start(){this.clientUrl=window.location.href,this.positionComments(),this.positionFloatingButton(),this.fetchAnnotations(),this.waterMarkState(),this.addListeners(),this.pinAdapter.setPinsVisibility(!0)}destroy(){this.logger.log("comments component @ destroy"),this.destroyListeners(),this.button.remove(),this.element.remove(),this.element=void 0,this.pinAdapter.destroy()}addListeners(){this.button.addEventListener("toggle",this.toggleAnnotationSidebar),this.element.addEventListener("toggle",this.toggleAnnotationSidebar),document.body.addEventListener("create-annotation",this.createAnnotation),this.element.addEventListener("resolve-annotation",this.resolveAnnotation),this.element.addEventListener("delete-annotation",this.deleteAnnotation),this.element.addEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,!0)}),this.element.addEventListener("update-comment",this.updateComment),this.element.addEventListener("delete-comment",this.deleteComment),document.body.addEventListener("select-annotation",this.onSelectAnnotation),this.realtime.commentsObserver.subscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.subscribe(this.onPinFixed)}destroyListeners(){this.button.removeEventListener("toggle",this.toggleAnnotationSidebar),this.element.removeEventListener("toggle",this.toggleAnnotationSidebar),this.element.removeEventListener("create-annotation",this.createAnnotation),this.element.removeEventListener("resolve-annotation",this.resolveAnnotation),this.element.removeEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,!0)}),this.element.removeEventListener("update-comment",this.updateComment),this.element.removeEventListener("delete-comment",this.deleteComment),document.body.removeEventListener("select-annotation",this.onSelectAnnotation),this.realtime.commentsObserver.unsubscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.unsubscribe(this.onPinFixed)}createComment(i,d,c=!1){return ue(this,null,function*(){try{let p=yield Qe.createComment(K.get("apiUrl"),K.get("apiKey"),{annotationId:i,userId:this.localParticipant.id,text:d});return c&&this.addComment(i,p),p}catch(p){this.logger.log("error when creating comment",p)}})}addAnnotation(i){let d=[i,...this.annotations];this.element.updateAnnotations(d),this.pinAdapter.updateAnnotations(d),this.updateAnnotationList(d)}updateAnnotationList(i){this.annotations=i,this.realtime.updateComments(i)}addComment(i,d){let c=this.annotations.find(E=>E.uuid===i);c.comments.push(d);let p=this.annotations.map(E=>E.uuid===i?c:E);this.updateAnnotationList(p),this.element.updateAnnotations(p)}fetchAnnotations(){return ue(this,null,function*(){try{let i=yield Qe.fetchAnnotation(K.get("apiUrl"),K.get("apiKey"),{roomId:K.get("roomId"),url:this.url});this.annotations=i,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations)}catch(i){this.logger.log("error when fetching annotations",i)}})}waterMarkState(){return ue(this,null,function*(){try{let i=yield Qe.fetchWaterMark(K.get("apiUrl"),K.get("apiKey"));this.element.waterMarkStatus(i)}catch(i){this.logger.log("error when fetching waterMark",i)}})}};I();I();var As=class{constructor(a,i){this.isPinsVisible=!0;this.selectedPin=null;this.temporaryPinCoordinates=null;this.commentsSide="left";this.localParticipant={};this.setCommentsMetadata=(a,i,d)=>{this.commentsSide=a,this.localParticipant.avatar=i,this.localParticipant.name=d};this.resetPins=a=>{a&&(a==null?void 0:a.key)!=="Escape"||(this.resetSelectedPin(),this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};this.animate=()=>{(this.isActive||this.isPinsVisible)&&(this.renderAnnotationsPins(),this.renderDivWrapper()),this.temporaryPinCoordinates&&this.renderTemporaryPin(),requestAnimationFrame(this.animate)};this.setMouseDownCoordinates=({x:a,y:i})=>{this.mouseDownCoordinates={x:a,y:i}};this.annotationSelected=({detail:{uuid:a}})=>{var c,p;if(!a)return;let i=JSON.parse((p=(c=this.selectedPin)==null?void 0:c.getAttribute("annotation"))!=null?p:"{}");if(this.resetPins(),(i==null?void 0:i.uuid)===a)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let d=this.pins.get(a);!d||(d.setAttribute("active",""),this.selectedPin=d,this.goToPin(a))};this.onClick=a=>{if(!this.isActive)return;let i=this.canvas.getBoundingClientRect(),{x:d,y:c}=this.mouseDownCoordinates,p=d-i.x,E=c-i.y,u=a.clientX-i.left,f=a.clientY-i.top;if(Math.hypot(u-p,f-E)>10)return;let C=this.canvas.getContext("2d").getTransform().inverse(),L=new DOMPoint(u,f).matrixTransform(C);this.onPinFixedObserver.publish({x:L.x,y:L.y,type:"canvas"}),this.resetSelectedPin(),this.temporaryPinCoordinates={x:L.x,y:L.y},this.renderTemporaryPin();let R=document.getElementById("superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,R.setAttribute("movedPosition",String(this.movedTemporaryPin)),!this.selectedPin&&document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onMouseMove=a=>{let{x:i,y:d}=a;this.mouseElement||(this.mouseElement=this.createMouseElement()),this.mouseElement.setAttribute("position",JSON.stringify({x:i,y:d}))};this.onMouseLeave=()=>{this.mouseElement&&(this.mouseElement.remove(),this.mouseElement=null),this.canvas.style.cursor="default"};this.onMouseEnter=()=>{this.mouseElement||(this.mouseElement=this.createMouseElement())};this.onToggleAnnotationSidebar=({detail:a})=>{let{open:i}=a;i||(this.pins.forEach(d=>{d.removeAttribute("active")}),this.pins.has("temporary-pin")&&this.removeAnnotationPin("temporary-pin"))};if(this.logger=new ce("@superviz/sdk/comments-component/canvas-pin-adapter"),this.canvas=document.getElementById(a),this.isActive=!1,this.pins=new Map,this.goToPinCallback=i==null?void 0:i.onGoToPin,!this.canvas){let d=`Canvas with id ${a} not found`;throw this.logger.log(d),new Error(d)}this.canvasSides=this.canvas.getBoundingClientRect(),document.body.style.position="relative",this.onPinFixedObserver=new se({logger:this.logger}),this.divWrapper=this.renderDivWrapper(),this.annotations=[],this.renderAnnotationsPins(),this.animateFrame=requestAnimationFrame(this.animate)}destroy(){this.removeListeners(),this.removeAnnotationsPins(),this.mouseElement=null,this.pins=new Map,this.divWrapper.remove(),this.onPinFixedObserver.destroy(),this.onPinFixedObserver=null,this.canvas.style.cursor="default",this.annotations=[],cancelAnimationFrame(this.animateFrame)}setPinsVisibility(a){if(this.isPinsVisible=a,this.isPinsVisible){this.renderAnnotationsPins();return}this.removeAnnotationsPins()}setActive(a){if(this.isActive=a,this.canvas.style.cursor=a?"none":"default",this.isActive){this.addListeners();return}this.removeListeners()}updateAnnotations(a){this.logger.log("updateAnnotations",a),this.annotations=a,!(!this.isActive&&!this.isPinsVisible)&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}removeAnnotationPin(a){let i=this.pins.get(a);!i||(i.remove(),this.pins.delete(a),this.annotations=this.annotations.filter(d=>d.uuid!==a))}renderTemporaryPin(){var y,T;let a=document.getElementById("superviz-temporary-pin");a||(a=document.createElement("superviz-comments-annotation-pin"),a.id="superviz-temporary-pin",a.setAttribute("type","add"),a.setAttribute("showInput",""),a.setAttribute("containerSides",JSON.stringify(this.canvasSides)),a.setAttribute("commentsSide",this.commentsSide),a.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),a.setAttribute("annotation",JSON.stringify({})),a.setAttribute("localAvatar",(y=this.localParticipant.avatar)!=null?y:""),a.setAttribute("localName",(T=this.localParticipant.name)!=null?T:""),a.setAttributeNode(document.createAttribute("active")),this.divWrapper.appendChild(a));let{x:i,y:d}=this.temporaryPinCoordinates,p=this.canvas.getContext("2d").getTransform(),E=p.e,u=p.f,f=i+E,g=d+u;a.setAttribute("position",JSON.stringify({x:f,y:g})),this.pins.set("temporary-pin",a)}addListeners(){this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.setMouseDownCoordinates),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseout",this.onMouseLeave),this.canvas.addEventListener("mouseenter",this.onMouseEnter),document.body.addEventListener("keyup",this.resetPins),document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar)}removeListeners(){this.canvas.removeEventListener("click",this.onClick),this.canvas.removeEventListener("mousedown",this.setMouseDownCoordinates),this.canvas.removeEventListener("mousemove",this.onMouseMove),this.canvas.removeEventListener("mouseout",this.onMouseLeave),this.canvas.removeEventListener("mouseenter",this.onMouseEnter),document.body.removeEventListener("keyup",this.resetPins),document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar)}createMouseElement(){let a=document.createElement("superviz-comments-annotation-pin");return a.setAttribute("type","add"),a.setAttribute("annotation",JSON.stringify({})),a.setAttribute("position",JSON.stringify({x:0,y:0})),document.body.appendChild(a),this.canvas.style.cursor="none",a}resetSelectedPin(){!this.selectedPin||(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}renderDivWrapper(){let a=this.canvas.getBoundingClientRect(),i=document.createElement("div");return i.id="superviz-canvas-wrapper",this.canvas.parentElement.style.position="relative",i.style.position="fixed",i.style.top=`${a.top}px`,i.style.left=`${a.left}px`,i.style.width=`${a.width}px`,i.style.height=`${a.height}px`,i.style.pointerEvents="none",i.style.overflow="hidden",document.getElementById("superviz-canvas-wrapper")||this.canvas.parentElement.appendChild(i),i}renderAnnotationsPins(){if(!this.annotations||this.canvas.style.display==="none"){this.removeAnnotationsPins();return}this.annotations.forEach(a=>{if(a.resolved)return;let i=JSON.parse(a.position);if((i==null?void 0:i.type)!=="canvas")return;let{x:d,y:c}=i,E=this.canvas.getContext("2d").getTransform(),u=E.e,f=E.f,g=d+u,y=c+f;if(this.pins.has(a.uuid)){let C=this.pins.get(a.uuid);if(this.divWrapper.clientWidth>g&&this.divWrapper.clientHeight>y){C.setAttribute("style","opacity: 1"),this.pins.get(a.uuid).setAttribute("position",JSON.stringify({x:g,y}));return}C.setAttribute("style","opacity: 0");return}let T=document.createElement("superviz-comments-annotation-pin");T.setAttribute("type","show"),T.setAttribute("annotation",JSON.stringify(a)),T.setAttribute("position",JSON.stringify({x:g,y})),T.id=a.uuid,this.divWrapper.appendChild(T),this.pins.set(a.uuid,T)})}removeAnnotationsPins(){this.pins.forEach(a=>{a.remove()}),this.pins.clear()}goToPin(a){let i=this.annotations.find(L=>L.uuid===a);if(!i)return;let d=JSON.parse(i.position);if((d==null?void 0:d.type)!=="canvas")return;let c=this.canvas.getBoundingClientRect(),{width:p,height:E}=c,{x:u,y:f}=d,g=p/2,y=E/2,T=g-u,C=y-f;this.goToPinCallback&&this.goToPinCallback({x:T,y:C})}};I();var Ps=cn(Ur());I();I();I();var ht=cn(ju()),kr=class{constructor(){this.browser=ht.default.getParser(navigator.userAgent)}get clientStats(){return this.browser.getResult()}get isFirefox(){return this.browser.isBrowser(ht.default.BROWSER_MAP.firefox)}get isSafari(){return this.browser.isBrowser(ht.default.BROWSER_MAP.safari)}get isChrome(){return this.browser.isBrowser(ht.default.BROWSER_MAP.chrome)}get isIE(){return this.browser.isBrowser(ht.default.BROWSER_MAP.ie)}get isEdge(){return this.browser.isBrowser(ht.default.BROWSER_MAP.edge)}get isMobileDevice(){return(this.browser.is(ht.default.PLATFORMS_MAP.mobile)||this.browser.is(ht.default.PLATFORMS_MAP.tablet))&&!navigator.userAgent.match(/iPad/i)}get isTabletDevice(){return this.browser.is(ht.default.PLATFORMS_MAP.tablet)}get isAndroid(){return this.isMobileDevice&&!!navigator.userAgent.match(/Android/i)}get isIpad(){return!!navigator.userAgent.match(/iPad/i)}get isIphone(){return this.isMobileDevice&&!!navigator.userAgent.match(/iPhone/i)}get isAppleMobileDevice(){return this.isIpad||this.isIphone}};I();var Hr=class{constructor(){this.updateMeetingConnectionStatus=a=>{this.oldConnectionStatus=this.connectionStatus,this.connectionStatus=a,this.connectionStatusObserver.publish(a),this.logger.log("CONNECTION STATUS CHANGE",a)};this.onUpdateBrowserOnlineStatus=a=>{let{type:i}=a;if(i==="online"){this.updateMeetingConnectionStatus(1);return}this.updateMeetingConnectionStatus(4)};this.logger=new ce("@superviz/sdk/connection-service"),this.connectionStatus=0,this.connectionStatusObserver=new se({logger:this.logger})}addListeners(){window.addEventListener("online",this.onUpdateBrowserOnlineStatus),window.addEventListener("offline",this.onUpdateBrowserOnlineStatus)}removeListeners(){window.removeEventListener("online",this.onUpdateBrowserOnlineStatus),window.removeEventListener("offline",this.onUpdateBrowserOnlineStatus)}};I();I();var zr=class{build(a,i,d,c={},p={}){let E=document.querySelector(`#${a}`),u=new URL(i);if(this.wrapperId||this.element)throw new Error("Tried to initialize two frames with the same FrameBricklayer instance");this.element=document.createElement("iframe"),Object.entries(c).forEach(([f,g])=>{u.searchParams.set(f,g)}),Object.entries(p).forEach(([f,g])=>{this.element.setAttribute(f,g)}),this.element.src=u.toString(),this.element.id=d,E.appendChild(this.element),this.wrapperId=a}destroy(){if(!this.wrapperId)throw new Error("Tried to destroy a frame before it was initialized");let a=document.querySelector(`#${this.wrapperId}`);!!a&&!!a.querySelector(`#${this.element.id}`)&&a.removeChild(this.element),this.wrapperId=null,this.element=null}};I();var $r=class{constructor(a){this.observers={};this.sourceBlockList=["vue-devtools-proxy","vue-devtools-backend"];this.originBlockList=["https://sketchfab.com"];this.publish=(a,i={})=>{this.logger.log("MessageBridge","Posting message to frame",a,i),this.contentWindow.postMessage({type:a,data:i},this.allowedOrigins)};this.listen=(a,i)=>{this.observers[a]||(this.observers[a]=new se({logger:this.logger})),this.observers[a].subscribe(i)};this.onReceiveMessage=a=>{let{type:i,data:d,source:c}=a.data;if(this.sourceBlockList.includes(c)||this.originBlockList.includes(a.origin))return;let p=!!i,E=!this.domains.length||this.domains.includes(a.origin),u=this.observers.hasOwnProperty(i);if(this.logger.log("MessageBridge",`Message received -
        TYPE: ${a.type}
        ORIGIN: ${a.origin}
        DATA: ${JSON.stringify(a.data)} `),!p||!E||!u){this.logger.log("MessageBridge","Message discarded");return}this.observers[i].publish(d)};let{contentWindow:i,domains:d=[],allowedOrigins:c="*",sourceBlockList:p=[],logger:E}=a;if(this.logger=E,this.domains=d,this.allowedOrigins=c,this.sourceBlockList.push(...p),typeof window=="undefined")throw new Error("MessageBridge: window is undefined");this.contentWindow=i,window.addEventListener("message",this.onReceiveMessage)}destroy(){Object.entries(this.observers).forEach(([a,i])=>{i.reset(),delete this.observers[a]}),window.removeEventListener("message",this.onReceiveMessage),delete this.logger,delete this.allowedOrigins,delete this.contentWindow,delete this.domains,delete this.observers,delete this.sourceBlockList}};I();var el="sv-video-frame",kn=class{constructor(a){this.logger=new ce("@superviz/sdk/video-conference-manager");this.frameStateObserver=new se({logger:this.logger});this.frameSizeObserver=new se({logger:this.logger});this.waitingForHostObserver=new se({logger:this.logger});this.realtimeEventsObserver=new se({logger:this.logger});this.sameAccountErrorObserver=new se({logger:this.logger});this.devicesObserver=new se({logger:this.logger});this.meetingStateObserver=new se({logger:this.logger});this.meetingConnectionObserver=new se({logger:this.logger});this.participantJoinedObserver=new se({logger:this.logger});this.participantLeftObserver=new se({logger:this.logger});this.participantListObserver=new se({logger:this.logger});this.frameState=0;this.layoutModalsAndCamerasConfig=(a,i)=>{let d=a,c=i,p=["left","right","bottom","top"].includes(c),E=["left","right","center"].includes(d);return p||(c="right"),E||(d="right"),this.browserService.isMobileDevice?(c="bottom",{layoutPosition:d,camerasPosition:c}):(d==="left"&&c==="right"&&(d="right"),d==="right"&&c==="left"&&(d="left"),{layoutPosition:d,camerasPosition:c})};this.onFrameLoad=()=>{this.messageBridge=new $r({logger:this.logger,contentWindow:this.bricklayer.element.contentWindow}),this.addMessagesListeners(),this.updateFrameState(2),this.updateFrameLocale(),this.updateMeetingAvatars(),this.onWindowResize(),this.setCustomColors()};this.setFrameOffset=a=>{let i=a!=null?a:{};["top","bottom","left","right"].forEach(d=>{Object.keys(i).includes(d)||(i[d]=0)}),this.frameOffset=i};this.setCustomColors=()=>{!this.customColors||this.messageBridge.publish("frame.color-list-update",this.customColors)};this.setFrameStyle=a=>{let i=document.createElement("style"),{bottom:d,left:c,right:p,top:E}=this.frameOffset;if(i.innerHTML=`
      :root {
        --superviz-offset-top: ${E}px;
        --superviz-offset-right: ${p}px;
        --superviz-offset-left: ${c}px;
        --superviz-offset-bottom: ${d}px;
      }     
    `,document.head.appendChild(i),this.browserService.isMobileDevice){this.bricklayer.element.classList.add("sv-video-frame--bottom");return}this.bricklayer.element.classList.add(`sv-video-frame--${a}`)};this.onFrameDimensionsUpdate=({width:a,height:i})=>{let d=document.getElementById(el),{bottom:c,right:p,left:E,top:u}=this.frameOffset,f=this.isWaterMarkEnabled?40:0,g=`${a}px`,y=`${i+f}px`;(a>=window.innerWidth||this.isHorizontalCameraEnabled)&&(g=`calc(100% - ${p}px - ${E}px)`),i>=window.innerHeight&&(y=`calc(100% - ${u}px - ${c}px)`),d.style.width=g,d.style.height=y,this.frameSizeObserver.publish({width:d.offsetWidth,height:d.offsetHeight})};this.onWindowResize=()=>{let{top:a,bottom:i,right:d,left:c}=this.frameOffset,{innerHeight:p,innerWidth:E}=window,u=p-a-i,f=E-d-c;!this.messageBridge||this.messageBridge.publish("frame.parent-window-size-update",{height:u,width:f})};this.updateFrameLocale=()=>{var p,E;if(!this.frameLocale||!((p=this.frameLocale)!=null&&p.language)&&((E=this.frameLocale)==null?void 0:E.locales))return;let{language:a,locales:i}=this.frameLocale,d=i.map(u=>u==null?void 0:u.language),c=["en",...d];if(a&&!c.includes(a))throw new Error("The default language is not available in the language listing.");this.messageBridge.publish("frame.locales-update",this.frameLocale)};this.updateMeetingAvatars=()=>{this.messageBridge.publish("frame.avatar-list-update",this.meetingAvatars)};this.onParticipantJoined=a=>{this.participantJoinedObserver.publish(a)};this.onParticipantLeft=a=>{this.participantLeftObserver.publish(a)};this.onMeetingHostChange=a=>{this.realtimeEventsObserver.publish({event:"realtime.host-change",data:a})};this.onMeetingKickParticipant=a=>{this.realtimeEventsObserver.publish({event:"meeting.kick-participant",data:a})};this.onFollowParticipantDidChange=a=>{this.realtimeEventsObserver.publish({event:"realtime.follow-participant",data:a})};this.onGoToDidChange=a=>{this.realtimeEventsObserver.publish({event:"realtime.go-to-participant",data:a})};this.onGather=()=>{this.realtimeEventsObserver.publish({event:"realtime.gather",data:!0})};this.onGridModeChange=a=>{this.realtimeEventsObserver.publish({event:"realtime.grid-mode-change",data:a})};this.onDrawingChange=a=>{this.realtimeEventsObserver.publish({event:"realtime.drawing-change",data:a})};this.onTranscriptChange=a=>{this.realtimeEventsObserver.publish({event:"realtime.transcript-change",data:a})};this.onSameAccountError=a=>{this.sameAccountErrorObserver.publish(a)};this.onDevicesChange=a=>{this.devicesObserver.publish(a)};this.meetingStateUpdate=a=>{this.meetingStateObserver.publish(a)};this.onConnectionStatusChange=a=>{this.meetingConnectionObserver.publish(a)};this.onWaitingForHostDidChange=a=>{this.waitingForHostObserver.publish(a)};this.onParticipantListUpdate=a=>{this.participantListObserver.publish(a)};var ze,Nt,Pt,Dt;let{language:i,canUseCams:d,canUseChat:c,canUseScreenshare:p,canUseDefaultAvatars:E,canUseFollow:u,canUseGoTo:f,canUseGather:g,canUseDefaultToolbar:y,canUseTranscription:T,browserService:C,offset:L,locales:R,avatars:N,customColors:q,waterMark:Z,layoutPosition:fe,camerasPosition:he,skipMeetingSettings:pe,devices:j,layoutMode:V,collaborationMode:ge}=a;this.browserService=C;let be=this.layoutModalsAndCamerasConfig(fe,he),oe=document.createElement("div");this.frameConfig={apiKey:K.get("apiKey"),apiUrl:K.get("apiUrl"),ablyKey:K.get("ablyKey"),debug:K.get("debug"),roomId:K.get("roomId"),limits:K.get("limits"),collaborationMode:ge,canUseFollow:u,canUseGoTo:f,canUseCams:d,canUseChat:c,canUseGather:g,canUseScreenshare:p,canUseDefaultAvatars:E,canUseTranscription:T,camerasPosition:(ze=be.camerasPosition)!=null?ze:"right",canUseDefaultToolbar:y,devices:{audioInput:(Nt=j==null?void 0:j.audioInput)!=null?Nt:!0,audioOutput:(Pt=j==null?void 0:j.audioOutput)!=null?Pt:!0,videoInput:(Dt=j==null?void 0:j.videoInput)!=null?Dt:!0},waterMark:Z,layoutMode:V,skipMeetingSettings:pe,layoutPosition:be.layoutPosition},this.customColors=q,oe.classList.add("sv_video_wrapper"),oe.id="sv-video-wrapper",document.body.appendChild(oe),this.updateFrameState(1),this.bricklayer=new zr,this.bricklayer.build(oe.id,K.get("conferenceLayerUrl"),el,void 0,{allow:"camera *;microphone *; display-capture *;"}),this.setFrameOffset(L),this.setFrameStyle(be.camerasPosition),this.bricklayer.element.addEventListener("load",this.onFrameLoad),this.frameLocale={language:i,locales:R},this.meetingAvatars=N,window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize)}get isWaterMarkEnabled(){return this.browserService.isMobileDevice?!1:this.frameConfig.waterMark}get isHorizontalCameraEnabled(){return this.browserService.isMobileDevice?!1:["top","bottom"].includes(this.frameConfig.camerasPosition)}addMessagesListeners(){this.messageBridge.listen("meeting.waiting-for-host",this.onWaitingForHostDidChange),this.messageBridge.listen("meeting.participant-joined",this.onParticipantJoined),this.messageBridge.listen("meeting.participant-list-update",this.onParticipantListUpdate),this.messageBridge.listen("meeting.participant-left",this.onParticipantLeft),this.messageBridge.listen("meeting.host-change",this.onMeetingHostChange),this.messageBridge.listen("meeting.kick-participant",this.onMeetingKickParticipant),this.messageBridge.listen("meeting.same-participant-error",this.onSameAccountError),this.messageBridge.listen("meeting.state-update",this.meetingStateUpdate),this.messageBridge.listen("meeting.connection-status-change",this.onConnectionStatusChange),this.messageBridge.listen("meeting.devices-change",this.onDevicesChange),this.messageBridge.listen("realtime.grid-mode-change",this.onGridModeChange),this.messageBridge.listen("realtime.drawing-change",this.onDrawingChange),this.messageBridge.listen("realtime.transcript-change",this.onTranscriptChange),this.messageBridge.listen("frame.dimensions-update",this.onFrameDimensionsUpdate),this.messageBridge.listen("realtime.follow-participant",this.onFollowParticipantDidChange),this.messageBridge.listen("realtime.go-to-participant",this.onGoToDidChange),this.messageBridge.listen("realtime.gather",this.onGather)}updateFrameState(a){a!==this.frameState&&(this.frameState=a,this.frameStateObserver.publish(this.frameState));let i={[1]:6,[2]:7,[0]:8};this.meetingStateUpdate(i[a])}start(a){this.messageBridge.publish("meeting.start",Ct(_e({},a),{config:this.frameConfig}))}leave(){this.messageBridge.publish("meeting.leave"),this.destroy()}destroy(){var a,i;(a=this.messageBridge)==null||a.destroy(),(i=this.bricklayer)==null||i.destroy(),this.frameSizeObserver.destroy(),this.realtimeEventsObserver.destroy(),this.sameAccountErrorObserver.destroy(),this.devicesObserver.destroy(),this.meetingStateObserver.destroy(),this.meetingConnectionObserver.destroy(),this.participantJoinedObserver.destroy(),this.participantLeftObserver.destroy(),this.bricklayer=null,this.frameState=null}publishMessageToFrame(a,i){this.messageBridge.publish(a,i)}};var ws=class extends je{constructor(i){var d,c;super();this.participantToFrameList=[];this.participantsOnMeeting=[];this.startVideo=()=>{var i,d,c,p,E,u,f,g,y,T,C,L,R,N,q,Z,fe,he,pe,j,V,ge,be,oe,ze,Nt,Pt,Dt,Hn,at,et,zn,Bt;this.videoConfig={language:(i=this.params)==null?void 0:i.language,canUseTranscription:((d=this.params)==null?void 0:d.transcriptOff)===!1,canUseChat:!((c=this.params)!=null&&c.chatOff),canUseCams:!((p=this.params)!=null&&p.camsOff),canUseScreenshare:!((E=this.params)!=null&&E.screenshareOff),canUseDefaultAvatars:!!((u=this.params)!=null&&u.defaultAvatars)&&!((g=(f=this.localParticipant)==null?void 0:f.avatar)!=null&&g.model3DUrl),canUseGather:!!((y=this.params)!=null&&y.enableGather),canUseFollow:!!((T=this.params)!=null&&T.enableFollow),canUseGoTo:!!((C=this.params)!=null&&C.enableGoTo),canUseDefaultToolbar:(R=(L=this.params)==null?void 0:L.defaultToolbar)!=null?R:!0,camerasPosition:(q=(N=this.params)==null?void 0:N.collaborationMode)==null?void 0:q.position,devices:(Z=this.params)==null?void 0:Z.devices,skipMeetingSettings:(fe=this.params)==null?void 0:fe.skipMeetingSettings,browserService:this.browserService,offset:(he=this.params)==null?void 0:he.offset,locales:(j=(pe=this.params)==null?void 0:pe.locales)!=null?j:[],avatars:(ge=(V=this.params)==null?void 0:V.avatars)!=null?ge:[],customColors:K.get("colors"),collaborationMode:(ze=(oe=(be=this.params)==null?void 0:be.collaborationMode)==null?void 0:oe.enabled)!=null?ze:!0,layoutPosition:((Pt=(Nt=this.params)==null?void 0:Nt.collaborationMode)==null?void 0:Pt.enabled)===!1?"center":(at=(Hn=(Dt=this.params)==null?void 0:Dt.collaborationMode)==null?void 0:Hn.modalPosition)!=null?at:"center",layoutMode:(Bt=(zn=(et=this.params)==null?void 0:et.collaborationMode)==null?void 0:zn.initialView)!=null?Bt:"list",waterMark:this.showWaterMarkType},this.logger.log("video conference @ start video",this.videoConfig),this.videoManager=new kn(this.videoConfig),this.subscribeToVideoEvents()};this.subscribeToVideoEvents=()=>{this.logger.log("video conference @ subscribe to video events"),this.videoManager.meetingConnectionObserver.subscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.subscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.subscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.subscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.subscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.subscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.subscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.subscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.subscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.subscribe(this.onSameAccountError),this.videoManager.devicesObserver.subscribe(this.onDevicesChange)};this.unsubscribeFromVideoEvents=()=>{this.logger.log("video conference @ unsubscribe from video events"),this.videoManager.meetingConnectionObserver.unsubscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.unsubscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.unsubscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.unsubscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.unsubscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.unsubscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.unsubscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.unsubscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.unsubscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.unsubscribe(this.onSameAccountError),this.videoManager.devicesObserver.unsubscribe(this.onDevicesChange)};this.suscribeToRealtimeEvents=()=>{this.logger.log("video conference @ subscribe to realtime events"),this.realtime.kickAllParticipantsObserver.subscribe(this.onKickAllParticipantsDidChange),this.realtime.kickParticipantObserver.subscribe(this.onKickLocalParticipant),this.realtime.participantJoinedObserver.subscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.subscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.subscribe(this.onRealtimeParticipantsDidChange),this.realtime.hostObserver.subscribe(this.onHostParticipantDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("video conference @ unsubscribe from realtime events"),this.realtime.kickAllParticipantsObserver.unsubscribe(this.onKickAllParticipantsDidChange),this.realtime.participantJoinedObserver.unsubscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.unsubscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.unsubscribe(this.onRealtimeParticipantsDidChange),this.realtime.hostObserver.unsubscribe(this.onHostParticipantDidChange)};this.createParticipantFromAblyPresence=i=>{var d;return{id:i.clientId,color:this.realtime.getSlotColor((d=i.data)==null?void 0:d.slotIndex).color,avatar:i.data.avatar,type:i.data.type,name:i.data.name,isHost:this.realtime.hostClientId===i.clientId}};this.onFrameSizeDidChange=i=>{this.publish("frame.dimensions-update",i)};this.onWaitingForHost=i=>{this.publish("meeting.waiting-for-host",i)};this.onConnectionStatusChange=i=>{this.logger.log("video conference @ on connection status change",i);let d=[2,4,3,6];d.includes(i)&&this.realtime.freezeSync(!0),d.includes(this.connectionService.oldConnectionStatus)&&!d.includes(i)&&this.realtime.freezeSync(!1),this.publish("meeting.connection-status-change",i)};this.onMeetingStateChange=i=>{this.logger.log("video conference @ on meeting state change",i),this.publish("meeting.state-update",i)};this.onSameAccountError=i=>{this.publish("meeting.same-participant-error",i),this.internalRemoveComponent()};this.onDevicesChange=i=>{this.publish("meeting.devices-change",i)};this.onFrameStateChange=i=>{this.logger.log("video conference @ on frame state change",i),i===2&&(this.videoManager.start({group:this.group,participant:this.localParticipant,roomId:K.get("roomId")}),this.publish("meeting.start"))};this.onRealtimeEventFromFrame=({event:i,data:d})=>{this.logger.log("video conference @ on realtime event from frame",i,d);let c={["realtime.host-change"]:p=>this.realtime.setHost(p),["realtime.gather"]:p=>this.realtime.setGather(p),["realtime.grid-mode-change"]:p=>this.realtime.setGridMode(p),["realtime.drawing-change"]:p=>{this.realtime.setDrawing(p)},["realtime.follow-participant"]:p=>{this.realtime.setFollowParticipant(p)},["meeting.kick-participant"]:p=>{this.realtime.setKickParticipant(p)},["realtime.transcript-change"]:p=>{this.realtime.setTranscript(p)},["realtime.go-to-participant"]:p=>{this.eventBus.publish("realtime.go-to-participant",p)}}[i](d);this.publish(i,d)};this.onParticipantJoined=i=>{if(this.logger.log("video conference @ on participant joined",i),this.localParticipant=i,this.publish("meeting.participant-joined",i),this.publish("my-participant.joined",i),this.videoConfig.canUseDefaultAvatars){this.realtime.updateMyProperties({avatar:i.avatar,name:i.name,type:i.type});return}this.realtime.updateMyProperties({name:i.name,type:i.type})};this.onParticipantLeft=i=>{this.logger.log("video conference @ on participant left",this.localParticipant),this.publish("my-participant.left",this.localParticipant),this.internalRemoveComponent()};this.onParticipantListUpdate=i=>{this.logger.log("video conference @ on participant list update",i),!(0,Ps.isEqual)(this.participantsOnMeeting,i)&&(this.publish("meeting.participant-list-update",i),this.participantsOnMeeting.length!==i.length&&this.publish("meeting.amount-of-participants-update",i.length),this.participantsOnMeeting=i)};this.onKickAllParticipantsDidChange=i=>{this.logger.log("video conference @ on kick all participants did change",i),this.publish("meeting.kick-all-participants",i),this.internalRemoveComponent()};this.onKickLocalParticipant=()=>{this.logger.log("video conference @ on kick local participant"),this.publish("meeting.kick-participant",this.localParticipant),this.internalRemoveComponent()};this.onRoomInfoUpdated=i=>{this.logger.log("video conference @ on room info updated",i);let{isGridModeEnable:d,followParticipantId:c,gather:p,drawing:E,transcript:u}=i;this.videoManager.publishMessageToFrame("realtime.grid-mode-change",d),this.videoManager.publishMessageToFrame("realtime.drawing-change",E),this.videoManager.publishMessageToFrame("realtime.follow-participant",c),this.videoManager.publishMessageToFrame("realtime.transcript-change",u),this.realtime.hostClientId===this.localParticipant.id&&p&&this.realtime.setGather(!1)};this.onRealtimeParticipantsDidChange=i=>{this.logger.log("video conference @ on participants did change",i);let d=Object.values(i).map(c=>({timestamp:c.timestamp,connectionId:c.connectionId,participantId:c.clientId,color:this.realtime.getSlotColor(c.data.slotIndex).name,name:c.data.name,isHost:this.realtime.hostClientId===c.clientId,avatar:c.data.avatar,type:c.data.type}));(0,Ps.isEqual)(this.participantToFrameList,d)||this.videoManager.publishMessageToFrame("realtime.participant-list-update",d),this.participantToFrameList=d};this.onHostParticipantDidChange=i=>{this.logger.log("video conference @ on host participant did change",i),this.videoManager.publishMessageToFrame("realtime.host-change",i==null?void 0:i.newHostParticipantId)};this.onParticipantJoinedOnRealtime=i=>{this.logger.log("video conference @ on participant joined on realtime",i),this.publish("meeting.participant-joined",this.createParticipantFromAblyPresence(i))};this.onParticipantLeftOnRealtime=i=>{this.logger.log("video conference @ on participant left on realtime",i),this.publish("meeting.participant-left",this.createParticipantFromAblyPresence(i))};this.params=Ct(_e({},i),{userType:(c=(d=i==null?void 0:i.participantType)!=null?d:i==null?void 0:i.userType)!=null?c:"guest"}),this.name="videoConference",this.logger=new ce(`@superviz/sdk/${"videoConference"}`),this.browserService=new kr,this.connectionService=new Hr,this.connectionService.addListeners(),this.connectionService.connectionStatusObserver.subscribe(this.onConnectionStatusChange)}toggleMeetingSetup(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-setup")}toggleMicrophone(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-microphone")}toggleCam(){this.videoManager.publishMessageToFrame("meeting-controls.toggle-cam")}toggleScreenShare(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-screenshare")}toggleChat(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-chat")}toggleTranscript(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-transcript")}hangUp(){this.videoManager.publishMessageToFrame("hang-up")}start(){var i;this.logger.log("video conference @ start"),this.params.userType!=="guest"&&(this.localParticipant.type=this.params.userType),this.realtime.setKickParticipantsOnHostLeave(!((i=this.params)!=null&&i.allowGuests)),this.suscribeToRealtimeEvents(),this.showWaterMarkType=K.get("waterMark"),this.startVideo()}destroy(){this.logger.log("video conference @ destroy"),this.publish("destroy"),this.unsubscribeFromRealtimeEvents(),this.unsubscribeFromVideoEvents(),this.videoManager.leave(),this.connectionService.removeListeners()}internalRemoveComponent(){this.logger.log("video conference @ internal remove component");let{data:i}=this.realtime.participant,d=i.activeComponents.filter(c=>c!=="videoConference");this.realtime.updateMyProperties({activeComponents:d,type:"guest"}),this.realtime.setKickParticipantsOnHostLeave(!1),this.detach()}};I();var Os=class extends je{constructor(i,d){super();this.subscribeToRealtimeEvents=()=>{this.logger.log("presence-mouse component @ subscribe to realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.subscribe(this.onParticipantsDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.unsubscribe(this.onParticipantsDidChange)};this.setParticipantPrivate=i=>{this.isPrivate=i,this.realtime.updatePresenceMouse(Ct(_e({},this.localParticipant),{visible:!i}))};this.animate=()=>{this.renderDivWrapper(),this.updateParticipantsMouses(),requestAnimationFrame(this.animate)};this.goToMouse=i=>{let d=this.presences.get(i);if(!d)return;let c=this.canvas.getBoundingClientRect(),{width:p,height:E}=c,{x:u,y:f}=d,g=p/2,y=E/2,T=g-u,C=y-f;this.goToMouseCallback&&this.goToMouseCallback({x:T,y:C})};this.onMyParticipantMouseMove=i=>{let d=this.canvas.getContext("2d"),c=this.canvas.getBoundingClientRect(),p=i.x-c.left,E=i.y-c.top,f=(d==null?void 0:d.getTransform()).inverse(),g=new DOMPoint(p,E).matrixTransform(f);this.realtime.updatePresenceMouse(Ct(_e({},this.localParticipant),{x:g.x,y:g.y,visible:!this.isPrivate}))};this.onParticipantsDidChange=i=>{this.logger.log("presence-mouse component @ on participants did change",i),Object.values(i).forEach(d=>{if(d.id!==this.localParticipant.id){if(this.following&&d.id!==this.following&&this.presences.has(d.id)){this.removePresenceMouseParticipant(d.id);return}this.presences.set(d.id,d)}}),this.following&&this.presences.get(this.following)&&this.goToMouse(this.following)};this.onMyParticipantMouseOut=i=>{let{x:d,y:c,width:p,height:E}=this.canvas.getBoundingClientRect();i.x>0&&i.y>0&&i.x<d+p&&i.y<c+E||this.realtime.updatePresenceMouse(_e({visible:!1},this.localParticipant))};this.onParticipantLeftOnRealtime=i=>{this.removePresenceMouseParticipant(i.id)};this.updateParticipantsMouses=()=>{this.presences.forEach(i=>{if(!(i!=null&&i.visible)){this.removePresenceMouseParticipant(i.id);return}this.renderPresenceMouses(i)})};this.renderPresenceMouses=i=>{let c=document.getElementById(`mouse-${i.id}`);c||(c=this.createMouseElement(i));let p=document.getElementById(`mouse-${i.id}`),E=document.getElementById(`mouse-${i.id}`);if(!p||!E)return;let u=p.getElementsByClassName("mouse-user-name")[0],f=E.getElementsByClassName("pointer-mouse")[0];f&&(f.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers/${i.slotIndex}.svg)`),u&&(u.style.color=this.textColorValues.includes(i.slotIndex)?"#FFFFFF":"#26242A",u.style.backgroundColor=i.color,u.innerHTML=i.name);let{x:g,y}=i,T=this.canvas.getContext("2d"),C=T==null?void 0:T.getTransform(),L=C==null?void 0:C.e,R=C==null?void 0:C.f,N=g+L,q=y+R,Z=this.divWrapper.clientWidth>N&&this.divWrapper.clientHeight>q&&i.visible;c.style.opacity=Z?"1":"0",c.style.left=`${N}px`,c.style.top=`${q}px`};this.followMouse=i=>{this.following=i};if(this.name="presence",this.logger=new ce(`@superviz/sdk/${"presence"}`),this.canvas=document.getElementById(i),this.presences=new Map,!this.canvas){let c=`Canvas with id ${i} not found`;throw this.logger.log(c),new Error(c)}this.divWrapper=this.renderDivWrapper(),this.animateFrame=requestAnimationFrame(this.animate),this.goToMouseCallback=d==null?void 0:d.onGoToPresence}get textColorValues(){return[2,4,5,7,8,16]}start(){this.logger.log("presence-mouse component @ start"),this.canvas.addEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.addEventListener("mouseout",this.onMyParticipantMouseOut),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.subscribeToRealtimeEvents(),this.realtime.enterPresenceMouseChannel(this.localParticipant)}destroy(){this.logger.log("presence-mouse component @ destroy"),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.realtime.leavePresenceMouseChannel(),this.unsubscribeFromRealtimeEvents(),cancelAnimationFrame(this.animateFrame),this.canvas.removeEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.removeEventListener("mouseout",this.onMyParticipantMouseOut),this.divWrapper.remove()}renderDivWrapper(){let i=this.canvas.getBoundingClientRect(),d=document.getElementById("superviz-presence-mouse-wrapper");return d||(d=document.createElement("div"),d.id="superviz-presence-mouse-wrapper",this.canvas.parentElement.style.position="relative",this.canvas.parentElement.appendChild(d)),d.style.position="fixed",d.style.top=`${i.top}px`,d.style.left=`${i.left}px`,d.style.width=`${i.width}px`,d.style.height=`${i.height}px`,d.style.pointerEvents="none",d.style.overflow="hidden",d.style.zIndex="2",d}removePresenceMouseParticipant(i){let d=document.getElementById(`mouse-${i}`);d&&(d.remove(),this.presences.delete(i))}createMouseElement(i){let d=document.createElement("div");d.setAttribute("id",`mouse-${i.id}`),d.setAttribute("class","mouse-follower");let c=document.createElement("div");c.setAttribute("class","pointer-mouse");let p=document.createElement("div");return p.setAttribute("class","mouse-user-name"),p.innerHTML=i.name,d.appendChild(c),d.appendChild(p),this.divWrapper.appendChild(d),d}};I();I();var Kr=class{constructor(a){this.observers=new Map;this.subscribe=(a,i)=>{this.logger.log("pubsub service @ subscribe",{event:a,callback:i}),this.observers.has(a)||this.observers.set(a,new se),this.observers.get(a).subscribe(i)};this.unsubscribe=(a,i)=>{this.logger.log("pubsub service @ unsubscribe",{event:a,callback:i}),this.observers.has(a)&&(this.observers.get(a).reset(),this.observers.delete(a))};this.publish=(a,i)=>{this.logger.log("pubsub service @ publish",{event:a,data:i}),this.realtime.setSyncProperty(a,i)};this.publishEventToClient=(a,i)=>{this.logger.log("pubsub service @ publishEventToClient",{event:a,data:i}),this.observers.has(a)&&this.observers.get(a).publish(i)};this.destroy=()=>{this.logger.log("pubsub service @ destroy"),this.realtime.syncPropertiesObserver.unsubscribe(this.onSyncPropertiesChange),this.observers.forEach(a=>a.destroy()),this.observers.clear()};this.onSyncPropertiesChange=a=>{this.logger.log("pubsub service @ onSyncPropertiesChange",{properties:a}),Object.entries(a).forEach(([i,d])=>{this.publishEventToClient(i,d)})};this.logger=new ce("@superviz/sdk/pubsub"),this.realtime=a,this.realtime.syncPropertiesObserver.subscribe(this.onSyncPropertiesChange),this.logger.log("PubSub created")}fetchHistory(a){return this.realtime.fetchSyncClientProperty(a)}};I();var ys=class extends je{constructor(){super();this.callbacksToSubscribeWhenJoined=[];this.state="STOPPED";this.publish=(i,d)=>{if(!this.pubsub){let c=`Realtime component is not started yet. You can't publish event ${i} before start`;this.logger.log(c);return}this.pubsub.publish(i,d)};this.subscribe=(i,d)=>{if(!this.pubsub){this.callbacksToSubscribeWhenJoined.push({event:i,callback:d});return}this.pubsub.subscribe(i,d)};this.unsubscribe=(i,d)=>{this.pubsub.unsubscribe(i,d)};this.name="realtime",this.logger=new ce("@superviz/sdk/realtime-component")}destroy(){this.logger.log("destroyed"),this.changeState("STOPPED"),this.pubsub.destroy()}start(){this.logger.log("started"),this.pubsub=new Kr(this.realtime),this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:d})=>{this.pubsub.subscribe(i,d)}),this.changeState("STARTED")}fetchHistory(i){return this.pubsub.fetchHistory(i)}changeState(i){this.logger.log("realtime component @ changeState - state changed",i),this.state=i,this.pubsub.publishEventToClient("realtime-component.state-changed",this.state)}};I();var tl=cn(Ur());I();var Ms=(c=>(c.TOP_LEFT="top-left",c.TOP_RIGHT="top-right",c.BOTTOM_LEFT="bottom-left",c.BOTTOM_RIGHT="bottom-right",c))(Ms||{});var Is=class extends je{constructor(i){super();this.participants=[];this.onParticipantListUpdate=i=>{let c=Object.values(i).filter(({data:p})=>{var E;return(E=p.activeComponents)==null?void 0:E.includes("whoIsOnline")}).filter(({data:{isPrivate:p,id:E}})=>!p||p&&E===this.localParticipant.id).map(({data:p})=>{let{slotIndex:E,id:u,name:f,avatar:g,activeComponents:y}=p,{color:T}=this.realtime.getSlotColor(E),C=this.localParticipant.id===u,L=y.some(R=>R.includes("presence"));return this.setLocalData(C,!L,T),{name:f,id:u,slotIndex:E,color:T,isLocal:C,joinedPresence:L,avatar:g}});(0,tl.isEqual)(c,this.participants)||(this.following&&(c.find(({id:E})=>E===this.following)||this.stopFollowing({clientId:this.following})),this.participants=c,this.element.updateParticipants(this.participants))};this.setLocalData=(i,d,c)=>{!i||(this.element.disableDropdown=d,this.element.localParticipantData={color:c,id:this.localParticipant.id})};this.goToMousePointer=({detail:i})=>{this.eventBus.publish("realtime.go-to-participant",i.id)};this.followMousePointer=({detail:i})=>{this.eventBus.publish("realtime.local-follow-participant",i.id),this.following=i.id};this.setPrivate=({detail:{isPrivate:i,id:d}})=>{this.eventBus.publish("realtime.private-mode",i),this.realtime.setPrivateWIOParticipant(d,i)};this.setFollow=i=>{var d;if(i.clientId!==this.localParticipant.id){if(this.followMousePointer({detail:{id:(d=i==null?void 0:i.data)==null?void 0:d.id}}),!i.data.id){this.element.following=void 0;return}this.following=i.data.id,this.element.following=i.data}};this.follow=i=>{var d;this.realtime.setFollowWIOParticipant(_e({},i.detail)),this.following=(d=i.detail)==null?void 0:d.id};this.stopFollowing=i=>{var d;i.clientId===((d=this.element.following)==null?void 0:d.id)&&(this.element.following=void 0,this.following=void 0,this.eventBus.publish("realtime.local-follow-participant",void 0))};this.gather=i=>{this.realtime.setGatherWIOParticipant(_e({},i.detail))};this.position=i!=null?i:"top-right",this.name="whoIsOnline",this.logger=new ce("@superviz/sdk/who-is-online-component")}start(){this.subscribeToRealtimeEvents(),this.positionWhoIsOnline(),this.addListeners(),this.realtime.enterWIOChannel(this.localParticipant)}destroy(){this.unsubscribeToRealtimeEvents(),this.realtime.leaveWIOChannel(),this.removeListeners(),this.element.remove(),this.element=null,this.participants=null}addListeners(){this.element.addEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.addEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.addEventListener("realtime.private-mode",this.setPrivate),this.element.addEventListener("realtime.follow-participant",this.follow),this.element.addEventListener("realtime.gather",this.gather)}removeListeners(){this.element.removeEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.removeEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.removeEventListener("realtime.private-mode",this.setPrivate),this.element.removeEventListener("realtime.follow-participant",this.follow),this.element.removeEventListener("realtime.gather",this.gather)}subscribeToRealtimeEvents(){this.realtime.participantsObserver.subscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.subscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.subscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.subscribe(this.setFollow),this.realtime.gatherWIOObserver.subscribe(this.goToMousePointer)}unsubscribeToRealtimeEvents(){this.realtime.participantsObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.unsubscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.unsubscribe(this.setFollow),this.realtime.gatherWIOObserver.unsubscribe(this.goToMousePointer)}positionWhoIsOnline(){if(this.element=document.createElement("superviz-who-is-online"),Object.values(Ms).includes(this.position.toLowerCase())){document.body.appendChild(this.element);let[c,p]=this.position.split("-");this.element.position=`${c}: 20px; ${p}: 40px;`;return}let d=document.getElementById(this.position);if(!d){this.element.position="top: 20px; right: 40px;",document.body.appendChild(this.element);return}d.appendChild(this.element),this.element.position="position: relative;"}};export{As as CanvasPin,Es as Comments,Os as MousePointers,ys as Realtime,ws as VideoConference,Is as WhoIsOnline};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
