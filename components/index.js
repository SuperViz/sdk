var qm=Object.create;var ps=Object.defineProperty,Jm=Object.defineProperties,Ym=Object.getOwnPropertyDescriptor,Zm=Object.getOwnPropertyDescriptors,Xm=Object.getOwnPropertyNames,cu=Object.getOwnPropertySymbols,Qm=Object.getPrototypeOf,hu=Object.prototype.hasOwnProperty,jm=Object.prototype.propertyIsEnumerable;var fu=(a,s,i)=>s in a?ps(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i,pe=(a,s)=>{for(var i in s||(s={}))hu.call(s,i)&&fu(a,i,s[i]);if(cu)for(var i of cu(s))jm.call(s,i)&&fu(a,i,s[i]);return a},ut=(a,s)=>Jm(a,Zm(s));var ev=(a,s)=>()=>(a&&(s=a(a=0)),s);var _e=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports);var tv=(a,s,i,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let u of Xm(s))!hu.call(a,u)&&u!==i&&ps(a,u,{get:()=>s[u],enumerable:!(c=Ym(s,u))||c.enumerable});return a};var Jt=(a,s,i)=>(i=a!=null?qm(Qm(a)):{},tv(s||!a||!a.__esModule?ps(i,"default",{value:a,enumerable:!0}):i,a));var ae=(a,s,i)=>new Promise((c,u)=>{var p=h=>{try{l(i.next(h))}catch(g){u(g)}},b=h=>{try{l(i.throw(h))}catch(g){u(g)}},l=h=>h.done?c(h.value):Promise.resolve(h.value).then(p,b);l((i=i.apply(a,s)).next())});var D,I=ev(()=>{D={}});var pu=_e((mb,du)=>{I();var hn=1e3,dn=hn*60,pn=dn*60,Yt=pn*24,iv=Yt*7,rv=Yt*365.25;du.exports=function(a,s){s=s||{};var i=typeof a;if(i==="string"&&a.length>0)return sv(a);if(i==="number"&&isFinite(a))return s.long?av(a):ov(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function sv(a){if(a=String(a),!(a.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!!s){var i=parseFloat(s[1]),c=(s[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return i*rv;case"weeks":case"week":case"w":return i*iv;case"days":case"day":case"d":return i*Yt;case"hours":case"hour":case"hrs":case"hr":case"h":return i*pn;case"minutes":case"minute":case"mins":case"min":case"m":return i*dn;case"seconds":case"second":case"secs":case"sec":case"s":return i*hn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function ov(a){var s=Math.abs(a);return s>=Yt?Math.round(a/Yt)+"d":s>=pn?Math.round(a/pn)+"h":s>=dn?Math.round(a/dn)+"m":s>=hn?Math.round(a/hn)+"s":a+"ms"}function av(a){var s=Math.abs(a);return s>=Yt?Wi(a,s,Yt,"day"):s>=pn?Wi(a,s,pn,"hour"):s>=dn?Wi(a,s,dn,"minute"):s>=hn?Wi(a,s,hn,"second"):a+" ms"}function Wi(a,s,i,c){var u=s>=i*1.5;return Math.round(a/i)+" "+c+(u?"s":"")}});var mu=_e((vb,gu)=>{I();function uv(a){i.debug=i,i.default=i,i.coerce=h,i.disable=p,i.enable=u,i.enabled=b,i.humanize=pu(),i.destroy=g,Object.keys(a).forEach(O=>{i[O]=a[O]}),i.names=[],i.skips=[],i.formatters={};function s(O){let T=0;for(let P=0;P<O.length;P++)T=(T<<5)-T+O.charCodeAt(P),T|=0;return i.colors[Math.abs(T)%i.colors.length]}i.selectColor=s;function i(O){let T,P=null,L,R;function N(...$){if(!N.enabled)return;let J=N,ce=Number(new Date),fe=ce-(T||ce);J.diff=fe,J.prev=T,J.curr=ce,T=ce,$[0]=i.coerce($[0]),typeof $[0]!="string"&&$.unshift("%O");let ge=0;$[0]=$[0].replace(/%([a-zA-Z%])/g,(U,me)=>{if(U==="%%")return"%";ge++;let Te=i.formatters[me];if(typeof Te=="function"){let ue=$[ge];U=Te.call(J,ue),$.splice(ge,1),ge--}return U}),i.formatArgs.call(J,$),(J.log||i.log).apply(J,$)}return N.namespace=O,N.useColors=i.useColors(),N.color=i.selectColor(O),N.extend=c,N.destroy=i.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>P!==null?P:(L!==i.namespaces&&(L=i.namespaces,R=i.enabled(O)),R),set:$=>{P=$}}),typeof i.init=="function"&&i.init(N),N}function c(O,T){let P=i(this.namespace+(typeof T=="undefined"?":":T)+O);return P.log=this.log,P}function u(O){i.save(O),i.namespaces=O,i.names=[],i.skips=[];let T,P=(typeof O=="string"?O:"").split(/[\s,]+/),L=P.length;for(T=0;T<L;T++)!P[T]||(O=P[T].replace(/\*/g,".*?"),O[0]==="-"?i.skips.push(new RegExp("^"+O.slice(1)+"$")):i.names.push(new RegExp("^"+O+"$")))}function p(){let O=[...i.names.map(l),...i.skips.map(l).map(T=>"-"+T)].join(",");return i.enable(""),O}function b(O){if(O[O.length-1]==="*")return!0;let T,P;for(T=0,P=i.skips.length;T<P;T++)if(i.skips[T].test(O))return!1;for(T=0,P=i.names.length;T<P;T++)if(i.names[T].test(O))return!0;return!1}function l(O){return O.toString().substring(2,O.toString().length-2).replace(/\.\*\?$/,"*")}function h(O){return O instanceof Error?O.stack||O.message:O}function g(){}return i.enable(i.load()),i}gu.exports=uv});var vu=_e(($e,Gi)=>{I();$e.formatArgs=cv;$e.save=fv;$e.load=hv;$e.useColors=lv;$e.storage=dv();$e.destroy=(()=>{let a=!1;return()=>{a||(a=!0)}})();$e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function lv(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cv(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+Gi.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;a.splice(1,0,s,"color: inherit");let i=0,c=0;a[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(i++,u==="%c"&&(c=i))}),a.splice(c,0,s)}$e.log=console.debug||console.log||(()=>{});function fv(a){try{a?$e.storage.setItem("debug",a):$e.storage.removeItem("debug")}catch(s){}}function hv(){let a;try{a=$e.storage.getItem("debug")}catch(s){}return!a&&typeof process!="undefined"&&"env"in process&&(a=D.DEBUG),a}function dv(){try{return localStorage}catch(a){}}Gi.exports=mu()($e);var{formatters:pv}=Gi.exports;pv.j=function(a){try{return JSON.stringify(a)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}});var Ui=_e((_b,_u)=>{I();function gv(a){var s=typeof a;return a!=null&&(s=="object"||s=="function")}_u.exports=gv});var Au=_e((Eb,Eu)=>{I();var mv=typeof global=="object"&&global&&global.Object===Object&&global;Eu.exports=mv});var gs=_e((Ab,Tu)=>{I();var vv=Au(),bv=typeof self=="object"&&self&&self.Object===Object&&self,_v=vv||bv||Function("return this")();Tu.exports=_v});var yu=_e((Tb,Pu)=>{I();var Ev=gs(),Av=function(){return Ev.Date.now()};Pu.exports=Av});var wu=_e((Pb,Cu)=>{I();var Tv=/\s/;function Pv(a){for(var s=a.length;s--&&Tv.test(a.charAt(s)););return s}Cu.exports=Pv});var Mu=_e((yb,Ou)=>{I();var yv=wu(),Cv=/^\s+/;function wv(a){return a&&a.slice(0,yv(a)+1).replace(Cv,"")}Ou.exports=wv});var ms=_e((Cb,Iu)=>{I();var Ov=gs(),Mv=Ov.Symbol;Iu.exports=Mv});var xu=_e((wb,Ru)=>{I();var Lu=ms(),Su=Object.prototype,Iv=Su.hasOwnProperty,Lv=Su.toString,Wn=Lu?Lu.toStringTag:void 0;function Sv(a){var s=Iv.call(a,Wn),i=a[Wn];try{a[Wn]=void 0;var c=!0}catch(p){}var u=Lv.call(a);return c&&(s?a[Wn]=i:delete a[Wn]),u}Ru.exports=Sv});var Nu=_e((Ob,Fu)=>{I();var Rv=Object.prototype,xv=Rv.toString;function Fv(a){return xv.call(a)}Fu.exports=Fv});var Gu=_e((Mb,Wu)=>{I();var Du=ms(),Nv=xu(),Dv=Nu(),Bv="[object Null]",Wv="[object Undefined]",Bu=Du?Du.toStringTag:void 0;function Gv(a){return a==null?a===void 0?Wv:Bv:Bu&&Bu in Object(a)?Nv(a):Dv(a)}Wu.exports=Gv});var ku=_e((Ib,Uu)=>{I();function Uv(a){return a!=null&&typeof a=="object"}Uu.exports=Uv});var zu=_e((Lb,Hu)=>{I();var kv=Gu(),Hv=ku(),zv="[object Symbol]";function $v(a){return typeof a=="symbol"||Hv(a)&&kv(a)==zv}Hu.exports=$v});var qu=_e((Sb,Ku)=>{I();var Vv=Mu(),$u=Ui(),Kv=zu(),Vu=0/0,qv=/^[-+]0x[0-9a-f]+$/i,Jv=/^0b[01]+$/i,Yv=/^0o[0-7]+$/i,Zv=parseInt;function Xv(a){if(typeof a=="number")return a;if(Kv(a))return Vu;if($u(a)){var s=typeof a.valueOf=="function"?a.valueOf():a;a=$u(s)?s+"":s}if(typeof a!="string")return a===0?a:+a;a=Vv(a);var i=Jv.test(a);return i||Yv.test(a)?Zv(a.slice(2),i?2:8):qv.test(a)?Vu:+a}Ku.exports=Xv});var Zu=_e((Rb,Yu)=>{I();var Qv=Ui(),vs=yu(),Ju=qu(),jv="Expected a function",eb=Math.max,tb=Math.min;function nb(a,s,i){var c,u,p,b,l,h,g=0,O=!1,T=!1,P=!0;if(typeof a!="function")throw new TypeError(jv);s=Ju(s)||0,Qv(i)&&(O=!!i.leading,T="maxWait"in i,p=T?eb(Ju(i.maxWait)||0,s):p,P="trailing"in i?!!i.trailing:P);function L(U){var me=c,Te=u;return c=u=void 0,g=U,b=a.apply(Te,me),b}function R(U){return g=U,l=setTimeout(J,s),O?L(U):b}function N(U){var me=U-h,Te=U-g,ue=s-me;return T?tb(ue,p-Te):ue}function $(U){var me=U-h,Te=U-g;return h===void 0||me>=s||me<0||T&&Te>=p}function J(){var U=vs();if($(U))return ce(U);l=setTimeout(J,N(U))}function ce(U){return l=void 0,P&&c?L(U):(c=u=void 0,b)}function fe(){l!==void 0&&clearTimeout(l),g=0,c=h=u=l=void 0}function ge(){return l===void 0?b:ce(vs())}function he(){var U=vs(),me=$(U);if(c=arguments,u=this,h=U,me){if(l===void 0)return R(h);if(T)return clearTimeout(l),l=setTimeout(J,s),L(h)}return l===void 0&&(l=setTimeout(J,s)),b}return he.cancel=fe,he.flush=ge,he}Yu.exports=nb});var Qu=_e((xb,Xu)=>{I();var ib=Zu(),rb=Ui(),sb="Expected a function";function ob(a,s,i){var c=!0,u=!0;if(typeof a!="function")throw new TypeError(sb);return rb(i)&&(c="leading"in i?!!i.leading:c,u="trailing"in i?!!i.trailing:u),ib(a,s,{leading:c,maxWait:s,trailing:u})}Xu.exports=ob});var kn=_e((gn,Un)=>{I();(function(){var a,s="4.17.21",i=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",p="Invalid `variable` option passed into `_.template`",b="__lodash_hash_undefined__",l=500,h="__lodash_placeholder__",g=1,O=2,T=4,P=1,L=2,R=1,N=2,$=4,J=8,ce=16,fe=32,ge=64,he=128,U=256,me=512,Te=30,ue="...",Re=800,Nt=16,yt=1,Dt=2,Bt=3,lt=1/0,tt=9007199254740991,$n=17976931348623157e292,Wt=0/0,Be=4294967295,Vn=Be-1,sl=Be>>>1,ol=[["ary",he],["bind",R],["bindKey",N],["curry",J],["curryRight",ce],["flip",me],["partial",fe],["partialRight",ge],["rearg",U]],Zt="[object Arguments]",Kn="[object Array]",al="[object AsyncFunction]",mn="[object Boolean]",vn="[object Date]",ul="[object DOMException]",qn="[object Error]",Jn="[object Function]",Rs="[object GeneratorFunction]",nt="[object Map]",bn="[object Number]",ll="[object Null]",pt="[object Object]",xs="[object Promise]",cl="[object Proxy]",_n="[object RegExp]",it="[object Set]",En="[object String]",Yn="[object Symbol]",fl="[object Undefined]",An="[object WeakMap]",hl="[object WeakSet]",Tn="[object ArrayBuffer]",Xt="[object DataView]",qi="[object Float32Array]",Ji="[object Float64Array]",Yi="[object Int8Array]",Zi="[object Int16Array]",Xi="[object Int32Array]",Qi="[object Uint8Array]",ji="[object Uint8ClampedArray]",er="[object Uint16Array]",tr="[object Uint32Array]",dl=/\b__p \+= '';/g,pl=/\b(__p \+=) '' \+/g,gl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fs=/&(?:amp|lt|gt|quot|#39);/g,Ns=/[&<>"']/g,ml=RegExp(Fs.source),vl=RegExp(Ns.source),bl=/<%-([\s\S]+?)%>/g,_l=/<%([\s\S]+?)%>/g,Ds=/<%=([\s\S]+?)%>/g,El=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Al=/^\w*$/,Tl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nr=/[\\^$.*+?()[\]{}|]/g,Pl=RegExp(nr.source),ir=/^\s+/,yl=/\s/,Cl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wl=/\{\n\/\* \[wrapped with (.+)\] \*/,Ol=/,? & /,Ml=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Il=/[()=,{}\[\]\/\s]/,Ll=/\\(\\)?/g,Sl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bs=/\w*$/,Rl=/^[-+]0x[0-9a-f]+$/i,xl=/^0b[01]+$/i,Fl=/^\[object .+?Constructor\]$/,Nl=/^0o[0-7]+$/i,Dl=/^(?:0|[1-9]\d*)$/,Bl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zn=/($^)/,Wl=/['\n\r\u2028\u2029\\]/g,Xn="\\ud800-\\udfff",Gl="\\u0300-\\u036f",Ul="\\ufe20-\\ufe2f",kl="\\u20d0-\\u20ff",Ws=Gl+Ul+kl,Gs="\\u2700-\\u27bf",Us="a-z\\xdf-\\xf6\\xf8-\\xff",Hl="\\xac\\xb1\\xd7\\xf7",zl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$l="\\u2000-\\u206f",Vl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ks="A-Z\\xc0-\\xd6\\xd8-\\xde",Hs="\\ufe0e\\ufe0f",zs=Hl+zl+$l+Vl,rr="['\u2019]",Kl="["+Xn+"]",$s="["+zs+"]",Qn="["+Ws+"]",Vs="\\d+",ql="["+Gs+"]",Ks="["+Us+"]",qs="[^"+Xn+zs+Vs+Gs+Us+ks+"]",sr="\\ud83c[\\udffb-\\udfff]",Jl="(?:"+Qn+"|"+sr+")",Js="[^"+Xn+"]",or="(?:\\ud83c[\\udde6-\\uddff]){2}",ar="[\\ud800-\\udbff][\\udc00-\\udfff]",Qt="["+ks+"]",Ys="\\u200d",Zs="(?:"+Ks+"|"+qs+")",Yl="(?:"+Qt+"|"+qs+")",Xs="(?:"+rr+"(?:d|ll|m|re|s|t|ve))?",Qs="(?:"+rr+"(?:D|LL|M|RE|S|T|VE))?",js=Jl+"?",eo="["+Hs+"]?",Zl="(?:"+Ys+"(?:"+[Js,or,ar].join("|")+")"+eo+js+")*",Xl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ql="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",to=eo+js+Zl,jl="(?:"+[ql,or,ar].join("|")+")"+to,ec="(?:"+[Js+Qn+"?",Qn,or,ar,Kl].join("|")+")",tc=RegExp(rr,"g"),nc=RegExp(Qn,"g"),ur=RegExp(sr+"(?="+sr+")|"+ec+to,"g"),ic=RegExp([Qt+"?"+Ks+"+"+Xs+"(?="+[$s,Qt,"$"].join("|")+")",Yl+"+"+Qs+"(?="+[$s,Qt+Zs,"$"].join("|")+")",Qt+"?"+Zs+"+"+Xs,Qt+"+"+Qs,Ql,Xl,Vs,jl].join("|"),"g"),rc=RegExp("["+Ys+Xn+Ws+Hs+"]"),sc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ac=-1,re={};re[qi]=re[Ji]=re[Yi]=re[Zi]=re[Xi]=re[Qi]=re[ji]=re[er]=re[tr]=!0,re[Zt]=re[Kn]=re[Tn]=re[mn]=re[Xt]=re[vn]=re[qn]=re[Jn]=re[nt]=re[bn]=re[pt]=re[_n]=re[it]=re[En]=re[An]=!1;var ie={};ie[Zt]=ie[Kn]=ie[Tn]=ie[Xt]=ie[mn]=ie[vn]=ie[qi]=ie[Ji]=ie[Yi]=ie[Zi]=ie[Xi]=ie[nt]=ie[bn]=ie[pt]=ie[_n]=ie[it]=ie[En]=ie[Yn]=ie[Qi]=ie[ji]=ie[er]=ie[tr]=!0,ie[qn]=ie[Jn]=ie[An]=!1;var uc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hc=parseFloat,dc=parseInt,no=typeof global=="object"&&global&&global.Object===Object&&global,pc=typeof self=="object"&&self&&self.Object===Object&&self,Pe=no||pc||Function("return this")(),lr=typeof gn=="object"&&gn&&!gn.nodeType&&gn,Gt=lr&&typeof Un=="object"&&Un&&!Un.nodeType&&Un,io=Gt&&Gt.exports===lr,cr=io&&no.process,Ve=function(){try{var _=Gt&&Gt.require&&Gt.require("util").types;return _||cr&&cr.binding&&cr.binding("util")}catch(y){}}(),ro=Ve&&Ve.isArrayBuffer,so=Ve&&Ve.isDate,oo=Ve&&Ve.isMap,ao=Ve&&Ve.isRegExp,uo=Ve&&Ve.isSet,lo=Ve&&Ve.isTypedArray;function We(_,y,A){switch(A.length){case 0:return _.call(y);case 1:return _.call(y,A[0]);case 2:return _.call(y,A[0],A[1]);case 3:return _.call(y,A[0],A[1],A[2])}return _.apply(y,A)}function gc(_,y,A,x){for(var k=-1,Q=_==null?0:_.length;++k<Q;){var Ee=_[k];y(x,Ee,A(Ee),_)}return x}function Ke(_,y){for(var A=-1,x=_==null?0:_.length;++A<x&&y(_[A],A,_)!==!1;);return _}function mc(_,y){for(var A=_==null?0:_.length;A--&&y(_[A],A,_)!==!1;);return _}function co(_,y){for(var A=-1,x=_==null?0:_.length;++A<x;)if(!y(_[A],A,_))return!1;return!0}function Ct(_,y){for(var A=-1,x=_==null?0:_.length,k=0,Q=[];++A<x;){var Ee=_[A];y(Ee,A,_)&&(Q[k++]=Ee)}return Q}function jn(_,y){var A=_==null?0:_.length;return!!A&&jt(_,y,0)>-1}function fr(_,y,A){for(var x=-1,k=_==null?0:_.length;++x<k;)if(A(y,_[x]))return!0;return!1}function oe(_,y){for(var A=-1,x=_==null?0:_.length,k=Array(x);++A<x;)k[A]=y(_[A],A,_);return k}function wt(_,y){for(var A=-1,x=y.length,k=_.length;++A<x;)_[k+A]=y[A];return _}function hr(_,y,A,x){var k=-1,Q=_==null?0:_.length;for(x&&Q&&(A=_[++k]);++k<Q;)A=y(A,_[k],k,_);return A}function vc(_,y,A,x){var k=_==null?0:_.length;for(x&&k&&(A=_[--k]);k--;)A=y(A,_[k],k,_);return A}function dr(_,y){for(var A=-1,x=_==null?0:_.length;++A<x;)if(y(_[A],A,_))return!0;return!1}var bc=pr("length");function _c(_){return _.split("")}function Ec(_){return _.match(Ml)||[]}function fo(_,y,A){var x;return A(_,function(k,Q,Ee){if(y(k,Q,Ee))return x=Q,!1}),x}function ei(_,y,A,x){for(var k=_.length,Q=A+(x?1:-1);x?Q--:++Q<k;)if(y(_[Q],Q,_))return Q;return-1}function jt(_,y,A){return y===y?Rc(_,y,A):ei(_,ho,A)}function Ac(_,y,A,x){for(var k=A-1,Q=_.length;++k<Q;)if(x(_[k],y))return k;return-1}function ho(_){return _!==_}function po(_,y){var A=_==null?0:_.length;return A?mr(_,y)/A:Wt}function pr(_){return function(y){return y==null?a:y[_]}}function gr(_){return function(y){return _==null?a:_[y]}}function go(_,y,A,x,k){return k(_,function(Q,Ee,te){A=x?(x=!1,Q):y(A,Q,Ee,te)}),A}function Tc(_,y){var A=_.length;for(_.sort(y);A--;)_[A]=_[A].value;return _}function mr(_,y){for(var A,x=-1,k=_.length;++x<k;){var Q=y(_[x]);Q!==a&&(A=A===a?Q:A+Q)}return A}function vr(_,y){for(var A=-1,x=Array(_);++A<_;)x[A]=y(A);return x}function Pc(_,y){return oe(y,function(A){return[A,_[A]]})}function mo(_){return _&&_.slice(0,Eo(_)+1).replace(ir,"")}function Ge(_){return function(y){return _(y)}}function br(_,y){return oe(y,function(A){return _[A]})}function Pn(_,y){return _.has(y)}function vo(_,y){for(var A=-1,x=_.length;++A<x&&jt(y,_[A],0)>-1;);return A}function bo(_,y){for(var A=_.length;A--&&jt(y,_[A],0)>-1;);return A}function yc(_,y){for(var A=_.length,x=0;A--;)_[A]===y&&++x;return x}var Cc=gr(uc),wc=gr(lc);function Oc(_){return"\\"+fc[_]}function Mc(_,y){return _==null?a:_[y]}function en(_){return rc.test(_)}function Ic(_){return sc.test(_)}function Lc(_){for(var y,A=[];!(y=_.next()).done;)A.push(y.value);return A}function _r(_){var y=-1,A=Array(_.size);return _.forEach(function(x,k){A[++y]=[k,x]}),A}function _o(_,y){return function(A){return _(y(A))}}function Ot(_,y){for(var A=-1,x=_.length,k=0,Q=[];++A<x;){var Ee=_[A];(Ee===y||Ee===h)&&(_[A]=h,Q[k++]=A)}return Q}function ti(_){var y=-1,A=Array(_.size);return _.forEach(function(x){A[++y]=x}),A}function Sc(_){var y=-1,A=Array(_.size);return _.forEach(function(x){A[++y]=[x,x]}),A}function Rc(_,y,A){for(var x=A-1,k=_.length;++x<k;)if(_[x]===y)return x;return-1}function xc(_,y,A){for(var x=A+1;x--;)if(_[x]===y)return x;return x}function tn(_){return en(_)?Nc(_):bc(_)}function rt(_){return en(_)?Dc(_):_c(_)}function Eo(_){for(var y=_.length;y--&&yl.test(_.charAt(y)););return y}var Fc=gr(cc);function Nc(_){for(var y=ur.lastIndex=0;ur.test(_);)++y;return y}function Dc(_){return _.match(ur)||[]}function Bc(_){return _.match(ic)||[]}var Wc=function _(y){y=y==null?Pe:Mt.defaults(Pe.Object(),y,Mt.pick(Pe,oc));var A=y.Array,x=y.Date,k=y.Error,Q=y.Function,Ee=y.Math,te=y.Object,Er=y.RegExp,Gc=y.String,qe=y.TypeError,ni=A.prototype,Uc=Q.prototype,nn=te.prototype,ii=y["__core-js_shared__"],ri=Uc.toString,ee=nn.hasOwnProperty,kc=0,Ao=function(){var e=/[^.]+$/.exec(ii&&ii.keys&&ii.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),si=nn.toString,Hc=ri.call(te),zc=Pe._,$c=Er("^"+ri.call(ee).replace(nr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oi=io?y.Buffer:a,It=y.Symbol,ai=y.Uint8Array,To=oi?oi.allocUnsafe:a,ui=_o(te.getPrototypeOf,te),Po=te.create,yo=nn.propertyIsEnumerable,li=ni.splice,Co=It?It.isConcatSpreadable:a,yn=It?It.iterator:a,Ut=It?It.toStringTag:a,ci=function(){try{var e=Vt(te,"defineProperty");return e({},"",{}),e}catch(t){}}(),Vc=y.clearTimeout!==Pe.clearTimeout&&y.clearTimeout,Kc=x&&x.now!==Pe.Date.now&&x.now,qc=y.setTimeout!==Pe.setTimeout&&y.setTimeout,fi=Ee.ceil,hi=Ee.floor,Ar=te.getOwnPropertySymbols,Jc=oi?oi.isBuffer:a,wo=y.isFinite,Yc=ni.join,Zc=_o(te.keys,te),Ae=Ee.max,we=Ee.min,Xc=x.now,Qc=y.parseInt,Oo=Ee.random,jc=ni.reverse,Tr=Vt(y,"DataView"),Cn=Vt(y,"Map"),Pr=Vt(y,"Promise"),rn=Vt(y,"Set"),wn=Vt(y,"WeakMap"),On=Vt(te,"create"),di=wn&&new wn,sn={},ef=Kt(Tr),tf=Kt(Cn),nf=Kt(Pr),rf=Kt(rn),sf=Kt(wn),pi=It?It.prototype:a,Mn=pi?pi.valueOf:a,Mo=pi?pi.toString:a;function f(e){if(de(e)&&!H(e)&&!(e instanceof Z)){if(e instanceof Je)return e;if(ee.call(e,"__wrapped__"))return Ia(e)}return new Je(e)}var on=function(){function e(){}return function(t){if(!le(t))return{};if(Po)return Po(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function gi(){}function Je(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}f.templateSettings={escape:bl,evaluate:_l,interpolate:Ds,variable:"",imports:{_:f}},f.prototype=gi.prototype,f.prototype.constructor=f,Je.prototype=on(gi.prototype),Je.prototype.constructor=Je;function Z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Be,this.__views__=[]}function of(){var e=new Z(this.__wrapped__);return e.__actions__=xe(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=xe(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=xe(this.__views__),e}function af(){if(this.__filtered__){var e=new Z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function uf(){var e=this.__wrapped__.value(),t=this.__dir__,n=H(e),r=t<0,o=n?e.length:0,d=Eh(0,o,this.__views__),m=d.start,v=d.end,E=v-m,C=r?v:m-1,w=this.__iteratees__,M=w.length,S=0,F=we(E,this.__takeCount__);if(!n||!r&&o==E&&F==E)return Qo(e,this.__actions__);var W=[];e:for(;E--&&S<F;){C+=t;for(var V=-1,G=e[C];++V<M;){var Y=w[V],X=Y.iteratee,He=Y.type,Le=X(G);if(He==Dt)G=Le;else if(!Le){if(He==yt)continue e;break e}}W[S++]=G}return W}Z.prototype=on(gi.prototype),Z.prototype.constructor=Z;function kt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function lf(){this.__data__=On?On(null):{},this.size=0}function cf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function ff(e){var t=this.__data__;if(On){var n=t[e];return n===b?a:n}return ee.call(t,e)?t[e]:a}function hf(e){var t=this.__data__;return On?t[e]!==a:ee.call(t,e)}function df(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=On&&t===a?b:t,this}kt.prototype.clear=lf,kt.prototype.delete=cf,kt.prototype.get=ff,kt.prototype.has=hf,kt.prototype.set=df;function gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pf(){this.__data__=[],this.size=0}function gf(e){var t=this.__data__,n=mi(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():li.call(t,n,1),--this.size,!0}function mf(e){var t=this.__data__,n=mi(t,e);return n<0?a:t[n][1]}function vf(e){return mi(this.__data__,e)>-1}function bf(e,t){var n=this.__data__,r=mi(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}gt.prototype.clear=pf,gt.prototype.delete=gf,gt.prototype.get=mf,gt.prototype.has=vf,gt.prototype.set=bf;function mt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _f(){this.size=0,this.__data__={hash:new kt,map:new(Cn||gt),string:new kt}}function Ef(e){var t=Mi(this,e).delete(e);return this.size-=t?1:0,t}function Af(e){return Mi(this,e).get(e)}function Tf(e){return Mi(this,e).has(e)}function Pf(e,t){var n=Mi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}mt.prototype.clear=_f,mt.prototype.delete=Ef,mt.prototype.get=Af,mt.prototype.has=Tf,mt.prototype.set=Pf;function Ht(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new mt;++t<n;)this.add(e[t])}function yf(e){return this.__data__.set(e,b),this}function Cf(e){return this.__data__.has(e)}Ht.prototype.add=Ht.prototype.push=yf,Ht.prototype.has=Cf;function st(e){var t=this.__data__=new gt(e);this.size=t.size}function wf(){this.__data__=new gt,this.size=0}function Of(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Mf(e){return this.__data__.get(e)}function If(e){return this.__data__.has(e)}function Lf(e,t){var n=this.__data__;if(n instanceof gt){var r=n.__data__;if(!Cn||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new mt(r)}return n.set(e,t),this.size=n.size,this}st.prototype.clear=wf,st.prototype.delete=Of,st.prototype.get=Mf,st.prototype.has=If,st.prototype.set=Lf;function Io(e,t){var n=H(e),r=!n&&qt(e),o=!n&&!r&&Ft(e),d=!n&&!r&&!o&&cn(e),m=n||r||o||d,v=m?vr(e.length,Gc):[],E=v.length;for(var C in e)(t||ee.call(e,C))&&!(m&&(C=="length"||o&&(C=="offset"||C=="parent")||d&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||Et(C,E)))&&v.push(C);return v}function Lo(e){var t=e.length;return t?e[Fr(0,t-1)]:a}function Sf(e,t){return Ii(xe(e),zt(t,0,e.length))}function Rf(e){return Ii(xe(e))}function yr(e,t,n){(n!==a&&!ot(e[t],n)||n===a&&!(t in e))&&vt(e,t,n)}function In(e,t,n){var r=e[t];(!(ee.call(e,t)&&ot(r,n))||n===a&&!(t in e))&&vt(e,t,n)}function mi(e,t){for(var n=e.length;n--;)if(ot(e[n][0],t))return n;return-1}function xf(e,t,n,r){return Lt(e,function(o,d,m){t(r,o,n(o),m)}),r}function So(e,t){return e&&ft(t,ye(t),e)}function Ff(e,t){return e&&ft(t,Ne(t),e)}function vt(e,t,n){t=="__proto__"&&ci?ci(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Cr(e,t){for(var n=-1,r=t.length,o=A(r),d=e==null;++n<r;)o[n]=d?a:ss(e,t[n]);return o}function zt(e,t,n){return e===e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function Ye(e,t,n,r,o,d){var m,v=t&g,E=t&O,C=t&T;if(n&&(m=o?n(e,r,o,d):n(e)),m!==a)return m;if(!le(e))return e;var w=H(e);if(w){if(m=Th(e),!v)return xe(e,m)}else{var M=Oe(e),S=M==Jn||M==Rs;if(Ft(e))return ta(e,v);if(M==pt||M==Zt||S&&!o){if(m=E||S?{}:Ea(e),!v)return E?fh(e,Ff(m,e)):ch(e,So(m,e))}else{if(!ie[M])return o?e:{};m=Ph(e,M,v)}}d||(d=new st);var F=d.get(e);if(F)return F;d.set(e,m),Ya(e)?e.forEach(function(G){m.add(Ye(G,t,n,G,e,d))}):qa(e)&&e.forEach(function(G,Y){m.set(Y,Ye(G,t,n,Y,e,d))});var W=C?E?Vr:$r:E?Ne:ye,V=w?a:W(e);return Ke(V||e,function(G,Y){V&&(Y=G,G=e[Y]),In(m,Y,Ye(G,t,n,Y,e,d))}),m}function Nf(e){var t=ye(e);return function(n){return Ro(n,e,t)}}function Ro(e,t,n){var r=n.length;if(e==null)return!r;for(e=te(e);r--;){var o=n[r],d=t[o],m=e[o];if(m===a&&!(o in e)||!d(m))return!1}return!0}function xo(e,t,n){if(typeof e!="function")throw new qe(u);return Dn(function(){e.apply(a,n)},t)}function Ln(e,t,n,r){var o=-1,d=jn,m=!0,v=e.length,E=[],C=t.length;if(!v)return E;n&&(t=oe(t,Ge(n))),r?(d=fr,m=!1):t.length>=i&&(d=Pn,m=!1,t=new Ht(t));e:for(;++o<v;){var w=e[o],M=n==null?w:n(w);if(w=r||w!==0?w:0,m&&M===M){for(var S=C;S--;)if(t[S]===M)continue e;E.push(w)}else d(t,M,r)||E.push(w)}return E}var Lt=oa(ct),Fo=oa(Or,!0);function Df(e,t){var n=!0;return Lt(e,function(r,o,d){return n=!!t(r,o,d),n}),n}function vi(e,t,n){for(var r=-1,o=e.length;++r<o;){var d=e[r],m=t(d);if(m!=null&&(v===a?m===m&&!ke(m):n(m,v)))var v=m,E=d}return E}function Bf(e,t,n,r){var o=e.length;for(n=z(n),n<0&&(n=-n>o?0:o+n),r=r===a||r>o?o:z(r),r<0&&(r+=o),r=n>r?0:Xa(r);n<r;)e[n++]=t;return e}function No(e,t){var n=[];return Lt(e,function(r,o,d){t(r,o,d)&&n.push(r)}),n}function Ce(e,t,n,r,o){var d=-1,m=e.length;for(n||(n=Ch),o||(o=[]);++d<m;){var v=e[d];t>0&&n(v)?t>1?Ce(v,t-1,n,r,o):wt(o,v):r||(o[o.length]=v)}return o}var wr=aa(),Do=aa(!0);function ct(e,t){return e&&wr(e,t,ye)}function Or(e,t){return e&&Do(e,t,ye)}function bi(e,t){return Ct(t,function(n){return At(e[n])})}function $t(e,t){t=Rt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ht(t[n++])];return n&&n==r?e:a}function Bo(e,t,n){var r=t(e);return H(e)?r:wt(r,n(e))}function Me(e){return e==null?e===a?fl:ll:Ut&&Ut in te(e)?_h(e):Rh(e)}function Mr(e,t){return e>t}function Wf(e,t){return e!=null&&ee.call(e,t)}function Gf(e,t){return e!=null&&t in te(e)}function Uf(e,t,n){return e>=we(t,n)&&e<Ae(t,n)}function Ir(e,t,n){for(var r=n?fr:jn,o=e[0].length,d=e.length,m=d,v=A(d),E=1/0,C=[];m--;){var w=e[m];m&&t&&(w=oe(w,Ge(t))),E=we(w.length,E),v[m]=!n&&(t||o>=120&&w.length>=120)?new Ht(m&&w):a}w=e[0];var M=-1,S=v[0];e:for(;++M<o&&C.length<E;){var F=w[M],W=t?t(F):F;if(F=n||F!==0?F:0,!(S?Pn(S,W):r(C,W,n))){for(m=d;--m;){var V=v[m];if(!(V?Pn(V,W):r(e[m],W,n)))continue e}S&&S.push(W),C.push(F)}}return C}function kf(e,t,n,r){return ct(e,function(o,d,m){t(r,n(o),d,m)}),r}function Sn(e,t,n){t=Rt(t,e),e=ya(e,t);var r=e==null?e:e[ht(Xe(t))];return r==null?a:We(r,e,n)}function Wo(e){return de(e)&&Me(e)==Zt}function Hf(e){return de(e)&&Me(e)==Tn}function zf(e){return de(e)&&Me(e)==vn}function Rn(e,t,n,r,o){return e===t?!0:e==null||t==null||!de(e)&&!de(t)?e!==e&&t!==t:$f(e,t,n,r,Rn,o)}function $f(e,t,n,r,o,d){var m=H(e),v=H(t),E=m?Kn:Oe(e),C=v?Kn:Oe(t);E=E==Zt?pt:E,C=C==Zt?pt:C;var w=E==pt,M=C==pt,S=E==C;if(S&&Ft(e)){if(!Ft(t))return!1;m=!0,w=!1}if(S&&!w)return d||(d=new st),m||cn(e)?va(e,t,n,r,o,d):vh(e,t,E,n,r,o,d);if(!(n&P)){var F=w&&ee.call(e,"__wrapped__"),W=M&&ee.call(t,"__wrapped__");if(F||W){var V=F?e.value():e,G=W?t.value():t;return d||(d=new st),o(V,G,n,r,d)}}return S?(d||(d=new st),bh(e,t,n,r,o,d)):!1}function Vf(e){return de(e)&&Oe(e)==nt}function Lr(e,t,n,r){var o=n.length,d=o,m=!r;if(e==null)return!d;for(e=te(e);o--;){var v=n[o];if(m&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++o<d;){v=n[o];var E=v[0],C=e[E],w=v[1];if(m&&v[2]){if(C===a&&!(E in e))return!1}else{var M=new st;if(r)var S=r(C,w,E,e,t,M);if(!(S===a?Rn(w,C,P|L,r,M):S))return!1}}return!0}function Go(e){if(!le(e)||Oh(e))return!1;var t=At(e)?$c:Fl;return t.test(Kt(e))}function Kf(e){return de(e)&&Me(e)==_n}function qf(e){return de(e)&&Oe(e)==it}function Jf(e){return de(e)&&Ni(e.length)&&!!re[Me(e)]}function Uo(e){return typeof e=="function"?e:e==null?De:typeof e=="object"?H(e)?zo(e[0],e[1]):Ho(e):uu(e)}function Sr(e){if(!Nn(e))return Zc(e);var t=[];for(var n in te(e))ee.call(e,n)&&n!="constructor"&&t.push(n);return t}function Yf(e){if(!le(e))return Sh(e);var t=Nn(e),n=[];for(var r in e)r=="constructor"&&(t||!ee.call(e,r))||n.push(r);return n}function Rr(e,t){return e<t}function ko(e,t){var n=-1,r=Fe(e)?A(e.length):[];return Lt(e,function(o,d,m){r[++n]=t(o,d,m)}),r}function Ho(e){var t=qr(e);return t.length==1&&t[0][2]?Ta(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function zo(e,t){return Yr(e)&&Aa(t)?Ta(ht(e),t):function(n){var r=ss(n,e);return r===a&&r===t?os(n,e):Rn(t,r,P|L)}}function _i(e,t,n,r,o){e!==t&&wr(t,function(d,m){if(o||(o=new st),le(d))Zf(e,t,m,n,_i,r,o);else{var v=r?r(Xr(e,m),d,m+"",e,t,o):a;v===a&&(v=d),yr(e,m,v)}},Ne)}function Zf(e,t,n,r,o,d,m){var v=Xr(e,n),E=Xr(t,n),C=m.get(E);if(C){yr(e,n,C);return}var w=d?d(v,E,n+"",e,t,m):a,M=w===a;if(M){var S=H(E),F=!S&&Ft(E),W=!S&&!F&&cn(E);w=E,S||F||W?H(v)?w=v:ve(v)?w=xe(v):F?(M=!1,w=ta(E,!0)):W?(M=!1,w=na(E,!0)):w=[]:Bn(E)||qt(E)?(w=v,qt(v)?w=Qa(v):(!le(v)||At(v))&&(w=Ea(E))):M=!1}M&&(m.set(E,w),o(w,E,r,d,m),m.delete(E)),yr(e,n,w)}function $o(e,t){var n=e.length;if(!!n)return t+=t<0?n:0,Et(t,n)?e[t]:a}function Vo(e,t,n){t.length?t=oe(t,function(d){return H(d)?function(m){return $t(m,d.length===1?d[0]:d)}:d}):t=[De];var r=-1;t=oe(t,Ge(B()));var o=ko(e,function(d,m,v){var E=oe(t,function(C){return C(d)});return{criteria:E,index:++r,value:d}});return Tc(o,function(d,m){return lh(d,m,n)})}function Xf(e,t){return Ko(e,t,function(n,r){return os(e,r)})}function Ko(e,t,n){for(var r=-1,o=t.length,d={};++r<o;){var m=t[r],v=$t(e,m);n(v,m)&&xn(d,Rt(m,e),v)}return d}function Qf(e){return function(t){return $t(t,e)}}function xr(e,t,n,r){var o=r?Ac:jt,d=-1,m=t.length,v=e;for(e===t&&(t=xe(t)),n&&(v=oe(e,Ge(n)));++d<m;)for(var E=0,C=t[d],w=n?n(C):C;(E=o(v,w,E,r))>-1;)v!==e&&li.call(v,E,1),li.call(e,E,1);return e}function qo(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==d){var d=o;Et(o)?li.call(e,o,1):Br(e,o)}}return e}function Fr(e,t){return e+hi(Oo()*(t-e+1))}function jf(e,t,n,r){for(var o=-1,d=Ae(fi((t-e)/(n||1)),0),m=A(d);d--;)m[r?d:++o]=e,e+=n;return m}function Nr(e,t){var n="";if(!e||t<1||t>tt)return n;do t%2&&(n+=e),t=hi(t/2),t&&(e+=e);while(t);return n}function K(e,t){return Qr(Pa(e,t,De),e+"")}function eh(e){return Lo(fn(e))}function th(e,t){var n=fn(e);return Ii(n,zt(t,0,n.length))}function xn(e,t,n,r){if(!le(e))return e;t=Rt(t,e);for(var o=-1,d=t.length,m=d-1,v=e;v!=null&&++o<d;){var E=ht(t[o]),C=n;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(o!=m){var w=v[E];C=r?r(w,E,v):a,C===a&&(C=le(w)?w:Et(t[o+1])?[]:{})}In(v,E,C),v=v[E]}return e}var Jo=di?function(e,t){return di.set(e,t),e}:De,nh=ci?function(e,t){return ci(e,"toString",{configurable:!0,enumerable:!1,value:us(t),writable:!0})}:De;function ih(e){return Ii(fn(e))}function Ze(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var d=A(o);++r<o;)d[r]=e[r+t];return d}function rh(e,t){var n;return Lt(e,function(r,o,d){return n=t(r,o,d),!n}),!!n}function Ei(e,t,n){var r=0,o=e==null?r:e.length;if(typeof t=="number"&&t===t&&o<=sl){for(;r<o;){var d=r+o>>>1,m=e[d];m!==null&&!ke(m)&&(n?m<=t:m<t)?r=d+1:o=d}return o}return Dr(e,t,De,n)}function Dr(e,t,n,r){var o=0,d=e==null?0:e.length;if(d===0)return 0;t=n(t);for(var m=t!==t,v=t===null,E=ke(t),C=t===a;o<d;){var w=hi((o+d)/2),M=n(e[w]),S=M!==a,F=M===null,W=M===M,V=ke(M);if(m)var G=r||W;else C?G=W&&(r||S):v?G=W&&S&&(r||!F):E?G=W&&S&&!F&&(r||!V):F||V?G=!1:G=r?M<=t:M<t;G?o=w+1:d=w}return we(d,Vn)}function Yo(e,t){for(var n=-1,r=e.length,o=0,d=[];++n<r;){var m=e[n],v=t?t(m):m;if(!n||!ot(v,E)){var E=v;d[o++]=m===0?0:m}}return d}function Zo(e){return typeof e=="number"?e:ke(e)?Wt:+e}function Ue(e){if(typeof e=="string")return e;if(H(e))return oe(e,Ue)+"";if(ke(e))return Mo?Mo.call(e):"";var t=e+"";return t=="0"&&1/e==-lt?"-0":t}function St(e,t,n){var r=-1,o=jn,d=e.length,m=!0,v=[],E=v;if(n)m=!1,o=fr;else if(d>=i){var C=t?null:gh(e);if(C)return ti(C);m=!1,o=Pn,E=new Ht}else E=t?[]:v;e:for(;++r<d;){var w=e[r],M=t?t(w):w;if(w=n||w!==0?w:0,m&&M===M){for(var S=E.length;S--;)if(E[S]===M)continue e;t&&E.push(M),v.push(w)}else o(E,M,n)||(E!==v&&E.push(M),v.push(w))}return v}function Br(e,t){return t=Rt(t,e),e=ya(e,t),e==null||delete e[ht(Xe(t))]}function Xo(e,t,n,r){return xn(e,t,n($t(e,t)),r)}function Ai(e,t,n,r){for(var o=e.length,d=r?o:-1;(r?d--:++d<o)&&t(e[d],d,e););return n?Ze(e,r?0:d,r?d+1:o):Ze(e,r?d+1:0,r?o:d)}function Qo(e,t){var n=e;return n instanceof Z&&(n=n.value()),hr(t,function(r,o){return o.func.apply(o.thisArg,wt([r],o.args))},n)}function Wr(e,t,n){var r=e.length;if(r<2)return r?St(e[0]):[];for(var o=-1,d=A(r);++o<r;)for(var m=e[o],v=-1;++v<r;)v!=o&&(d[o]=Ln(d[o]||m,e[v],t,n));return St(Ce(d,1),t,n)}function jo(e,t,n){for(var r=-1,o=e.length,d=t.length,m={};++r<o;){var v=r<d?t[r]:a;n(m,e[r],v)}return m}function Gr(e){return ve(e)?e:[]}function Ur(e){return typeof e=="function"?e:De}function Rt(e,t){return H(e)?e:Yr(e,t)?[e]:Ma(j(e))}var sh=K;function xt(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:Ze(e,t,n)}var ea=Vc||function(e){return Pe.clearTimeout(e)};function ta(e,t){if(t)return e.slice();var n=e.length,r=To?To(n):new e.constructor(n);return e.copy(r),r}function kr(e){var t=new e.constructor(e.byteLength);return new ai(t).set(new ai(e)),t}function oh(e,t){var n=t?kr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ah(e){var t=new e.constructor(e.source,Bs.exec(e));return t.lastIndex=e.lastIndex,t}function uh(e){return Mn?te(Mn.call(e)):{}}function na(e,t){var n=t?kr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ia(e,t){if(e!==t){var n=e!==a,r=e===null,o=e===e,d=ke(e),m=t!==a,v=t===null,E=t===t,C=ke(t);if(!v&&!C&&!d&&e>t||d&&m&&E&&!v&&!C||r&&m&&E||!n&&E||!o)return 1;if(!r&&!d&&!C&&e<t||C&&n&&o&&!r&&!d||v&&n&&o||!m&&o||!E)return-1}return 0}function lh(e,t,n){for(var r=-1,o=e.criteria,d=t.criteria,m=o.length,v=n.length;++r<m;){var E=ia(o[r],d[r]);if(E){if(r>=v)return E;var C=n[r];return E*(C=="desc"?-1:1)}}return e.index-t.index}function ra(e,t,n,r){for(var o=-1,d=e.length,m=n.length,v=-1,E=t.length,C=Ae(d-m,0),w=A(E+C),M=!r;++v<E;)w[v]=t[v];for(;++o<m;)(M||o<d)&&(w[n[o]]=e[o]);for(;C--;)w[v++]=e[o++];return w}function sa(e,t,n,r){for(var o=-1,d=e.length,m=-1,v=n.length,E=-1,C=t.length,w=Ae(d-v,0),M=A(w+C),S=!r;++o<w;)M[o]=e[o];for(var F=o;++E<C;)M[F+E]=t[E];for(;++m<v;)(S||o<d)&&(M[F+n[m]]=e[o++]);return M}function xe(e,t){var n=-1,r=e.length;for(t||(t=A(r));++n<r;)t[n]=e[n];return t}function ft(e,t,n,r){var o=!n;n||(n={});for(var d=-1,m=t.length;++d<m;){var v=t[d],E=r?r(n[v],e[v],v,n,e):a;E===a&&(E=e[v]),o?vt(n,v,E):In(n,v,E)}return n}function ch(e,t){return ft(e,Jr(e),t)}function fh(e,t){return ft(e,ba(e),t)}function Ti(e,t){return function(n,r){var o=H(n)?gc:xf,d=t?t():{};return o(n,e,B(r,2),d)}}function an(e){return K(function(t,n){var r=-1,o=n.length,d=o>1?n[o-1]:a,m=o>2?n[2]:a;for(d=e.length>3&&typeof d=="function"?(o--,d):a,m&&Ie(n[0],n[1],m)&&(d=o<3?a:d,o=1),t=te(t);++r<o;){var v=n[r];v&&e(t,v,r,d)}return t})}function oa(e,t){return function(n,r){if(n==null)return n;if(!Fe(n))return e(n,r);for(var o=n.length,d=t?o:-1,m=te(n);(t?d--:++d<o)&&r(m[d],d,m)!==!1;);return n}}function aa(e){return function(t,n,r){for(var o=-1,d=te(t),m=r(t),v=m.length;v--;){var E=m[e?v:++o];if(n(d[E],E,d)===!1)break}return t}}function hh(e,t,n){var r=t&R,o=Fn(e);function d(){var m=this&&this!==Pe&&this instanceof d?o:e;return m.apply(r?n:this,arguments)}return d}function ua(e){return function(t){t=j(t);var n=en(t)?rt(t):a,r=n?n[0]:t.charAt(0),o=n?xt(n,1).join(""):t.slice(1);return r[e]()+o}}function un(e){return function(t){return hr(ou(su(t).replace(tc,"")),e,"")}}function Fn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=on(e.prototype),r=e.apply(n,t);return le(r)?r:n}}function dh(e,t,n){var r=Fn(e);function o(){for(var d=arguments.length,m=A(d),v=d,E=ln(o);v--;)m[v]=arguments[v];var C=d<3&&m[0]!==E&&m[d-1]!==E?[]:Ot(m,E);if(d-=C.length,d<n)return da(e,t,Pi,o.placeholder,a,m,C,a,a,n-d);var w=this&&this!==Pe&&this instanceof o?r:e;return We(w,this,m)}return o}function la(e){return function(t,n,r){var o=te(t);if(!Fe(t)){var d=B(n,3);t=ye(t),n=function(v){return d(o[v],v,o)}}var m=e(t,n,r);return m>-1?o[d?t[m]:m]:a}}function ca(e){return _t(function(t){var n=t.length,r=n,o=Je.prototype.thru;for(e&&t.reverse();r--;){var d=t[r];if(typeof d!="function")throw new qe(u);if(o&&!m&&Oi(d)=="wrapper")var m=new Je([],!0)}for(r=m?r:n;++r<n;){d=t[r];var v=Oi(d),E=v=="wrapper"?Kr(d):a;E&&Zr(E[0])&&E[1]==(he|J|fe|U)&&!E[4].length&&E[9]==1?m=m[Oi(E[0])].apply(m,E[3]):m=d.length==1&&Zr(d)?m[v]():m.thru(d)}return function(){var C=arguments,w=C[0];if(m&&C.length==1&&H(w))return m.plant(w).value();for(var M=0,S=n?t[M].apply(this,C):w;++M<n;)S=t[M].call(this,S);return S}})}function Pi(e,t,n,r,o,d,m,v,E,C){var w=t&he,M=t&R,S=t&N,F=t&(J|ce),W=t&me,V=S?a:Fn(e);function G(){for(var Y=arguments.length,X=A(Y),He=Y;He--;)X[He]=arguments[He];if(F)var Le=ln(G),ze=yc(X,Le);if(r&&(X=ra(X,r,o,F)),d&&(X=sa(X,d,m,F)),Y-=ze,F&&Y<C){var be=Ot(X,Le);return da(e,t,Pi,G.placeholder,n,X,be,v,E,C-Y)}var at=M?n:this,Pt=S?at[e]:e;return Y=X.length,v?X=xh(X,v):W&&Y>1&&X.reverse(),w&&E<Y&&(X.length=E),this&&this!==Pe&&this instanceof G&&(Pt=V||Fn(Pt)),Pt.apply(at,X)}return G}function fa(e,t){return function(n,r){return kf(n,e,t(r),{})}}function yi(e,t){return function(n,r){var o;if(n===a&&r===a)return t;if(n!==a&&(o=n),r!==a){if(o===a)return r;typeof n=="string"||typeof r=="string"?(n=Ue(n),r=Ue(r)):(n=Zo(n),r=Zo(r)),o=e(n,r)}return o}}function Hr(e){return _t(function(t){return t=oe(t,Ge(B())),K(function(n){var r=this;return e(t,function(o){return We(o,r,n)})})})}function Ci(e,t){t=t===a?" ":Ue(t);var n=t.length;if(n<2)return n?Nr(t,e):t;var r=Nr(t,fi(e/tn(t)));return en(t)?xt(rt(r),0,e).join(""):r.slice(0,e)}function ph(e,t,n,r){var o=t&R,d=Fn(e);function m(){for(var v=-1,E=arguments.length,C=-1,w=r.length,M=A(w+E),S=this&&this!==Pe&&this instanceof m?d:e;++C<w;)M[C]=r[C];for(;E--;)M[C++]=arguments[++v];return We(S,o?n:this,M)}return m}function ha(e){return function(t,n,r){return r&&typeof r!="number"&&Ie(t,n,r)&&(n=r=a),t=Tt(t),n===a?(n=t,t=0):n=Tt(n),r=r===a?t<n?1:-1:Tt(r),jf(t,n,r,e)}}function wi(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Qe(t),n=Qe(n)),e(t,n)}}function da(e,t,n,r,o,d,m,v,E,C){var w=t&J,M=w?m:a,S=w?a:m,F=w?d:a,W=w?a:d;t|=w?fe:ge,t&=~(w?ge:fe),t&$||(t&=~(R|N));var V=[e,t,o,F,M,W,S,v,E,C],G=n.apply(a,V);return Zr(e)&&Ca(G,V),G.placeholder=r,wa(G,e,t)}function zr(e){var t=Ee[e];return function(n,r){if(n=Qe(n),r=r==null?0:we(z(r),292),r&&wo(n)){var o=(j(n)+"e").split("e"),d=t(o[0]+"e"+(+o[1]+r));return o=(j(d)+"e").split("e"),+(o[0]+"e"+(+o[1]-r))}return t(n)}}var gh=rn&&1/ti(new rn([,-0]))[1]==lt?function(e){return new rn(e)}:fs;function pa(e){return function(t){var n=Oe(t);return n==nt?_r(t):n==it?Sc(t):Pc(t,e(t))}}function bt(e,t,n,r,o,d,m,v){var E=t&N;if(!E&&typeof e!="function")throw new qe(u);var C=r?r.length:0;if(C||(t&=~(fe|ge),r=o=a),m=m===a?m:Ae(z(m),0),v=v===a?v:z(v),C-=o?o.length:0,t&ge){var w=r,M=o;r=o=a}var S=E?a:Kr(e),F=[e,t,n,r,o,w,M,d,m,v];if(S&&Lh(F,S),e=F[0],t=F[1],n=F[2],r=F[3],o=F[4],v=F[9]=F[9]===a?E?0:e.length:Ae(F[9]-C,0),!v&&t&(J|ce)&&(t&=~(J|ce)),!t||t==R)var W=hh(e,t,n);else t==J||t==ce?W=dh(e,t,v):(t==fe||t==(R|fe))&&!o.length?W=ph(e,t,n,r):W=Pi.apply(a,F);var V=S?Jo:Ca;return wa(V(W,F),e,t)}function ga(e,t,n,r){return e===a||ot(e,nn[n])&&!ee.call(r,n)?t:e}function ma(e,t,n,r,o,d){return le(e)&&le(t)&&(d.set(t,e),_i(e,t,a,ma,d),d.delete(t)),e}function mh(e){return Bn(e)?a:e}function va(e,t,n,r,o,d){var m=n&P,v=e.length,E=t.length;if(v!=E&&!(m&&E>v))return!1;var C=d.get(e),w=d.get(t);if(C&&w)return C==t&&w==e;var M=-1,S=!0,F=n&L?new Ht:a;for(d.set(e,t),d.set(t,e);++M<v;){var W=e[M],V=t[M];if(r)var G=m?r(V,W,M,t,e,d):r(W,V,M,e,t,d);if(G!==a){if(G)continue;S=!1;break}if(F){if(!dr(t,function(Y,X){if(!Pn(F,X)&&(W===Y||o(W,Y,n,r,d)))return F.push(X)})){S=!1;break}}else if(!(W===V||o(W,V,n,r,d))){S=!1;break}}return d.delete(e),d.delete(t),S}function vh(e,t,n,r,o,d,m){switch(n){case Xt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Tn:return!(e.byteLength!=t.byteLength||!d(new ai(e),new ai(t)));case mn:case vn:case bn:return ot(+e,+t);case qn:return e.name==t.name&&e.message==t.message;case _n:case En:return e==t+"";case nt:var v=_r;case it:var E=r&P;if(v||(v=ti),e.size!=t.size&&!E)return!1;var C=m.get(e);if(C)return C==t;r|=L,m.set(e,t);var w=va(v(e),v(t),r,o,d,m);return m.delete(e),w;case Yn:if(Mn)return Mn.call(e)==Mn.call(t)}return!1}function bh(e,t,n,r,o,d){var m=n&P,v=$r(e),E=v.length,C=$r(t),w=C.length;if(E!=w&&!m)return!1;for(var M=E;M--;){var S=v[M];if(!(m?S in t:ee.call(t,S)))return!1}var F=d.get(e),W=d.get(t);if(F&&W)return F==t&&W==e;var V=!0;d.set(e,t),d.set(t,e);for(var G=m;++M<E;){S=v[M];var Y=e[S],X=t[S];if(r)var He=m?r(X,Y,S,t,e,d):r(Y,X,S,e,t,d);if(!(He===a?Y===X||o(Y,X,n,r,d):He)){V=!1;break}G||(G=S=="constructor")}if(V&&!G){var Le=e.constructor,ze=t.constructor;Le!=ze&&"constructor"in e&&"constructor"in t&&!(typeof Le=="function"&&Le instanceof Le&&typeof ze=="function"&&ze instanceof ze)&&(V=!1)}return d.delete(e),d.delete(t),V}function _t(e){return Qr(Pa(e,a,Ra),e+"")}function $r(e){return Bo(e,ye,Jr)}function Vr(e){return Bo(e,Ne,ba)}var Kr=di?function(e){return di.get(e)}:fs;function Oi(e){for(var t=e.name+"",n=sn[t],r=ee.call(sn,t)?n.length:0;r--;){var o=n[r],d=o.func;if(d==null||d==e)return o.name}return t}function ln(e){var t=ee.call(f,"placeholder")?f:e;return t.placeholder}function B(){var e=f.iteratee||ls;return e=e===ls?Uo:e,arguments.length?e(arguments[0],arguments[1]):e}function Mi(e,t){var n=e.__data__;return wh(t)?n[typeof t=="string"?"string":"hash"]:n.map}function qr(e){for(var t=ye(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Aa(o)]}return t}function Vt(e,t){var n=Mc(e,t);return Go(n)?n:a}function _h(e){var t=ee.call(e,Ut),n=e[Ut];try{e[Ut]=a;var r=!0}catch(d){}var o=si.call(e);return r&&(t?e[Ut]=n:delete e[Ut]),o}var Jr=Ar?function(e){return e==null?[]:(e=te(e),Ct(Ar(e),function(t){return yo.call(e,t)}))}:hs,ba=Ar?function(e){for(var t=[];e;)wt(t,Jr(e)),e=ui(e);return t}:hs,Oe=Me;(Tr&&Oe(new Tr(new ArrayBuffer(1)))!=Xt||Cn&&Oe(new Cn)!=nt||Pr&&Oe(Pr.resolve())!=xs||rn&&Oe(new rn)!=it||wn&&Oe(new wn)!=An)&&(Oe=function(e){var t=Me(e),n=t==pt?e.constructor:a,r=n?Kt(n):"";if(r)switch(r){case ef:return Xt;case tf:return nt;case nf:return xs;case rf:return it;case sf:return An}return t});function Eh(e,t,n){for(var r=-1,o=n.length;++r<o;){var d=n[r],m=d.size;switch(d.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=we(t,e+m);break;case"takeRight":e=Ae(e,t-m);break}}return{start:e,end:t}}function Ah(e){var t=e.match(wl);return t?t[1].split(Ol):[]}function _a(e,t,n){t=Rt(t,e);for(var r=-1,o=t.length,d=!1;++r<o;){var m=ht(t[r]);if(!(d=e!=null&&n(e,m)))break;e=e[m]}return d||++r!=o?d:(o=e==null?0:e.length,!!o&&Ni(o)&&Et(m,o)&&(H(e)||qt(e)))}function Th(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ee.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Ea(e){return typeof e.constructor=="function"&&!Nn(e)?on(ui(e)):{}}function Ph(e,t,n){var r=e.constructor;switch(t){case Tn:return kr(e);case mn:case vn:return new r(+e);case Xt:return oh(e,n);case qi:case Ji:case Yi:case Zi:case Xi:case Qi:case ji:case er:case tr:return na(e,n);case nt:return new r;case bn:case En:return new r(e);case _n:return ah(e);case it:return new r;case Yn:return uh(e)}}function yh(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Cl,`{
/* [wrapped with `+t+`] */
`)}function Ch(e){return H(e)||qt(e)||!!(Co&&e&&e[Co])}function Et(e,t){var n=typeof e;return t=t==null?tt:t,!!t&&(n=="number"||n!="symbol"&&Dl.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t,n){if(!le(n))return!1;var r=typeof t;return(r=="number"?Fe(n)&&Et(t,n.length):r=="string"&&t in n)?ot(n[t],e):!1}function Yr(e,t){if(H(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ke(e)?!0:Al.test(e)||!El.test(e)||t!=null&&e in te(t)}function wh(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Zr(e){var t=Oi(e),n=f[t];if(typeof n!="function"||!(t in Z.prototype))return!1;if(e===n)return!0;var r=Kr(n);return!!r&&e===r[0]}function Oh(e){return!!Ao&&Ao in e}var Mh=ii?At:ds;function Nn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||nn;return e===n}function Aa(e){return e===e&&!le(e)}function Ta(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==a||e in te(n))}}function Ih(e){var t=xi(e,function(r){return n.size===l&&n.clear(),r}),n=t.cache;return t}function Lh(e,t){var n=e[1],r=t[1],o=n|r,d=o<(R|N|he),m=r==he&&n==J||r==he&&n==U&&e[7].length<=t[8]||r==(he|U)&&t[7].length<=t[8]&&n==J;if(!(d||m))return e;r&R&&(e[2]=t[2],o|=n&R?0:$);var v=t[3];if(v){var E=e[3];e[3]=E?ra(E,v,t[4]):v,e[4]=E?Ot(e[3],h):t[4]}return v=t[5],v&&(E=e[5],e[5]=E?sa(E,v,t[6]):v,e[6]=E?Ot(e[5],h):t[6]),v=t[7],v&&(e[7]=v),r&he&&(e[8]=e[8]==null?t[8]:we(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function Sh(e){var t=[];if(e!=null)for(var n in te(e))t.push(n);return t}function Rh(e){return si.call(e)}function Pa(e,t,n){return t=Ae(t===a?e.length-1:t,0),function(){for(var r=arguments,o=-1,d=Ae(r.length-t,0),m=A(d);++o<d;)m[o]=r[t+o];o=-1;for(var v=A(t+1);++o<t;)v[o]=r[o];return v[t]=n(m),We(e,this,v)}}function ya(e,t){return t.length<2?e:$t(e,Ze(t,0,-1))}function xh(e,t){for(var n=e.length,r=we(t.length,n),o=xe(e);r--;){var d=t[r];e[r]=Et(d,n)?o[d]:a}return e}function Xr(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ca=Oa(Jo),Dn=qc||function(e,t){return Pe.setTimeout(e,t)},Qr=Oa(nh);function wa(e,t,n){var r=t+"";return Qr(e,yh(r,Fh(Ah(r),n)))}function Oa(e){var t=0,n=0;return function(){var r=Xc(),o=Nt-(r-n);if(n=r,o>0){if(++t>=Re)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Ii(e,t){var n=-1,r=e.length,o=r-1;for(t=t===a?r:t;++n<t;){var d=Fr(n,o),m=e[d];e[d]=e[n],e[n]=m}return e.length=t,e}var Ma=Ih(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Tl,function(n,r,o,d){t.push(o?d.replace(Ll,"$1"):r||n)}),t});function ht(e){if(typeof e=="string"||ke(e))return e;var t=e+"";return t=="0"&&1/e==-lt?"-0":t}function Kt(e){if(e!=null){try{return ri.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fh(e,t){return Ke(ol,function(n){var r="_."+n[0];t&n[1]&&!jn(e,r)&&e.push(r)}),e.sort()}function Ia(e){if(e instanceof Z)return e.clone();var t=new Je(e.__wrapped__,e.__chain__);return t.__actions__=xe(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Nh(e,t,n){(n?Ie(e,t,n):t===a)?t=1:t=Ae(z(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var o=0,d=0,m=A(fi(r/t));o<r;)m[d++]=Ze(e,o,o+=t);return m}function Dh(e){for(var t=-1,n=e==null?0:e.length,r=0,o=[];++t<n;){var d=e[t];d&&(o[r++]=d)}return o}function Bh(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return wt(H(n)?xe(n):[n],Ce(t,1))}var Wh=K(function(e,t){return ve(e)?Ln(e,Ce(t,1,ve,!0)):[]}),Gh=K(function(e,t){var n=Xe(t);return ve(n)&&(n=a),ve(e)?Ln(e,Ce(t,1,ve,!0),B(n,2)):[]}),Uh=K(function(e,t){var n=Xe(t);return ve(n)&&(n=a),ve(e)?Ln(e,Ce(t,1,ve,!0),a,n):[]});function kh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===a?1:z(t),Ze(e,t<0?0:t,r)):[]}function Hh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===a?1:z(t),t=r-t,Ze(e,0,t<0?0:t)):[]}function zh(e,t){return e&&e.length?Ai(e,B(t,3),!0,!0):[]}function $h(e,t){return e&&e.length?Ai(e,B(t,3),!0):[]}function Vh(e,t,n,r){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&Ie(e,t,n)&&(n=0,r=o),Bf(e,t,n,r)):[]}function La(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:z(n);return o<0&&(o=Ae(r+o,0)),ei(e,B(t,3),o)}function Sa(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=r-1;return n!==a&&(o=z(n),o=n<0?Ae(r+o,0):we(o,r-1)),ei(e,B(t,3),o,!0)}function Ra(e){var t=e==null?0:e.length;return t?Ce(e,1):[]}function Kh(e){var t=e==null?0:e.length;return t?Ce(e,lt):[]}function qh(e,t){var n=e==null?0:e.length;return n?(t=t===a?1:z(t),Ce(e,t)):[]}function Jh(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r}function xa(e){return e&&e.length?e[0]:a}function Yh(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:z(n);return o<0&&(o=Ae(r+o,0)),jt(e,t,o)}function Zh(e){var t=e==null?0:e.length;return t?Ze(e,0,-1):[]}var Xh=K(function(e){var t=oe(e,Gr);return t.length&&t[0]===e[0]?Ir(t):[]}),Qh=K(function(e){var t=Xe(e),n=oe(e,Gr);return t===Xe(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Ir(n,B(t,2)):[]}),jh=K(function(e){var t=Xe(e),n=oe(e,Gr);return t=typeof t=="function"?t:a,t&&n.pop(),n.length&&n[0]===e[0]?Ir(n,a,t):[]});function ed(e,t){return e==null?"":Yc.call(e,t)}function Xe(e){var t=e==null?0:e.length;return t?e[t-1]:a}function td(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=r;return n!==a&&(o=z(n),o=o<0?Ae(r+o,0):we(o,r-1)),t===t?xc(e,t,o):ei(e,ho,o,!0)}function nd(e,t){return e&&e.length?$o(e,z(t)):a}var id=K(Fa);function Fa(e,t){return e&&e.length&&t&&t.length?xr(e,t):e}function rd(e,t,n){return e&&e.length&&t&&t.length?xr(e,t,B(n,2)):e}function sd(e,t,n){return e&&e.length&&t&&t.length?xr(e,t,a,n):e}var od=_t(function(e,t){var n=e==null?0:e.length,r=Cr(e,t);return qo(e,oe(t,function(o){return Et(o,n)?+o:o}).sort(ia)),r});function ad(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,o=[],d=e.length;for(t=B(t,3);++r<d;){var m=e[r];t(m,r,e)&&(n.push(m),o.push(r))}return qo(e,o),n}function jr(e){return e==null?e:jc.call(e)}function ud(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Ie(e,t,n)?(t=0,n=r):(t=t==null?0:z(t),n=n===a?r:z(n)),Ze(e,t,n)):[]}function ld(e,t){return Ei(e,t)}function cd(e,t,n){return Dr(e,t,B(n,2))}function fd(e,t){var n=e==null?0:e.length;if(n){var r=Ei(e,t);if(r<n&&ot(e[r],t))return r}return-1}function hd(e,t){return Ei(e,t,!0)}function dd(e,t,n){return Dr(e,t,B(n,2),!0)}function pd(e,t){var n=e==null?0:e.length;if(n){var r=Ei(e,t,!0)-1;if(ot(e[r],t))return r}return-1}function gd(e){return e&&e.length?Yo(e):[]}function md(e,t){return e&&e.length?Yo(e,B(t,2)):[]}function vd(e){var t=e==null?0:e.length;return t?Ze(e,1,t):[]}function bd(e,t,n){return e&&e.length?(t=n||t===a?1:z(t),Ze(e,0,t<0?0:t)):[]}function _d(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===a?1:z(t),t=r-t,Ze(e,t<0?0:t,r)):[]}function Ed(e,t){return e&&e.length?Ai(e,B(t,3),!1,!0):[]}function Ad(e,t){return e&&e.length?Ai(e,B(t,3)):[]}var Td=K(function(e){return St(Ce(e,1,ve,!0))}),Pd=K(function(e){var t=Xe(e);return ve(t)&&(t=a),St(Ce(e,1,ve,!0),B(t,2))}),yd=K(function(e){var t=Xe(e);return t=typeof t=="function"?t:a,St(Ce(e,1,ve,!0),a,t)});function Cd(e){return e&&e.length?St(e):[]}function wd(e,t){return e&&e.length?St(e,B(t,2)):[]}function Od(e,t){return t=typeof t=="function"?t:a,e&&e.length?St(e,a,t):[]}function es(e){if(!(e&&e.length))return[];var t=0;return e=Ct(e,function(n){if(ve(n))return t=Ae(n.length,t),!0}),vr(t,function(n){return oe(e,pr(n))})}function Na(e,t){if(!(e&&e.length))return[];var n=es(e);return t==null?n:oe(n,function(r){return We(t,a,r)})}var Md=K(function(e,t){return ve(e)?Ln(e,t):[]}),Id=K(function(e){return Wr(Ct(e,ve))}),Ld=K(function(e){var t=Xe(e);return ve(t)&&(t=a),Wr(Ct(e,ve),B(t,2))}),Sd=K(function(e){var t=Xe(e);return t=typeof t=="function"?t:a,Wr(Ct(e,ve),a,t)}),Rd=K(es);function xd(e,t){return jo(e||[],t||[],In)}function Fd(e,t){return jo(e||[],t||[],xn)}var Nd=K(function(e){var t=e.length,n=t>1?e[t-1]:a;return n=typeof n=="function"?(e.pop(),n):a,Na(e,n)});function Da(e){var t=f(e);return t.__chain__=!0,t}function Dd(e,t){return t(e),e}function Li(e,t){return t(e)}var Bd=_t(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(d){return Cr(d,e)};return t>1||this.__actions__.length||!(r instanceof Z)||!Et(n)?this.thru(o):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Li,args:[o],thisArg:a}),new Je(r,this.__chain__).thru(function(d){return t&&!d.length&&d.push(a),d}))});function Wd(){return Da(this)}function Gd(){return new Je(this.value(),this.__chain__)}function Ud(){this.__values__===a&&(this.__values__=Za(this.value()));var e=this.__index__>=this.__values__.length,t=e?a:this.__values__[this.__index__++];return{done:e,value:t}}function kd(){return this}function Hd(e){for(var t,n=this;n instanceof gi;){var r=Ia(n);r.__index__=0,r.__values__=a,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t}function zd(){var e=this.__wrapped__;if(e instanceof Z){var t=e;return this.__actions__.length&&(t=new Z(this)),t=t.reverse(),t.__actions__.push({func:Li,args:[jr],thisArg:a}),new Je(t,this.__chain__)}return this.thru(jr)}function $d(){return Qo(this.__wrapped__,this.__actions__)}var Vd=Ti(function(e,t,n){ee.call(e,n)?++e[n]:vt(e,n,1)});function Kd(e,t,n){var r=H(e)?co:Df;return n&&Ie(e,t,n)&&(t=a),r(e,B(t,3))}function qd(e,t){var n=H(e)?Ct:No;return n(e,B(t,3))}var Jd=la(La),Yd=la(Sa);function Zd(e,t){return Ce(Si(e,t),1)}function Xd(e,t){return Ce(Si(e,t),lt)}function Qd(e,t,n){return n=n===a?1:z(n),Ce(Si(e,t),n)}function Ba(e,t){var n=H(e)?Ke:Lt;return n(e,B(t,3))}function Wa(e,t){var n=H(e)?mc:Fo;return n(e,B(t,3))}var jd=Ti(function(e,t,n){ee.call(e,n)?e[n].push(t):vt(e,n,[t])});function ep(e,t,n,r){e=Fe(e)?e:fn(e),n=n&&!r?z(n):0;var o=e.length;return n<0&&(n=Ae(o+n,0)),Di(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&jt(e,t,n)>-1}var tp=K(function(e,t,n){var r=-1,o=typeof t=="function",d=Fe(e)?A(e.length):[];return Lt(e,function(m){d[++r]=o?We(t,m,n):Sn(m,t,n)}),d}),np=Ti(function(e,t,n){vt(e,n,t)});function Si(e,t){var n=H(e)?oe:ko;return n(e,B(t,3))}function ip(e,t,n,r){return e==null?[]:(H(t)||(t=t==null?[]:[t]),n=r?a:n,H(n)||(n=n==null?[]:[n]),Vo(e,t,n))}var rp=Ti(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function sp(e,t,n){var r=H(e)?hr:go,o=arguments.length<3;return r(e,B(t,4),n,o,Lt)}function op(e,t,n){var r=H(e)?vc:go,o=arguments.length<3;return r(e,B(t,4),n,o,Fo)}function ap(e,t){var n=H(e)?Ct:No;return n(e,Fi(B(t,3)))}function up(e){var t=H(e)?Lo:eh;return t(e)}function lp(e,t,n){(n?Ie(e,t,n):t===a)?t=1:t=z(t);var r=H(e)?Sf:th;return r(e,t)}function cp(e){var t=H(e)?Rf:ih;return t(e)}function fp(e){if(e==null)return 0;if(Fe(e))return Di(e)?tn(e):e.length;var t=Oe(e);return t==nt||t==it?e.size:Sr(e).length}function hp(e,t,n){var r=H(e)?dr:rh;return n&&Ie(e,t,n)&&(t=a),r(e,B(t,3))}var dp=K(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Ie(e,t[0],t[1])?t=[]:n>2&&Ie(t[0],t[1],t[2])&&(t=[t[0]]),Vo(e,Ce(t,1),[])}),Ri=Kc||function(){return Pe.Date.now()};function pp(e,t){if(typeof t!="function")throw new qe(u);return e=z(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ga(e,t,n){return t=n?a:t,t=e&&t==null?e.length:t,bt(e,he,a,a,a,a,t)}function Ua(e,t){var n;if(typeof t!="function")throw new qe(u);return e=z(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var ts=K(function(e,t,n){var r=R;if(n.length){var o=Ot(n,ln(ts));r|=fe}return bt(e,r,t,n,o)}),ka=K(function(e,t,n){var r=R|N;if(n.length){var o=Ot(n,ln(ka));r|=fe}return bt(t,r,e,n,o)});function Ha(e,t,n){t=n?a:t;var r=bt(e,J,a,a,a,a,a,t);return r.placeholder=Ha.placeholder,r}function za(e,t,n){t=n?a:t;var r=bt(e,ce,a,a,a,a,a,t);return r.placeholder=za.placeholder,r}function $a(e,t,n){var r,o,d,m,v,E,C=0,w=!1,M=!1,S=!0;if(typeof e!="function")throw new qe(u);t=Qe(t)||0,le(n)&&(w=!!n.leading,M="maxWait"in n,d=M?Ae(Qe(n.maxWait)||0,t):d,S="trailing"in n?!!n.trailing:S);function F(be){var at=r,Pt=o;return r=o=a,C=be,m=e.apply(Pt,at),m}function W(be){return C=be,v=Dn(Y,t),w?F(be):m}function V(be){var at=be-E,Pt=be-C,lu=t-at;return M?we(lu,d-Pt):lu}function G(be){var at=be-E,Pt=be-C;return E===a||at>=t||at<0||M&&Pt>=d}function Y(){var be=Ri();if(G(be))return X(be);v=Dn(Y,V(be))}function X(be){return v=a,S&&r?F(be):(r=o=a,m)}function He(){v!==a&&ea(v),C=0,r=E=o=v=a}function Le(){return v===a?m:X(Ri())}function ze(){var be=Ri(),at=G(be);if(r=arguments,o=this,E=be,at){if(v===a)return W(E);if(M)return ea(v),v=Dn(Y,t),F(E)}return v===a&&(v=Dn(Y,t)),m}return ze.cancel=He,ze.flush=Le,ze}var gp=K(function(e,t){return xo(e,1,t)}),mp=K(function(e,t,n){return xo(e,Qe(t)||0,n)});function vp(e){return bt(e,me)}function xi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new qe(u);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],d=n.cache;if(d.has(o))return d.get(o);var m=e.apply(this,r);return n.cache=d.set(o,m)||d,m};return n.cache=new(xi.Cache||mt),n}xi.Cache=mt;function Fi(e){if(typeof e!="function")throw new qe(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function bp(e){return Ua(2,e)}var _p=sh(function(e,t){t=t.length==1&&H(t[0])?oe(t[0],Ge(B())):oe(Ce(t,1),Ge(B()));var n=t.length;return K(function(r){for(var o=-1,d=we(r.length,n);++o<d;)r[o]=t[o].call(this,r[o]);return We(e,this,r)})}),ns=K(function(e,t){var n=Ot(t,ln(ns));return bt(e,fe,a,t,n)}),Va=K(function(e,t){var n=Ot(t,ln(Va));return bt(e,ge,a,t,n)}),Ep=_t(function(e,t){return bt(e,U,a,a,a,t)});function Ap(e,t){if(typeof e!="function")throw new qe(u);return t=t===a?t:z(t),K(e,t)}function Tp(e,t){if(typeof e!="function")throw new qe(u);return t=t==null?0:Ae(z(t),0),K(function(n){var r=n[t],o=xt(n,0,t);return r&&wt(o,r),We(e,this,o)})}function Pp(e,t,n){var r=!0,o=!0;if(typeof e!="function")throw new qe(u);return le(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),$a(e,t,{leading:r,maxWait:t,trailing:o})}function yp(e){return Ga(e,1)}function Cp(e,t){return ns(Ur(t),e)}function wp(){if(!arguments.length)return[];var e=arguments[0];return H(e)?e:[e]}function Op(e){return Ye(e,T)}function Mp(e,t){return t=typeof t=="function"?t:a,Ye(e,T,t)}function Ip(e){return Ye(e,g|T)}function Lp(e,t){return t=typeof t=="function"?t:a,Ye(e,g|T,t)}function Sp(e,t){return t==null||Ro(e,t,ye(t))}function ot(e,t){return e===t||e!==e&&t!==t}var Rp=wi(Mr),xp=wi(function(e,t){return e>=t}),qt=Wo(function(){return arguments}())?Wo:function(e){return de(e)&&ee.call(e,"callee")&&!yo.call(e,"callee")},H=A.isArray,Fp=ro?Ge(ro):Hf;function Fe(e){return e!=null&&Ni(e.length)&&!At(e)}function ve(e){return de(e)&&Fe(e)}function Np(e){return e===!0||e===!1||de(e)&&Me(e)==mn}var Ft=Jc||ds,Dp=so?Ge(so):zf;function Bp(e){return de(e)&&e.nodeType===1&&!Bn(e)}function Wp(e){if(e==null)return!0;if(Fe(e)&&(H(e)||typeof e=="string"||typeof e.splice=="function"||Ft(e)||cn(e)||qt(e)))return!e.length;var t=Oe(e);if(t==nt||t==it)return!e.size;if(Nn(e))return!Sr(e).length;for(var n in e)if(ee.call(e,n))return!1;return!0}function Gp(e,t){return Rn(e,t)}function Up(e,t,n){n=typeof n=="function"?n:a;var r=n?n(e,t):a;return r===a?Rn(e,t,a,n):!!r}function is(e){if(!de(e))return!1;var t=Me(e);return t==qn||t==ul||typeof e.message=="string"&&typeof e.name=="string"&&!Bn(e)}function kp(e){return typeof e=="number"&&wo(e)}function At(e){if(!le(e))return!1;var t=Me(e);return t==Jn||t==Rs||t==al||t==cl}function Ka(e){return typeof e=="number"&&e==z(e)}function Ni(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tt}function le(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function de(e){return e!=null&&typeof e=="object"}var qa=oo?Ge(oo):Vf;function Hp(e,t){return e===t||Lr(e,t,qr(t))}function zp(e,t,n){return n=typeof n=="function"?n:a,Lr(e,t,qr(t),n)}function $p(e){return Ja(e)&&e!=+e}function Vp(e){if(Mh(e))throw new k(c);return Go(e)}function Kp(e){return e===null}function qp(e){return e==null}function Ja(e){return typeof e=="number"||de(e)&&Me(e)==bn}function Bn(e){if(!de(e)||Me(e)!=pt)return!1;var t=ui(e);if(t===null)return!0;var n=ee.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ri.call(n)==Hc}var rs=ao?Ge(ao):Kf;function Jp(e){return Ka(e)&&e>=-tt&&e<=tt}var Ya=uo?Ge(uo):qf;function Di(e){return typeof e=="string"||!H(e)&&de(e)&&Me(e)==En}function ke(e){return typeof e=="symbol"||de(e)&&Me(e)==Yn}var cn=lo?Ge(lo):Jf;function Yp(e){return e===a}function Zp(e){return de(e)&&Oe(e)==An}function Xp(e){return de(e)&&Me(e)==hl}var Qp=wi(Rr),jp=wi(function(e,t){return e<=t});function Za(e){if(!e)return[];if(Fe(e))return Di(e)?rt(e):xe(e);if(yn&&e[yn])return Lc(e[yn]());var t=Oe(e),n=t==nt?_r:t==it?ti:fn;return n(e)}function Tt(e){if(!e)return e===0?e:0;if(e=Qe(e),e===lt||e===-lt){var t=e<0?-1:1;return t*$n}return e===e?e:0}function z(e){var t=Tt(e),n=t%1;return t===t?n?t-n:t:0}function Xa(e){return e?zt(z(e),0,Be):0}function Qe(e){if(typeof e=="number")return e;if(ke(e))return Wt;if(le(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=le(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mo(e);var n=xl.test(e);return n||Nl.test(e)?dc(e.slice(2),n?2:8):Rl.test(e)?Wt:+e}function Qa(e){return ft(e,Ne(e))}function eg(e){return e?zt(z(e),-tt,tt):e===0?e:0}function j(e){return e==null?"":Ue(e)}var tg=an(function(e,t){if(Nn(t)||Fe(t)){ft(t,ye(t),e);return}for(var n in t)ee.call(t,n)&&In(e,n,t[n])}),ja=an(function(e,t){ft(t,Ne(t),e)}),Bi=an(function(e,t,n,r){ft(t,Ne(t),e,r)}),ng=an(function(e,t,n,r){ft(t,ye(t),e,r)}),ig=_t(Cr);function rg(e,t){var n=on(e);return t==null?n:So(n,t)}var sg=K(function(e,t){e=te(e);var n=-1,r=t.length,o=r>2?t[2]:a;for(o&&Ie(t[0],t[1],o)&&(r=1);++n<r;)for(var d=t[n],m=Ne(d),v=-1,E=m.length;++v<E;){var C=m[v],w=e[C];(w===a||ot(w,nn[C])&&!ee.call(e,C))&&(e[C]=d[C])}return e}),og=K(function(e){return e.push(a,ma),We(eu,a,e)});function ag(e,t){return fo(e,B(t,3),ct)}function ug(e,t){return fo(e,B(t,3),Or)}function lg(e,t){return e==null?e:wr(e,B(t,3),Ne)}function cg(e,t){return e==null?e:Do(e,B(t,3),Ne)}function fg(e,t){return e&&ct(e,B(t,3))}function hg(e,t){return e&&Or(e,B(t,3))}function dg(e){return e==null?[]:bi(e,ye(e))}function pg(e){return e==null?[]:bi(e,Ne(e))}function ss(e,t,n){var r=e==null?a:$t(e,t);return r===a?n:r}function gg(e,t){return e!=null&&_a(e,t,Wf)}function os(e,t){return e!=null&&_a(e,t,Gf)}var mg=fa(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=si.call(t)),e[t]=n},us(De)),vg=fa(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=si.call(t)),ee.call(e,t)?e[t].push(n):e[t]=[n]},B),bg=K(Sn);function ye(e){return Fe(e)?Io(e):Sr(e)}function Ne(e){return Fe(e)?Io(e,!0):Yf(e)}function _g(e,t){var n={};return t=B(t,3),ct(e,function(r,o,d){vt(n,t(r,o,d),r)}),n}function Eg(e,t){var n={};return t=B(t,3),ct(e,function(r,o,d){vt(n,o,t(r,o,d))}),n}var Ag=an(function(e,t,n){_i(e,t,n)}),eu=an(function(e,t,n,r){_i(e,t,n,r)}),Tg=_t(function(e,t){var n={};if(e==null)return n;var r=!1;t=oe(t,function(d){return d=Rt(d,e),r||(r=d.length>1),d}),ft(e,Vr(e),n),r&&(n=Ye(n,g|O|T,mh));for(var o=t.length;o--;)Br(n,t[o]);return n});function Pg(e,t){return tu(e,Fi(B(t)))}var yg=_t(function(e,t){return e==null?{}:Xf(e,t)});function tu(e,t){if(e==null)return{};var n=oe(Vr(e),function(r){return[r]});return t=B(t),Ko(e,n,function(r,o){return t(r,o[0])})}function Cg(e,t,n){t=Rt(t,e);var r=-1,o=t.length;for(o||(o=1,e=a);++r<o;){var d=e==null?a:e[ht(t[r])];d===a&&(r=o,d=n),e=At(d)?d.call(e):d}return e}function wg(e,t,n){return e==null?e:xn(e,t,n)}function Og(e,t,n,r){return r=typeof r=="function"?r:a,e==null?e:xn(e,t,n,r)}var nu=pa(ye),iu=pa(Ne);function Mg(e,t,n){var r=H(e),o=r||Ft(e)||cn(e);if(t=B(t,4),n==null){var d=e&&e.constructor;o?n=r?new d:[]:le(e)?n=At(d)?on(ui(e)):{}:n={}}return(o?Ke:ct)(e,function(m,v,E){return t(n,m,v,E)}),n}function Ig(e,t){return e==null?!0:Br(e,t)}function Lg(e,t,n){return e==null?e:Xo(e,t,Ur(n))}function Sg(e,t,n,r){return r=typeof r=="function"?r:a,e==null?e:Xo(e,t,Ur(n),r)}function fn(e){return e==null?[]:br(e,ye(e))}function Rg(e){return e==null?[]:br(e,Ne(e))}function xg(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=Qe(n),n=n===n?n:0),t!==a&&(t=Qe(t),t=t===t?t:0),zt(Qe(e),t,n)}function Fg(e,t,n){return t=Tt(t),n===a?(n=t,t=0):n=Tt(n),e=Qe(e),Uf(e,t,n)}function Ng(e,t,n){if(n&&typeof n!="boolean"&&Ie(e,t,n)&&(t=n=a),n===a&&(typeof t=="boolean"?(n=t,t=a):typeof e=="boolean"&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=Tt(e),t===a?(t=e,e=0):t=Tt(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Oo();return we(e+o*(t-e+hc("1e-"+((o+"").length-1))),t)}return Fr(e,t)}var Dg=un(function(e,t,n){return t=t.toLowerCase(),e+(n?ru(t):t)});function ru(e){return as(j(e).toLowerCase())}function su(e){return e=j(e),e&&e.replace(Bl,Cc).replace(nc,"")}function Bg(e,t,n){e=j(e),t=Ue(t);var r=e.length;n=n===a?r:zt(z(n),0,r);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function Wg(e){return e=j(e),e&&vl.test(e)?e.replace(Ns,wc):e}function Gg(e){return e=j(e),e&&Pl.test(e)?e.replace(nr,"\\$&"):e}var Ug=un(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),kg=un(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Hg=ua("toLowerCase");function zg(e,t,n){e=j(e),t=z(t);var r=t?tn(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Ci(hi(o),n)+e+Ci(fi(o),n)}function $g(e,t,n){e=j(e),t=z(t);var r=t?tn(e):0;return t&&r<t?e+Ci(t-r,n):e}function Vg(e,t,n){e=j(e),t=z(t);var r=t?tn(e):0;return t&&r<t?Ci(t-r,n)+e:e}function Kg(e,t,n){return n||t==null?t=0:t&&(t=+t),Qc(j(e).replace(ir,""),t||0)}function qg(e,t,n){return(n?Ie(e,t,n):t===a)?t=1:t=z(t),Nr(j(e),t)}function Jg(){var e=arguments,t=j(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Yg=un(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Zg(e,t,n){return n&&typeof n!="number"&&Ie(e,t,n)&&(t=n=a),n=n===a?Be:n>>>0,n?(e=j(e),e&&(typeof t=="string"||t!=null&&!rs(t))&&(t=Ue(t),!t&&en(e))?xt(rt(e),0,n):e.split(t,n)):[]}var Xg=un(function(e,t,n){return e+(n?" ":"")+as(t)});function Qg(e,t,n){return e=j(e),n=n==null?0:zt(z(n),0,e.length),t=Ue(t),e.slice(n,n+t.length)==t}function jg(e,t,n){var r=f.templateSettings;n&&Ie(e,t,n)&&(t=a),e=j(e),t=Bi({},t,r,ga);var o=Bi({},t.imports,r.imports,ga),d=ye(o),m=br(o,d),v,E,C=0,w=t.interpolate||Zn,M="__p += '",S=Er((t.escape||Zn).source+"|"+w.source+"|"+(w===Ds?Sl:Zn).source+"|"+(t.evaluate||Zn).source+"|$","g"),F="//# sourceURL="+(ee.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ac+"]")+`
`;e.replace(S,function(G,Y,X,He,Le,ze){return X||(X=He),M+=e.slice(C,ze).replace(Wl,Oc),Y&&(v=!0,M+=`' +
__e(`+Y+`) +
'`),Le&&(E=!0,M+=`';
`+Le+`;
__p += '`),X&&(M+=`' +
((__t = (`+X+`)) == null ? '' : __t) +
'`),C=ze+G.length,G}),M+=`';
`;var W=ee.call(t,"variable")&&t.variable;if(!W)M=`with (obj) {
`+M+`
}
`;else if(Il.test(W))throw new k(p);M=(E?M.replace(dl,""):M).replace(pl,"$1").replace(gl,"$1;"),M="function("+(W||"obj")+`) {
`+(W?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+M+`return __p
}`;var V=au(function(){return Q(d,F+"return "+M).apply(a,m)});if(V.source=M,is(V))throw V;return V}function em(e){return j(e).toLowerCase()}function tm(e){return j(e).toUpperCase()}function nm(e,t,n){if(e=j(e),e&&(n||t===a))return mo(e);if(!e||!(t=Ue(t)))return e;var r=rt(e),o=rt(t),d=vo(r,o),m=bo(r,o)+1;return xt(r,d,m).join("")}function im(e,t,n){if(e=j(e),e&&(n||t===a))return e.slice(0,Eo(e)+1);if(!e||!(t=Ue(t)))return e;var r=rt(e),o=bo(r,rt(t))+1;return xt(r,0,o).join("")}function rm(e,t,n){if(e=j(e),e&&(n||t===a))return e.replace(ir,"");if(!e||!(t=Ue(t)))return e;var r=rt(e),o=vo(r,rt(t));return xt(r,o).join("")}function sm(e,t){var n=Te,r=ue;if(le(t)){var o="separator"in t?t.separator:o;n="length"in t?z(t.length):n,r="omission"in t?Ue(t.omission):r}e=j(e);var d=e.length;if(en(e)){var m=rt(e);d=m.length}if(n>=d)return e;var v=n-tn(r);if(v<1)return r;var E=m?xt(m,0,v).join(""):e.slice(0,v);if(o===a)return E+r;if(m&&(v+=E.length-v),rs(o)){if(e.slice(v).search(o)){var C,w=E;for(o.global||(o=Er(o.source,j(Bs.exec(o))+"g")),o.lastIndex=0;C=o.exec(w);)var M=C.index;E=E.slice(0,M===a?v:M)}}else if(e.indexOf(Ue(o),v)!=v){var S=E.lastIndexOf(o);S>-1&&(E=E.slice(0,S))}return E+r}function om(e){return e=j(e),e&&ml.test(e)?e.replace(Fs,Fc):e}var am=un(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),as=ua("toUpperCase");function ou(e,t,n){return e=j(e),t=n?a:t,t===a?Ic(e)?Bc(e):Ec(e):e.match(t)||[]}var au=K(function(e,t){try{return We(e,a,t)}catch(n){return is(n)?n:new k(n)}}),um=_t(function(e,t){return Ke(t,function(n){n=ht(n),vt(e,n,ts(e[n],e))}),e});function lm(e){var t=e==null?0:e.length,n=B();return e=t?oe(e,function(r){if(typeof r[1]!="function")throw new qe(u);return[n(r[0]),r[1]]}):[],K(function(r){for(var o=-1;++o<t;){var d=e[o];if(We(d[0],this,r))return We(d[1],this,r)}})}function cm(e){return Nf(Ye(e,g))}function us(e){return function(){return e}}function fm(e,t){return e==null||e!==e?t:e}var hm=ca(),dm=ca(!0);function De(e){return e}function ls(e){return Uo(typeof e=="function"?e:Ye(e,g))}function pm(e){return Ho(Ye(e,g))}function gm(e,t){return zo(e,Ye(t,g))}var mm=K(function(e,t){return function(n){return Sn(n,e,t)}}),vm=K(function(e,t){return function(n){return Sn(e,n,t)}});function cs(e,t,n){var r=ye(t),o=bi(t,r);n==null&&!(le(t)&&(o.length||!r.length))&&(n=t,t=e,e=this,o=bi(t,ye(t)));var d=!(le(n)&&"chain"in n)||!!n.chain,m=At(e);return Ke(o,function(v){var E=t[v];e[v]=E,m&&(e.prototype[v]=function(){var C=this.__chain__;if(d||C){var w=e(this.__wrapped__),M=w.__actions__=xe(this.__actions__);return M.push({func:E,args:arguments,thisArg:e}),w.__chain__=C,w}return E.apply(e,wt([this.value()],arguments))})}),e}function bm(){return Pe._===this&&(Pe._=zc),this}function fs(){}function _m(e){return e=z(e),K(function(t){return $o(t,e)})}var Em=Hr(oe),Am=Hr(co),Tm=Hr(dr);function uu(e){return Yr(e)?pr(ht(e)):Qf(e)}function Pm(e){return function(t){return e==null?a:$t(e,t)}}var ym=ha(),Cm=ha(!0);function hs(){return[]}function ds(){return!1}function wm(){return{}}function Om(){return""}function Mm(){return!0}function Im(e,t){if(e=z(e),e<1||e>tt)return[];var n=Be,r=we(e,Be);t=B(t),e-=Be;for(var o=vr(r,t);++n<e;)t(n);return o}function Lm(e){return H(e)?oe(e,ht):ke(e)?[e]:xe(Ma(j(e)))}function Sm(e){var t=++kc;return j(e)+t}var Rm=yi(function(e,t){return e+t},0),xm=zr("ceil"),Fm=yi(function(e,t){return e/t},1),Nm=zr("floor");function Dm(e){return e&&e.length?vi(e,De,Mr):a}function Bm(e,t){return e&&e.length?vi(e,B(t,2),Mr):a}function Wm(e){return po(e,De)}function Gm(e,t){return po(e,B(t,2))}function Um(e){return e&&e.length?vi(e,De,Rr):a}function km(e,t){return e&&e.length?vi(e,B(t,2),Rr):a}var Hm=yi(function(e,t){return e*t},1),zm=zr("round"),$m=yi(function(e,t){return e-t},0);function Vm(e){return e&&e.length?mr(e,De):0}function Km(e,t){return e&&e.length?mr(e,B(t,2)):0}return f.after=pp,f.ary=Ga,f.assign=tg,f.assignIn=ja,f.assignInWith=Bi,f.assignWith=ng,f.at=ig,f.before=Ua,f.bind=ts,f.bindAll=um,f.bindKey=ka,f.castArray=wp,f.chain=Da,f.chunk=Nh,f.compact=Dh,f.concat=Bh,f.cond=lm,f.conforms=cm,f.constant=us,f.countBy=Vd,f.create=rg,f.curry=Ha,f.curryRight=za,f.debounce=$a,f.defaults=sg,f.defaultsDeep=og,f.defer=gp,f.delay=mp,f.difference=Wh,f.differenceBy=Gh,f.differenceWith=Uh,f.drop=kh,f.dropRight=Hh,f.dropRightWhile=zh,f.dropWhile=$h,f.fill=Vh,f.filter=qd,f.flatMap=Zd,f.flatMapDeep=Xd,f.flatMapDepth=Qd,f.flatten=Ra,f.flattenDeep=Kh,f.flattenDepth=qh,f.flip=vp,f.flow=hm,f.flowRight=dm,f.fromPairs=Jh,f.functions=dg,f.functionsIn=pg,f.groupBy=jd,f.initial=Zh,f.intersection=Xh,f.intersectionBy=Qh,f.intersectionWith=jh,f.invert=mg,f.invertBy=vg,f.invokeMap=tp,f.iteratee=ls,f.keyBy=np,f.keys=ye,f.keysIn=Ne,f.map=Si,f.mapKeys=_g,f.mapValues=Eg,f.matches=pm,f.matchesProperty=gm,f.memoize=xi,f.merge=Ag,f.mergeWith=eu,f.method=mm,f.methodOf=vm,f.mixin=cs,f.negate=Fi,f.nthArg=_m,f.omit=Tg,f.omitBy=Pg,f.once=bp,f.orderBy=ip,f.over=Em,f.overArgs=_p,f.overEvery=Am,f.overSome=Tm,f.partial=ns,f.partialRight=Va,f.partition=rp,f.pick=yg,f.pickBy=tu,f.property=uu,f.propertyOf=Pm,f.pull=id,f.pullAll=Fa,f.pullAllBy=rd,f.pullAllWith=sd,f.pullAt=od,f.range=ym,f.rangeRight=Cm,f.rearg=Ep,f.reject=ap,f.remove=ad,f.rest=Ap,f.reverse=jr,f.sampleSize=lp,f.set=wg,f.setWith=Og,f.shuffle=cp,f.slice=ud,f.sortBy=dp,f.sortedUniq=gd,f.sortedUniqBy=md,f.split=Zg,f.spread=Tp,f.tail=vd,f.take=bd,f.takeRight=_d,f.takeRightWhile=Ed,f.takeWhile=Ad,f.tap=Dd,f.throttle=Pp,f.thru=Li,f.toArray=Za,f.toPairs=nu,f.toPairsIn=iu,f.toPath=Lm,f.toPlainObject=Qa,f.transform=Mg,f.unary=yp,f.union=Td,f.unionBy=Pd,f.unionWith=yd,f.uniq=Cd,f.uniqBy=wd,f.uniqWith=Od,f.unset=Ig,f.unzip=es,f.unzipWith=Na,f.update=Lg,f.updateWith=Sg,f.values=fn,f.valuesIn=Rg,f.without=Md,f.words=ou,f.wrap=Cp,f.xor=Id,f.xorBy=Ld,f.xorWith=Sd,f.zip=Rd,f.zipObject=xd,f.zipObjectDeep=Fd,f.zipWith=Nd,f.entries=nu,f.entriesIn=iu,f.extend=ja,f.extendWith=Bi,cs(f,f),f.add=Rm,f.attempt=au,f.camelCase=Dg,f.capitalize=ru,f.ceil=xm,f.clamp=xg,f.clone=Op,f.cloneDeep=Ip,f.cloneDeepWith=Lp,f.cloneWith=Mp,f.conformsTo=Sp,f.deburr=su,f.defaultTo=fm,f.divide=Fm,f.endsWith=Bg,f.eq=ot,f.escape=Wg,f.escapeRegExp=Gg,f.every=Kd,f.find=Jd,f.findIndex=La,f.findKey=ag,f.findLast=Yd,f.findLastIndex=Sa,f.findLastKey=ug,f.floor=Nm,f.forEach=Ba,f.forEachRight=Wa,f.forIn=lg,f.forInRight=cg,f.forOwn=fg,f.forOwnRight=hg,f.get=ss,f.gt=Rp,f.gte=xp,f.has=gg,f.hasIn=os,f.head=xa,f.identity=De,f.includes=ep,f.indexOf=Yh,f.inRange=Fg,f.invoke=bg,f.isArguments=qt,f.isArray=H,f.isArrayBuffer=Fp,f.isArrayLike=Fe,f.isArrayLikeObject=ve,f.isBoolean=Np,f.isBuffer=Ft,f.isDate=Dp,f.isElement=Bp,f.isEmpty=Wp,f.isEqual=Gp,f.isEqualWith=Up,f.isError=is,f.isFinite=kp,f.isFunction=At,f.isInteger=Ka,f.isLength=Ni,f.isMap=qa,f.isMatch=Hp,f.isMatchWith=zp,f.isNaN=$p,f.isNative=Vp,f.isNil=qp,f.isNull=Kp,f.isNumber=Ja,f.isObject=le,f.isObjectLike=de,f.isPlainObject=Bn,f.isRegExp=rs,f.isSafeInteger=Jp,f.isSet=Ya,f.isString=Di,f.isSymbol=ke,f.isTypedArray=cn,f.isUndefined=Yp,f.isWeakMap=Zp,f.isWeakSet=Xp,f.join=ed,f.kebabCase=Ug,f.last=Xe,f.lastIndexOf=td,f.lowerCase=kg,f.lowerFirst=Hg,f.lt=Qp,f.lte=jp,f.max=Dm,f.maxBy=Bm,f.mean=Wm,f.meanBy=Gm,f.min=Um,f.minBy=km,f.stubArray=hs,f.stubFalse=ds,f.stubObject=wm,f.stubString=Om,f.stubTrue=Mm,f.multiply=Hm,f.nth=nd,f.noConflict=bm,f.noop=fs,f.now=Ri,f.pad=zg,f.padEnd=$g,f.padStart=Vg,f.parseInt=Kg,f.random=Ng,f.reduce=sp,f.reduceRight=op,f.repeat=qg,f.replace=Jg,f.result=Cg,f.round=zm,f.runInContext=_,f.sample=up,f.size=fp,f.snakeCase=Yg,f.some=hp,f.sortedIndex=ld,f.sortedIndexBy=cd,f.sortedIndexOf=fd,f.sortedLastIndex=hd,f.sortedLastIndexBy=dd,f.sortedLastIndexOf=pd,f.startCase=Xg,f.startsWith=Qg,f.subtract=$m,f.sum=Vm,f.sumBy=Km,f.template=jg,f.times=Im,f.toFinite=Tt,f.toInteger=z,f.toLength=Xa,f.toLower=em,f.toNumber=Qe,f.toSafeInteger=eg,f.toString=j,f.toUpper=tm,f.trim=nm,f.trimEnd=im,f.trimStart=rm,f.truncate=sm,f.unescape=om,f.uniqueId=Sm,f.upperCase=am,f.upperFirst=as,f.each=Ba,f.eachRight=Wa,f.first=xa,cs(f,function(){var e={};return ct(f,function(t,n){ee.call(f.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),f.VERSION=s,Ke(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),Ke(["drop","take"],function(e,t){Z.prototype[e]=function(n){n=n===a?1:Ae(z(n),0);var r=this.__filtered__&&!t?new Z(this):this.clone();return r.__filtered__?r.__takeCount__=we(n,r.__takeCount__):r.__views__.push({size:we(n,Be),type:e+(r.__dir__<0?"Right":"")}),r},Z.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Ke(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==yt||n==Bt;Z.prototype[e]=function(o){var d=this.clone();return d.__iteratees__.push({iteratee:B(o,3),type:n}),d.__filtered__=d.__filtered__||r,d}}),Ke(["head","last"],function(e,t){var n="take"+(t?"Right":"");Z.prototype[e]=function(){return this[n](1).value()[0]}}),Ke(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Z.prototype[e]=function(){return this.__filtered__?new Z(this):this[n](1)}}),Z.prototype.compact=function(){return this.filter(De)},Z.prototype.find=function(e){return this.filter(e).head()},Z.prototype.findLast=function(e){return this.reverse().find(e)},Z.prototype.invokeMap=K(function(e,t){return typeof e=="function"?new Z(this):this.map(function(n){return Sn(n,e,t)})}),Z.prototype.reject=function(e){return this.filter(Fi(B(e)))},Z.prototype.slice=function(e,t){e=z(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Z(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(t=z(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Z.prototype.toArray=function(){return this.take(Be)},ct(Z.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=f[r?"take"+(t=="last"?"Right":""):t],d=r||/^find/.test(t);!o||(f.prototype[t]=function(){var m=this.__wrapped__,v=r?[1]:arguments,E=m instanceof Z,C=v[0],w=E||H(m),M=function(Y){var X=o.apply(f,wt([Y],v));return r&&S?X[0]:X};w&&n&&typeof C=="function"&&C.length!=1&&(E=w=!1);var S=this.__chain__,F=!!this.__actions__.length,W=d&&!S,V=E&&!F;if(!d&&w){m=V?m:new Z(this);var G=e.apply(m,v);return G.__actions__.push({func:Li,args:[M],thisArg:a}),new Je(G,S)}return W&&V?e.apply(this,v):(G=this.thru(M),W?r?G.value()[0]:G.value():G)})}),Ke(["pop","push","shift","sort","splice","unshift"],function(e){var t=ni[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var o=arguments;if(r&&!this.__chain__){var d=this.value();return t.apply(H(d)?d:[],o)}return this[n](function(m){return t.apply(H(m)?m:[],o)})}}),ct(Z.prototype,function(e,t){var n=f[t];if(n){var r=n.name+"";ee.call(sn,r)||(sn[r]=[]),sn[r].push({name:t,func:n})}}),sn[Pi(a,N).name]=[{name:"wrapper",func:a}],Z.prototype.clone=of,Z.prototype.reverse=af,Z.prototype.value=uf,f.prototype.at=Bd,f.prototype.chain=Wd,f.prototype.commit=Gd,f.prototype.next=Ud,f.prototype.plant=Hd,f.prototype.reverse=zd,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=$d,f.prototype.first=f.prototype.head,yn&&(f.prototype[yn]=kd),f},Mt=Wc();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Pe._=Mt,define(function(){return Mt})):Gt?((Gt.exports=Mt)._=Mt,lr._=Mt):Pe._=Mt}).call(gn)});var nl=_e((Hn,ys)=>{I();(function(a,s){typeof Hn=="object"&&typeof ys=="object"?ys.exports=s():typeof define=="function"&&define.amd?define([],s):typeof Hn=="object"?Hn.bowser=s():a.bowser=s()})(Hn,function(){return function(a){var s={};function i(c){if(s[c])return s[c].exports;var u=s[c]={i:c,l:!1,exports:{}};return a[c].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=a,i.c=s,i.d=function(c,u,p){i.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:p})},i.r=function(c){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},i.t=function(c,u){if(1&u&&(c=i(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var p=Object.create(null);if(i.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var b in c)i.d(p,b,function(l){return c[l]}.bind(null,b));return p},i.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(u,"a",u),u},i.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},i.p="",i(i.s=90)}({17:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c=i(18),u=function(){function p(){}return p.getFirstMatch=function(b,l){var h=l.match(b);return h&&h.length>0&&h[1]||""},p.getSecondMatch=function(b,l){var h=l.match(b);return h&&h.length>1&&h[2]||""},p.matchAndReturnConst=function(b,l,h){if(b.test(l))return h},p.getWindowsVersionName=function(b){switch(b){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},p.getMacOSVersionName=function(b){var l=b.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(l.push(0),l[0]===10)switch(l[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},p.getAndroidVersionName=function(b){var l=b.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(l.push(0),!(l[0]===1&&l[1]<5))return l[0]===1&&l[1]<6?"Cupcake":l[0]===1&&l[1]>=6?"Donut":l[0]===2&&l[1]<2?"Eclair":l[0]===2&&l[1]===2?"Froyo":l[0]===2&&l[1]>2?"Gingerbread":l[0]===3?"Honeycomb":l[0]===4&&l[1]<1?"Ice Cream Sandwich":l[0]===4&&l[1]<4?"Jelly Bean":l[0]===4&&l[1]>=4?"KitKat":l[0]===5?"Lollipop":l[0]===6?"Marshmallow":l[0]===7?"Nougat":l[0]===8?"Oreo":l[0]===9?"Pie":void 0},p.getVersionPrecision=function(b){return b.split(".").length},p.compareVersions=function(b,l,h){h===void 0&&(h=!1);var g=p.getVersionPrecision(b),O=p.getVersionPrecision(l),T=Math.max(g,O),P=0,L=p.map([b,l],function(R){var N=T-p.getVersionPrecision(R),$=R+new Array(N+1).join(".0");return p.map($.split("."),function(J){return new Array(20-J.length).join("0")+J}).reverse()});for(h&&(P=T-Math.min(g,O)),T-=1;T>=P;){if(L[0][T]>L[1][T])return 1;if(L[0][T]===L[1][T]){if(T===P)return 0;T-=1}else if(L[0][T]<L[1][T])return-1}},p.map=function(b,l){var h,g=[];if(Array.prototype.map)return Array.prototype.map.call(b,l);for(h=0;h<b.length;h+=1)g.push(l(b[h]));return g},p.find=function(b,l){var h,g;if(Array.prototype.find)return Array.prototype.find.call(b,l);for(h=0,g=b.length;h<g;h+=1){var O=b[h];if(l(O,h))return O}},p.assign=function(b){for(var l,h,g=b,O=arguments.length,T=new Array(O>1?O-1:0),P=1;P<O;P++)T[P-1]=arguments[P];if(Object.assign)return Object.assign.apply(Object,[b].concat(T));var L=function(){var R=T[l];typeof R=="object"&&R!==null&&Object.keys(R).forEach(function(N){g[N]=R[N]})};for(l=0,h=T.length;l<h;l+=1)L();return b},p.getBrowserAlias=function(b){return c.BROWSER_ALIASES_MAP[b]},p.getBrowserTypeByAlias=function(b){return c.BROWSER_MAP[b]||""},p}();s.default=u,a.exports=s.default},18:function(a,s,i){"use strict";s.__esModule=!0,s.ENGINE_MAP=s.OS_MAP=s.PLATFORMS_MAP=s.BROWSER_MAP=s.BROWSER_ALIASES_MAP=void 0,s.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},s.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},s.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},s.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},s.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(91))&&c.__esModule?c:{default:c},p=i(18);function b(h,g){for(var O=0;O<g.length;O++){var T=g[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(h,T.key,T)}}var l=function(){function h(){}var g,O,T;return h.getParser=function(P,L){if(L===void 0&&(L=!1),typeof P!="string")throw new Error("UserAgent should be a string");return new u.default(P,L)},h.parse=function(P){return new u.default(P).getResult()},g=h,T=[{key:"BROWSER_MAP",get:function(){return p.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return p.ENGINE_MAP}},{key:"OS_MAP",get:function(){return p.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return p.PLATFORMS_MAP}}],(O=null)&&b(g.prototype,O),T&&b(g,T),h}();s.default=l,a.exports=s.default},91:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c=h(i(92)),u=h(i(93)),p=h(i(94)),b=h(i(95)),l=h(i(17));function h(O){return O&&O.__esModule?O:{default:O}}var g=function(){function O(P,L){if(L===void 0&&(L=!1),P==null||P==="")throw new Error("UserAgent parameter can't be empty");this._ua=P,this.parsedResult={},L!==!0&&this.parse()}var T=O.prototype;return T.getUA=function(){return this._ua},T.test=function(P){return P.test(this._ua)},T.parseBrowser=function(){var P=this;this.parsedResult.browser={};var L=l.default.find(c.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.browser=L.describe(this.getUA())),this.parsedResult.browser},T.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},T.getBrowserName=function(P){return P?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},T.getBrowserVersion=function(){return this.getBrowser().version},T.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},T.parseOS=function(){var P=this;this.parsedResult.os={};var L=l.default.find(u.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.os=L.describe(this.getUA())),this.parsedResult.os},T.getOSName=function(P){var L=this.getOS().name;return P?String(L).toLowerCase()||"":L||""},T.getOSVersion=function(){return this.getOS().version},T.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},T.getPlatformType=function(P){P===void 0&&(P=!1);var L=this.getPlatform().type;return P?String(L).toLowerCase()||"":L||""},T.parsePlatform=function(){var P=this;this.parsedResult.platform={};var L=l.default.find(p.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.platform=L.describe(this.getUA())),this.parsedResult.platform},T.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},T.getEngineName=function(P){return P?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},T.parseEngine=function(){var P=this;this.parsedResult.engine={};var L=l.default.find(b.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.engine=L.describe(this.getUA())),this.parsedResult.engine},T.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},T.getResult=function(){return l.default.assign({},this.parsedResult)},T.satisfies=function(P){var L=this,R={},N=0,$={},J=0;if(Object.keys(P).forEach(function(ue){var Re=P[ue];typeof Re=="string"?($[ue]=Re,J+=1):typeof Re=="object"&&(R[ue]=Re,N+=1)}),N>0){var ce=Object.keys(R),fe=l.default.find(ce,function(ue){return L.isOS(ue)});if(fe){var ge=this.satisfies(R[fe]);if(ge!==void 0)return ge}var he=l.default.find(ce,function(ue){return L.isPlatform(ue)});if(he){var U=this.satisfies(R[he]);if(U!==void 0)return U}}if(J>0){var me=Object.keys($),Te=l.default.find(me,function(ue){return L.isBrowser(ue,!0)});if(Te!==void 0)return this.compareVersion($[Te])}},T.isBrowser=function(P,L){L===void 0&&(L=!1);var R=this.getBrowserName().toLowerCase(),N=P.toLowerCase(),$=l.default.getBrowserTypeByAlias(N);return L&&$&&(N=$.toLowerCase()),N===R},T.compareVersion=function(P){var L=[0],R=P,N=!1,$=this.getBrowserVersion();if(typeof $=="string")return P[0]===">"||P[0]==="<"?(R=P.substr(1),P[1]==="="?(N=!0,R=P.substr(2)):L=[],P[0]===">"?L.push(1):L.push(-1)):P[0]==="="?R=P.substr(1):P[0]==="~"&&(N=!0,R=P.substr(1)),L.indexOf(l.default.compareVersions($,R,N))>-1},T.isOS=function(P){return this.getOSName(!0)===String(P).toLowerCase()},T.isPlatform=function(P){return this.getPlatformType(!0)===String(P).toLowerCase()},T.isEngine=function(P){return this.getEngineName(!0)===String(P).toLowerCase()},T.is=function(P,L){return L===void 0&&(L=!1),this.isBrowser(P,L)||this.isOS(P)||this.isPlatform(P)},T.some=function(P){var L=this;return P===void 0&&(P=[]),P.some(function(R){return L.is(R)})},O}();s.default=g,a.exports=s.default},92:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=/version\/(\d+(\.?_?\d+)+)/i,b=[{test:[/googlebot/i],describe:function(l){var h={name:"Googlebot"},g=u.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/opera/i],describe:function(l){var h={name:"Opera"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/opr\/|opios/i],describe:function(l){var h={name:"Opera"},g=u.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/SamsungBrowser/i],describe:function(l){var h={name:"Samsung Internet for Android"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/Whale/i],describe:function(l){var h={name:"NAVER Whale Browser"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/MZBrowser/i],describe:function(l){var h={name:"MZ Browser"},g=u.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/focus/i],describe:function(l){var h={name:"Focus"},g=u.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/swing/i],describe:function(l){var h={name:"Swing"},g=u.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/coast/i],describe:function(l){var h={name:"Opera Coast"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(l){var h={name:"Opera Touch"},g=u.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/yabrowser/i],describe:function(l){var h={name:"Yandex Browser"},g=u.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/ucbrowser/i],describe:function(l){var h={name:"UC Browser"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/Maxthon|mxios/i],describe:function(l){var h={name:"Maxthon"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/epiphany/i],describe:function(l){var h={name:"Epiphany"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/puffin/i],describe:function(l){var h={name:"Puffin"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/sleipnir/i],describe:function(l){var h={name:"Sleipnir"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/k-meleon/i],describe:function(l){var h={name:"K-Meleon"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/micromessenger/i],describe:function(l){var h={name:"WeChat"},g=u.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/qqbrowser/i],describe:function(l){var h={name:/qqbrowserlite/i.test(l)?"QQ Browser Lite":"QQ Browser"},g=u.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/msie|trident/i],describe:function(l){var h={name:"Internet Explorer"},g=u.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/\sedg\//i],describe:function(l){var h={name:"Microsoft Edge"},g=u.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/edg([ea]|ios)/i],describe:function(l){var h={name:"Microsoft Edge"},g=u.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/vivaldi/i],describe:function(l){var h={name:"Vivaldi"},g=u.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/seamonkey/i],describe:function(l){var h={name:"SeaMonkey"},g=u.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/sailfish/i],describe:function(l){var h={name:"Sailfish"},g=u.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,l);return g&&(h.version=g),h}},{test:[/silk/i],describe:function(l){var h={name:"Amazon Silk"},g=u.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/phantom/i],describe:function(l){var h={name:"PhantomJS"},g=u.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/slimerjs/i],describe:function(l){var h={name:"SlimerJS"},g=u.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var h={name:"BlackBerry"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var h={name:"WebOS Browser"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/bada/i],describe:function(l){var h={name:"Bada"},g=u.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/tizen/i],describe:function(l){var h={name:"Tizen"},g=u.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/qupzilla/i],describe:function(l){var h={name:"QupZilla"},g=u.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/firefox|iceweasel|fxios/i],describe:function(l){var h={name:"Firefox"},g=u.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/electron/i],describe:function(l){var h={name:"Electron"},g=u.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/MiuiBrowser/i],describe:function(l){var h={name:"Miui"},g=u.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/chromium/i],describe:function(l){var h={name:"Chromium"},g=u.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/chrome|crios|crmo/i],describe:function(l){var h={name:"Chrome"},g=u.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/GSA/i],describe:function(l){var h={name:"Google Search"},g=u.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:function(l){var h=!l.test(/like android/i),g=l.test(/android/i);return h&&g},describe:function(l){var h={name:"Android Browser"},g=u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/playstation 4/i],describe:function(l){var h={name:"PlayStation 4"},g=u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/safari|applewebkit/i],describe:function(l){var h={name:"Safari"},g=u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/.*/i],describe:function(l){var h=l.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:u.default.getFirstMatch(h,l),version:u.default.getSecondMatch(h,l)}}}];s.default=b,a.exports=s.default},93:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=i(18),b=[{test:[/Roku\/DVP/],describe:function(l){var h=u.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,l);return{name:p.OS_MAP.Roku,version:h}}},{test:[/windows phone/i],describe:function(l){var h=u.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.WindowsPhone,version:h}}},{test:[/windows /i],describe:function(l){var h=u.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,l),g=u.default.getWindowsVersionName(h);return{name:p.OS_MAP.Windows,version:h,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(l){var h={name:p.OS_MAP.iOS},g=u.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,l);return g&&(h.version=g),h}},{test:[/macintosh/i],describe:function(l){var h=u.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,l).replace(/[_\s]/g,"."),g=u.default.getMacOSVersionName(h),O={name:p.OS_MAP.MacOS,version:h};return g&&(O.versionName=g),O}},{test:[/(ipod|iphone|ipad)/i],describe:function(l){var h=u.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,l).replace(/[_\s]/g,".");return{name:p.OS_MAP.iOS,version:h}}},{test:function(l){var h=!l.test(/like android/i),g=l.test(/android/i);return h&&g},describe:function(l){var h=u.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,l),g=u.default.getAndroidVersionName(h),O={name:p.OS_MAP.Android,version:h};return g&&(O.versionName=g),O}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var h=u.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,l),g={name:p.OS_MAP.WebOS};return h&&h.length&&(g.version=h),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var h=u.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,l)||u.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,l)||u.default.getFirstMatch(/\bbb(\d+)/i,l);return{name:p.OS_MAP.BlackBerry,version:h}}},{test:[/bada/i],describe:function(l){var h=u.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.Bada,version:h}}},{test:[/tizen/i],describe:function(l){var h=u.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.Tizen,version:h}}},{test:[/linux/i],describe:function(){return{name:p.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:p.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(l){var h=u.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.PlayStation4,version:h}}}];s.default=b,a.exports=s.default},94:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=i(18),b=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(l){var h=u.default.getFirstMatch(/(can-l01)/i,l)&&"Nova",g={type:p.PLATFORMS_MAP.mobile,vendor:"Huawei"};return h&&(g.model=h),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(l){var h=l.test(/ipod|iphone/i),g=l.test(/like (ipod|iphone)/i);return h&&!g},describe:function(l){var h=u.default.getFirstMatch(/(ipod|iphone)/i,l);return{type:p.PLATFORMS_MAP.mobile,vendor:"Apple",model:h}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName(!0)==="blackberry"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(l){return l.getBrowserName(!0)==="bada"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName()==="windows phone"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(l){var h=Number(String(l.getOSVersion()).split(".")[0]);return l.getOSName(!0)==="android"&&h>=3},describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(l){return l.getOSName(!0)==="android"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getOSName(!0)==="macos"},describe:function(){return{type:p.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(l){return l.getOSName(!0)==="windows"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="linux"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="playstation 4"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}},{test:function(l){return l.getOSName(!0)==="roku"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}}];s.default=b,a.exports=s.default},95:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=i(18),b=[{test:function(l){return l.getBrowserName(!0)==="microsoft edge"},describe:function(l){if(/\sedg\//i.test(l))return{name:p.ENGINE_MAP.Blink};var h=u.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,l);return{name:p.ENGINE_MAP.EdgeHTML,version:h}}},{test:[/trident/i],describe:function(l){var h={name:p.ENGINE_MAP.Trident},g=u.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:function(l){return l.test(/presto/i)},describe:function(l){var h={name:p.ENGINE_MAP.Presto},g=u.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:function(l){var h=l.test(/gecko/i),g=l.test(/like gecko/i);return h&&!g},describe:function(l){var h={name:p.ENGINE_MAP.Gecko},g=u.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:p.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(l){var h={name:p.ENGINE_MAP.WebKit},g=u.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}}];s.default=b,a.exports=s.default}})})});I();I();I();I();var Se=(u,p,b,...l)=>ae(void 0,[u,p,b,...l],function*(a,s,i,c={}){let h=yield fetch(a,{method:s,headers:pe({"Content-Type":"application/json"},c),body:i?JSON.stringify(i):null});if(!h.ok)throw h;try{return yield h.json()}catch(g){return h.ok}});I();var bu=Jt(vu()),se=class{constructor(s){this.debug=(0,bu.default)(s)}log(s,...i){this.debug(s,...i)}};I();I();var ju=Jt(Qu());var ne=class{constructor(s={}){this.subscribe=s=>{this.callbacks.push(s)};this.unsubscribe=s=>{this.callbacks=this.callbacks.filter(i=>i!==s)};this.publish=(...s)=>{!this.callbacks||this.callbacks.forEach(i=>{this.callListener(i,s).catch(c=>{this.logger.log("superviz-sdk:observer-helper:publish:error",`
            Failed to execute callback on publish value.
            Callback: ${i}
            Event: ${JSON.stringify(s)}
            Error: ${c}
          `)})})};this.reset=()=>{this.callbacks=[]};this.destroy=()=>{delete this.logger,delete this.callbacks};this.callListener=(s,i)=>new Promise((c,u)=>{try{let p=s(...i);c(p)}catch(p){u(p)}});let{logger:i,throttleTime:c}=s;this.logger=i!=null?i:new se("@superviz/sdk/observer-helper"),this.throttle=c,this.callbacks=[],this.throttle&&(this.publish=(0,ju.default)(this.publish,this.throttle))}};var Gn=class{constructor(){this.observers={};this.subscribe=(s,i)=>{this.logger.log(`subscribed to ${s} event`),this.observers[s]||(this.observers[s]=new ne({logger:this.logger})),this.observers[s].subscribe(i)};this.unsubscribe=(s,i)=>{if(this.logger.log(`unsubscribed from ${s} event`),!!this.observers[s]){if(!i){this.observers[s].destroy(),delete this.observers[s];return}this.observers[s].unsubscribe(i)}};this.publish=(s,i)=>{s in this.observers&&this.observers[s].publish(i)}}};I();I();I();var el=Jt(kn()),bs=class{setConfig(s){this.configuration=s}get(s,i){return this.configuration?el.default.get(this.configuration,s,i):i}},q=new bs;var je=class{static createUrl(s,i,c={}){let u=new URL(i,s);return Object.keys(c).forEach(p=>u.searchParams.append(p,c[p])),u.toString()}static validateApiKey(s,i){let c="/user/checkapikey",u=this.createUrl(s,c);return Se(u,"POST",{apiKey:i})}static fetchConfig(s,i){let c="/immersive-config",u=this.createUrl(s,c);return Se(u,"POST",{apiKey:i})}static fetchLimits(s,i){return ae(this,null,function*(){let c="/user/check_limits",u=this.createUrl(s,c);return(yield Se(u,"GET","",{apikey:i})).usage})}static fetchWaterMark(s,i){return ae(this,null,function*(){let c="/user/watermark",u=this.createUrl(s,c),{message:p}=yield Se(u,"POST",{apiKey:i});return p})}static createAnnotations(s,i,c){return ae(this,null,function*(){let u="/annotations",p=this.createUrl(s,u);return Se(p,"POST",pe({},c),{apikey:i})})}static updateComment(s,i,c,u){return ae(this,null,function*(){let p=`/comments/${c}`,b=this.createUrl(s,p);return Se(b,"PUT",{text:u},{apikey:i})})}static createComment(s,i,c){return ae(this,null,function*(){let u="/comments",p=this.createUrl(s,u);return Se(p,"POST",pe({},c),{apikey:i})})}static fetchAnnotation(s,i,c){return ae(this,null,function*(){let u="/annotations",p=this.createUrl(s,u,{roomId:c.roomId,url:c.url});return Se(p,"GET",void 0,{apikey:i})})}static resolveAnnotation(s,i,c){return ae(this,null,function*(){let u=`/annotations/resolve/${c}`,p=this.createUrl(s,u);return Se(p,"POST",{},{apikey:i})})}static deleteComment(s,i,c){return ae(this,null,function*(){let u=`/comments/${c}`,p=this.createUrl(s,u);return Se(p,"DELETE",{},{apikey:i})})}static deleteAnnotation(s,i,c){return ae(this,null,function*(){let u=`/annotations/${c}`,p=this.createUrl(s,u);return Se(p,"DELETE",{},{apikey:i})})}static createOrUpdateParticipant(s){return ae(this,null,function*(){let i=q.get("apiUrl"),c="/participants",u=this.createUrl(i,c);return Se(u,"POST",pe({},s),{apikey:q.get("apiKey")})})}static sendActivity(s,i,c,u){return ae(this,null,function*(){let p="/activity",b=q.get("apiUrl"),l=q.get("roomId"),h=q.get("apiKey"),g=this.createUrl(b,p);return Se(g,"POST",{groupId:i,groupName:c,meetingId:l,product:u,userId:s},{apikey:h})})}static validadeParticipantIsEnteringTwice(s,i,c,u){return ae(this,null,function*(){let p=window.btoa(u),l=`https://rest.ably.io/channels/${`superviz:${i.toLowerCase()}-${c}`}/presence`;try{return(yield(yield fetch(l,{headers:{Authorization:`Basic ${p}`}})).json()).some(T=>JSON.parse(T.data).id===s.id)}catch(h){throw new Error("Failed to fetch realtime participants")}})}};I();var et=class extends Gn{constructor(){super(...arguments);this.isAttached=!1;this.attach=i=>{if(Object.values(i).includes(null)||Object.values(i).includes(void 0)){let h=`${this.name} @ attach - params are required`;throw this.logger.log(h),new Error(h)}let{realtime:c,localParticipant:u,group:p,config:b,eventBus:l}=i;if(!c.isDomainWhitelisted){let h=`Component ${this.name} can't be used because this website's domain is not whitelisted. Please add your domain in https://dashboard.superviz.com/developer`;this.logger.log(h);return}if(q.setConfig(b),this.realtime=c,this.localParticipant=u,this.group=p,this.eventBus=l,this.isAttached=!0,!this.realtime.isJoinedRoom){this.logger.log(`${this.name} @ attach - not joined yet`),setTimeout(()=>{this.logger.log(`${this.name} @ attach - retrying`),this.attach(i)},1e3);return}this.logger.log(`${this.name} @ attached`),this.start()};this.detach=()=>{if(!this.isAttached){this.logger.log(`${this.name} @ detach - component is not attached}`);return}this.logger.log("detached"),this.destroy(),Object.values(this.observers).forEach(i=>{i.reset(),i.destroy()}),this.observers=void 0,this.realtime=void 0,this.localParticipant=void 0,this.isAttached=!1}}};I();I();var _s=(i=>(i.LEFT="left",i.RIGHT="right",i))(_s||{}),Es=(u=>(u.TOP_LEFT="top-left",u.TOP_RIGHT="top-right",u.BOTTOM_LEFT="bottom-left",u.BOTTOM_RIGHT="bottom-right",u))(Es||{});var As=class extends et{constructor(i,c){super();this.sidebarOpen=!1;this.onPinFixed=i=>{this.coordinates=i};this.toggleAnnotationSidebar=()=>{this.element.toggleAttribute("open"),this.sidebarOpen=this.element.hasAttribute("open"),this.pinAdapter.setActive(this.sidebarOpen),document.body.dispatchEvent(new CustomEvent("prepare-to-create-annotation",{detail:void 0,composed:!0,bubbles:!0})),document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0}))};this.onSelectAnnotation=i=>{this.sidebarOpen||this.toggleAnnotationSidebar()};this.positionFloatingButton=()=>{var h,g;this.button=document.createElement("superviz-comments-button");let i=(h=this.layoutOptions)==null?void 0:h.buttonLocation,c=(g=this.layoutOptions)==null?void 0:g.position;if(!i){document.body.appendChild(this.button),this.button.commentsPosition=c;return}let u="",p=Object.values(Es),b=!1,l=!p.includes(i.toLocaleLowerCase());if(l){let O=window.document.body.querySelector(`#${i}`);O?(O.appendChild(this.button),u="position: relative"):(b=!0,i="top-left")}if(!l||b){document.body.appendChild(this.button);let[O,T]=i.split("-");u=`${O}: 20px; ${T}: 20px;`}this.button.positionStyles=u,this.button.commentsPosition=c};this.positionComments=()=>{var b;this.element=document.createElement("superviz-comments"),this.element.setAttribute("comments",JSON.stringify([])),this.element.side="left: 0;",document.body.appendChild(this.element);let i=(b=this.layoutOptions)==null?void 0:b.position;if(!i)return;let c=Object.values(_s),u=i.toLocaleLowerCase();if(!c.includes(u))return;let p=i==="left"?"left: 0;":"right: 0;";this.element.side=p};this.createAnnotation=c=>ae(this,[c],function*({detail:i}){try{let{text:u}=i,{url:p}=this,b=pe({},this.coordinates),l=yield je.createAnnotations(q.get("apiUrl"),q.get("apiKey"),{roomId:q.get("roomId"),position:JSON.stringify(b),url:p,userId:this.localParticipant.id}),h=yield this.createComment(l.uuid,u);this.addAnnotation(ut(pe({},l),{comments:[h]})),this.pinAdapter.removeAnnotationPin("temporary-pin"),document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:l.uuid,haltGoToPin:!0},composed:!0,bubbles:!0}))}catch(u){this.logger.log("error when creating annotation",u)}});this.deleteAnnotation=c=>ae(this,[c],function*({detail:i}){try{let{uuid:u}=i;yield je.deleteAnnotation(q.get("apiUrl"),q.get("apiKey"),u);let p=this.annotations.filter(b=>b.uuid!==u);this.updateAnnotationList(p),this.pinAdapter.removeAnnotationPin(u),this.element.updateAnnotations(this.annotations)}catch(u){this.logger.log("error when deleting annotation",u)}});this.updateComment=c=>ae(this,[c],function*({detail:i}){try{let{uuid:u,text:p}=i;yield je.updateComment(q.get("apiUrl"),q.get("apiKey"),u,p);let b=this.annotations.map(l=>Object.assign({},l,{comments:l.comments.map(h=>h.uuid===u?Object.assign({},h,{text:p}):h)}));this.updateAnnotationList(b)}catch(u){this.logger.log("error when updating comment",u)}});this.resolveAnnotation=c=>ae(this,[c],function*({detail:i}){try{let{uuid:u}=i,{resolved:p}=yield je.resolveAnnotation(q.get("apiUrl"),q.get("apiKey"),u),b=this.annotations.map(l=>l.uuid===u?Object.assign({},l,{resolved:p}):l);if(this.updateAnnotationList(b),p){this.pinAdapter.removeAnnotationPin(u);return}this.pinAdapter.updateAnnotations(this.annotations)}catch(u){this.logger.log("error when resolve annotation",u)}});this.deleteComment=c=>ae(this,[c],function*({detail:i}){try{let{uuid:u,annotationId:p}=i;if(!u||!p)return;yield je.deleteComment(q.get("apiUrl"),q.get("apiKey"),u);let b=this.annotations.find(h=>h.uuid===p);b.comments=b.comments.filter(h=>h.uuid!==u);let l=this.annotations.map(h=>h.uuid===p?b:h);this.element.updateAnnotations(l),this.updateAnnotationList(l)}catch(u){this.logger.log("error when deleting comment",u)}});this.onAnnotationListUpdate=i=>{let{data:c,clientId:u}=i;this.localParticipant.id!==u&&(this.annotations=c,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations))};this.name="comments",this.logger=new se("@superviz/sdk/comments-component"),this.annotations=[],this.layoutOptions=c!=null?c:{position:"left",buttonLocation:"top-left"},setTimeout(()=>{var u,p,b,l,h;i.setCommentsMetadata((p=(u=this.layoutOptions)==null?void 0:u.position)!=null?p:"left",(l=(b=this.localParticipant)==null?void 0:b.avatar)==null?void 0:l.imageUrl,(h=this.localParticipant)==null?void 0:h.name)}),this.pinAdapter=i}get url(){let i=new URL(this.clientUrl);return i.search="",i.toString()}start(){this.clientUrl=window.location.href,this.positionComments(),this.positionFloatingButton(),this.fetchAnnotations(),this.waterMarkState(),this.addListeners(),this.pinAdapter.setPinsVisibility(!0)}destroy(){this.logger.log("comments component @ destroy"),this.destroyListeners(),this.button.remove(),this.element.remove(),this.element=void 0,this.pinAdapter.destroy()}addListeners(){this.button.addEventListener("toggle",this.toggleAnnotationSidebar),this.element.addEventListener("toggle",this.toggleAnnotationSidebar),document.body.addEventListener("create-annotation",this.createAnnotation),this.element.addEventListener("resolve-annotation",this.resolveAnnotation),this.element.addEventListener("delete-annotation",this.deleteAnnotation),this.element.addEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,!0)}),this.element.addEventListener("update-comment",this.updateComment),this.element.addEventListener("delete-comment",this.deleteComment),document.body.addEventListener("select-annotation",this.onSelectAnnotation),this.realtime.commentsObserver.subscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.subscribe(this.onPinFixed)}destroyListeners(){this.button.removeEventListener("toggle",this.toggleAnnotationSidebar),this.element.removeEventListener("toggle",this.toggleAnnotationSidebar),this.element.removeEventListener("create-annotation",this.createAnnotation),this.element.removeEventListener("resolve-annotation",this.resolveAnnotation),this.element.removeEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,!0)}),this.element.removeEventListener("update-comment",this.updateComment),this.element.removeEventListener("delete-comment",this.deleteComment),document.body.removeEventListener("select-annotation",this.onSelectAnnotation),this.realtime.commentsObserver.unsubscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.unsubscribe(this.onPinFixed)}createComment(i,c,u=!1){return ae(this,null,function*(){try{let p=yield je.createComment(q.get("apiUrl"),q.get("apiKey"),{annotationId:i,userId:this.localParticipant.id,text:c});return u&&this.addComment(i,p),p}catch(p){this.logger.log("error when creating comment",p)}})}addAnnotation(i){let c=[i,...this.annotations];this.element.updateAnnotations(c),this.pinAdapter.updateAnnotations(c),this.updateAnnotationList(c)}updateAnnotationList(i){this.annotations=i,this.realtime.updateComments(i)}addComment(i,c){let u=this.annotations.find(b=>b.uuid===i);u.comments.push(c);let p=this.annotations.map(b=>b.uuid===i?u:b);this.updateAnnotationList(p),this.element.updateAnnotations(p)}fetchAnnotations(){return ae(this,null,function*(){try{let i=yield je.fetchAnnotation(q.get("apiUrl"),q.get("apiKey"),{roomId:q.get("roomId"),url:this.url});this.annotations=i,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations)}catch(i){this.logger.log("error when fetching annotations",i)}})}waterMarkState(){return ae(this,null,function*(){try{let i=yield je.fetchWaterMark(q.get("apiUrl"),q.get("apiKey"));this.element.waterMarkStatus(i)}catch(i){this.logger.log("error when fetching waterMark",i)}})}};I();I();var Ts=class{constructor(s,i){this.isPinsVisible=!0;this.selectedPin=null;this.temporaryPinCoordinates=null;this.commentsSide="left";this.localParticipant={};this.setCommentsMetadata=(s,i,c)=>{this.commentsSide=s,this.localParticipant.avatar=i,this.localParticipant.name=c};this.resetPins=s=>{s&&(s==null?void 0:s.key)!=="Escape"||(this.resetSelectedPin(),this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};this.animate=()=>{(this.isActive||this.isPinsVisible)&&(this.renderAnnotationsPins(),this.divWrapper=this.renderDivWrapper()),this.temporaryPinCoordinates&&this.renderTemporaryPin(),requestAnimationFrame(this.animate)};this.setMouseDownCoordinates=({x:s,y:i})=>{this.mouseDownCoordinates={x:s,y:i}};this.annotationSelected=({detail:{uuid:s,haltGoToPin:i}})=>{var p,b;if(!s)return;let c=JSON.parse((b=(p=this.selectedPin)==null?void 0:p.getAttribute("annotation"))!=null?b:"{}");if(this.resetPins(),(c==null?void 0:c.uuid)===s)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let u=this.pins.get(s);!u||(u.setAttribute("active",""),this.selectedPin=u,!i&&this.goToPin(s))};this.onClick=s=>{if(!this.isActive)return;let i=this.canvas.getBoundingClientRect(),{x:c,y:u}=this.mouseDownCoordinates,p=c-i.x,b=u-i.y,l=s.clientX-i.left,h=s.clientY-i.top;if(Math.hypot(l-p,h-b)>10)return;let P=this.canvas.getContext("2d").getTransform().inverse(),L=new DOMPoint(l,h-31).matrixTransform(P);this.onPinFixedObserver.publish({x:L.x,y:L.y,type:"canvas"}),this.resetSelectedPin(),this.temporaryPinCoordinates={x:L.x,y:L.y},this.renderTemporaryPin();let R=document.getElementById("superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,R.setAttribute("movedPosition",String(this.movedTemporaryPin)),!this.selectedPin&&document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onToggleAnnotationSidebar=({detail:s})=>{let{open:i}=s;i||(this.pins.forEach(c=>{c.removeAttribute("active")}),this.pins.has("temporary-pin")&&this.removeAnnotationPin("temporary-pin"))};this.hideTemporaryPin=s=>{var c;let i=s.target;this.canvas.contains(i)||((c=this.pins.get("temporary-pin"))==null?void 0:c.contains(i))||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};if(this.logger=new se("@superviz/sdk/comments-component/canvas-pin-adapter"),this.canvas=document.getElementById(s),this.isActive=!1,this.pins=new Map,this.goToPinCallback=i==null?void 0:i.onGoToPin,!this.canvas){let c=`Canvas with id ${s} not found`;throw this.logger.log(c),new Error(c)}this.canvasSides=this.canvas.getBoundingClientRect(),document.body.style.position="relative",this.onPinFixedObserver=new ne({logger:this.logger}),this.divWrapper=this.renderDivWrapper(),this.annotations=[],this.renderAnnotationsPins(),this.animateFrame=requestAnimationFrame(this.animate)}destroy(){this.removeListeners(),this.removeAnnotationsPins(),this.pins=new Map,this.divWrapper.remove(),this.onPinFixedObserver.destroy(),this.onPinFixedObserver=null,this.canvas.style.cursor="default",this.annotations=[],cancelAnimationFrame(this.animateFrame)}setPinsVisibility(s){if(this.isPinsVisible=s,this.isPinsVisible){this.renderAnnotationsPins();return}this.removeAnnotationsPins()}setActive(s){if(this.isActive=s,this.isActive){this.originalCanvasCursor=this.canvas.style.cursor,this.canvas.style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.addListeners();return}this.resetPins(),this.removeListeners(),this.canvas.style.cursor=this.originalCanvasCursor}updateAnnotations(s){this.logger.log("updateAnnotations",s),this.annotations=s,!(!this.isActive&&!this.isPinsVisible)&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}removeAnnotationPin(s){let i=this.pins.get(s);!i||(i.remove(),this.pins.delete(s),s!=="temporary-pin"&&(this.annotations=this.annotations.filter(c=>c.uuid!==s)))}renderTemporaryPin(){var O,T;let s=document.getElementById("superviz-temporary-pin");s||(s=document.createElement("superviz-comments-annotation-pin"),s.id="superviz-temporary-pin",s.setAttribute("type","add"),s.setAttribute("showInput",""),s.setAttribute("containerSides",JSON.stringify(this.canvasSides)),s.setAttribute("commentsSide",this.commentsSide),s.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),s.setAttribute("annotation",JSON.stringify({})),s.setAttribute("localAvatar",(O=this.localParticipant.avatar)!=null?O:""),s.setAttribute("localName",(T=this.localParticipant.name)!=null?T:""),s.setAttributeNode(document.createAttribute("active")),this.divWrapper.appendChild(s));let{x:i,y:c}=this.temporaryPinCoordinates,p=this.canvas.getContext("2d").getTransform(),b=p.e,l=p.f,h=i+b,g=c+l;s.setAttribute("position",JSON.stringify({x:h,y:g})),this.pins.set("temporary-pin",s)}addListeners(){this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.setMouseDownCoordinates),document.body.addEventListener("keyup",this.resetPins),document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){this.canvas.removeEventListener("click",this.onClick),this.canvas.removeEventListener("mousedown",this.setMouseDownCoordinates),document.body.removeEventListener("keyup",this.resetPins),document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}resetSelectedPin(){!this.selectedPin||(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}renderDivWrapper(){let s=this.canvas.getBoundingClientRect(),i=this.divWrapper;return i||(i=document.createElement("div"),i.id="superviz-canvas-wrapper",["","static"].includes(this.canvas.parentElement.style.position)&&(this.canvas.parentElement.style.position="relative")),i.style.position="absolute",i.style.top=`${this.canvas.offsetTop}px`,i.style.left=`${this.canvas.offsetLeft}px`,i.style.width=`${s.width}px`,i.style.height=`${s.height}px`,i.style.pointerEvents="none",i.style.overflow="hidden",document.getElementById("superviz-canvas-wrapper")||this.canvas.parentElement.appendChild(i),i}renderAnnotationsPins(){if((!this.annotations.length||this.canvas.style.display==="none")&&!this.pins.get("temporary-pin")){this.removeAnnotationsPins();return}this.annotations.forEach(s=>{if(s.resolved)return;let i=JSON.parse(s.position);if((i==null?void 0:i.type)!=="canvas")return;let{x:c,y:u}=i,b=this.canvas.getContext("2d").getTransform(),l=b.e,h=b.f,g=c+l,O=u+h;if(this.pins.has(s.uuid)){let P=this.pins.get(s.uuid);if(this.divWrapper.clientWidth>g&&this.divWrapper.clientHeight>O){P.setAttribute("style","opacity: 1"),this.pins.get(s.uuid).setAttribute("position",JSON.stringify({x:g,y:O}));return}P.setAttribute("style","opacity: 0");return}let T=document.createElement("superviz-comments-annotation-pin");T.setAttribute("type","show"),T.setAttribute("annotation",JSON.stringify(s)),T.setAttribute("position",JSON.stringify({x:g,y:O})),T.id=s.uuid,this.divWrapper.appendChild(T),this.pins.set(s.uuid,T)})}removeAnnotationsPins(){this.pins.forEach(s=>{s.remove()}),this.pins.clear()}goToPin(s){let i=this.annotations.find(L=>L.uuid===s);if(!i)return;let c=JSON.parse(i.position);if((c==null?void 0:c.type)!=="canvas")return;let u=this.canvas.getBoundingClientRect(),{width:p,height:b}=u,{x:l,y:h}=c,g=p/2,O=b/2,T=g-l,P=O-h;this.goToPinCallback&&this.goToPinCallback({x:T,y:P})}};I();var tl=Jt(kn());var Ps=class{constructor(s,i={}){this.localParticipant={};this.isPinsVisible=!0;this.selectedPin=null;this.dataAttribute="data-superviz-id";this.commentsSide="left";this.temporaryPinCoordinates={};this.elementsWithDataId={};this.divWrappers=new Map;this.voidElementsWrappers=new Map;this.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];this.animate=()=>{this.voidElementsWrappers&&(this.updatePinsPositions(),this.animateFrame=requestAnimationFrame(this.animate))};this.setCommentsMetadata=(s,i,c)=>{this.commentsSide=s,this.localParticipant.avatar=i,this.localParticipant.name=c};this.hideTemporaryPin=s=>{let i=s.target;this.divWrappers.forEach(c=>{var u;c.contains(i)||((u=this.pins.get("temporary-pin"))==null?void 0:u.contains(i))||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={})})};this.resetPins=s=>{s&&(s==null?void 0:s.key)!=="Escape"||(this.resetSelectedPin(),this.temporaryPinCoordinates.elementId&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={}))};this.annotationSelected=({detail:{uuid:s}})=>{if(!s)return;let i=this.annotations.find(p=>{var b;return p.uuid===((b=this.selectedPin)==null?void 0:b.id)});if(this.resetPins(),(i==null?void 0:i.uuid)===s)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let c=this.pins.get(s);if(!c)return;c.setAttribute("active",""),this.selectedPin=c;let u=this.annotations.find(p=>p.uuid===s);this.selectedPin.setAttribute("elementId",JSON.parse(u.position).elementId)};this.onClick=s=>{if(!this.isActive||s.target===this.pins.get("temporary-pin"))return;let i=s.target,c=s.currentTarget;if(i!==c&&this.pins.has(i.id))return;let u=c.getAttribute("data-wrapper-id"),p=c.getBoundingClientRect(),{x:b,y:l}=this.mouseDownCoordinates,h=s.clientX-p.left,g=s.clientY-p.top,O=b-p.x,T=l-p.y;if(Math.hypot(h-O,g-T)>10)return;let{width:L,height:R}=c.getBoundingClientRect(),N=32,$=c.getBoundingClientRect().width/c.offsetWidth||1;h=h*100/L,g=(g-N*$)*100/R,this.onPinFixedObserver.publish({x:h,y:g,type:"html",elementId:u}),this.resetSelectedPin(),this.temporaryPinCoordinates=ut(pe({},this.temporaryPinCoordinates),{x:h,y:g}),this.renderTemporaryPin(u);let J=this.divWrappers.get(u).querySelector("#superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,J.setAttribute("movedPosition",String(this.movedTemporaryPin)),document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onMouseDown=({x:s,y:i})=>{this.mouseDownCoordinates={x:s,y:i}};this.handleMutationObserverChanges=s=>{s.forEach(i=>{var g;let{target:c,oldValue:u}=i,p=c.getAttribute(this.dataAttribute);if(!p&&!u||p===u)return;let b=this.dataAttributeValueFilters.some(O=>u.match(O));if(!p&&u&&!b){this.removeAnnotationPin("temporary-pin"),this.clearElement(u),((g=this.selectedPin)==null?void 0:g.getAttribute("elementId"))===u&&(document.body.dispatchEvent(new CustomEvent("unselect-annotation")),this.selectedPin=null);return}let h=this.dataAttributeValueFilters.some(O=>p.match(O));(u&&this.elementsWithDataId[u]||h)&&this.clearElement(u),!h&&(this.setElementReadyToPin(c,p),this.renderAnnotationsPins())})};this.onToggleAnnotationSidebar=({detail:s})=>{let{open:i}=s;i||(this.resetSelectedPin(),this.pins.has("temporary-pin")&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates.elementId=void 0))};if(this.logger=new se("@superviz/sdk/comments-component/container-pin-adapter"),this.container=document.getElementById(s),!this.container){let p=`Element with id ${s} not found`;throw this.logger.log(p),new Error(p)}if(typeof i!="object")throw new Error("Second argument of the HTMLPin constructor must be an object");let{dataAttributeName:c,dataAttributeValueFilters:u}=i;if(c==="")throw new Error("dataAttributeName must be a non-empty string");if(c===null)throw new Error("dataAttributeName cannot be null");if(c!==void 0&&typeof c!="string")throw new Error("dataAttributeName must be a non-empty string");this.dataAttribute=c||this.dataAttribute,this.dataAttributeValueFilters=u||[],this.isActive=!1,this.prepareElements(),this.mutationObserver=new MutationObserver(this.handleMutationObserverChanges),this.observeContainer(),this.pins=new Map,this.onPinFixedObserver=new ne({logger:this.logger}),this.annotations=[],document.body.addEventListener("select-annotation",this.annotationSelected),this.voidElementsWrappers.size&&(this.animateFrame=requestAnimationFrame(this.animate))}destroy(){this.logger.log("Destroying HTML Pin Adapter for Comments"),this.removeListeners(),this.removeObservers(),this.divWrappers.forEach(s=>s.remove()),this.divWrappers.clear(),this.pins.forEach(s=>s.remove()),this.pins.clear(),this.divWrappers=void 0,this.pins=void 0,this.elementsWithDataId=void 0,this.logger=void 0,this.onPinFixedObserver.destroy(),this.onPinFixedObserver=void 0,this.container=void 0,this.voidElementsWrappers.clear(),this.voidElementsWrappers=void 0,this.annotations=[],document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),cancelAnimationFrame(this.animateFrame)}addElementListeners(s){this.divWrappers.get(s).addEventListener("click",this.onClick,!0),this.divWrappers.get(s).addEventListener("mousedown",this.onMouseDown)}removeElementListeners(s){this.divWrappers.get(s).removeEventListener("click",this.onClick,!0),this.divWrappers.get(s).removeEventListener("mousedown",this.onMouseDown)}removeObservers(){this.mutationObserver.disconnect(),this.mutationObserver=void 0}addListeners(){Object.keys(this.elementsWithDataId).forEach(s=>this.addElementListeners(s)),document.body.addEventListener("keyup",this.resetPins),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){Object.keys(this.elementsWithDataId).forEach(s=>this.removeElementListeners(s)),document.body.removeEventListener("keyup",this.resetPins),document.body.removeEventListener("click",this.hideTemporaryPin)}observeContainer(){this.mutationObserver.observe(this.container,{subtree:!0,attributes:!0,attributeFilter:[this.dataAttribute],attributeOldValue:!0})}prepareElements(){this.container.querySelectorAll(`[${this.dataAttribute}]`).forEach(i=>{let c=i.getAttribute(this.dataAttribute);this.dataAttributeValueFilters.some((p,b)=>c.match(p))||this.setElementReadyToPin(i,c)})}setAddCursor(){Object.keys(this.elementsWithDataId).forEach(s=>{this.divWrappers.get(s).style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.divWrappers.get(s).style.pointerEvents="auto"})}removeAddCursor(){Object.keys(this.elementsWithDataId).forEach(s=>{this.divWrappers.get(s).style.cursor="default",this.divWrappers.get(s).style.pointerEvents="none"})}setPinsVisibility(s){this.isPinsVisible=s,this.isPinsVisible&&this.renderAnnotationsPins(),this.removeAnnotationsPins()}removeAnnotationPin(s){let i=this.pins.get(s);!i&&s==="temporary-pin"||(i&&(i.remove(),this.pins.delete(s)),s!=="temporary-pin"&&(this.annotations=this.annotations.filter(c=>c.uuid!==s)))}updateAnnotations(s){this.logger.log("updateAnnotations",s),this.annotations=s,this.isPinsVisible&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}setActive(s){if(this.isActive=s,this.isActive){this.addListeners(),this.setAddCursor(),this.prepareElements();return}this.removeListeners(),this.removeAddCursor()}renderTemporaryPin(s){var p,b,l;(p=this.temporaryPinCoordinates).elementId||(p.elementId=s);let i=this.pins.get("temporary-pin");if(s&&s!==this.temporaryPinCoordinates.elementId&&(this.pins.get("temporary-pin").remove(),this.pins.delete("temporary-pin"),this.temporaryPinCoordinates.elementId=s,i=null),!i){let h=this.elementsWithDataId[s].getBoundingClientRect();i=document.createElement("superviz-comments-annotation-pin"),i.id="superviz-temporary-pin",i.setAttribute("type","add"),i.setAttribute("showInput",""),i.setAttribute("containerSides",JSON.stringify(h)),i.setAttribute("commentsSide",this.commentsSide),i.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),i.setAttribute("annotation",JSON.stringify({})),i.setAttribute("localAvatar",(b=this.localParticipant.avatar)!=null?b:""),i.setAttribute("localName",(l=this.localParticipant.name)!=null?l:""),i.setAttribute("keepPositionRatio",""),i.setAttributeNode(document.createAttribute("active")),this.addTemporaryPinToElement(s,i)}let{x:c,y:u}=this.temporaryPinCoordinates;i.setAttribute("position",JSON.stringify({x:c,y:u})),this.pins.set("temporary-pin",i)}renderAnnotationsPins(){if(!this.annotations.length){this.removeAnnotationsPins();return}this.annotations.forEach(s=>{if(s.resolved)return;let{x:i,y:c,elementId:u,type:p}=JSON.parse(s.position);if(p!=="html"||this.pins.has(s.uuid)||!this.elementsWithDataId[u])return;let l=this.divWrappers.get(u);if(!l)return;let{width:h,height:g}=l.getBoundingClientRect(),O=this.createPin(s,i,c);l.appendChild(O),this.pins.set(s.uuid,O)})}updatePinsPositions(){this.voidElementsWrappers.forEach((s,i)=>{let c=JSON.stringify(s.getBoundingClientRect()),u=this.elementsWithDataId[i].getBoundingClientRect();(0,tl.isEqual)(JSON.stringify(u),c)||(s.style.setProperty("top",`${u.top}px`),s.style.setProperty("left",`${u.left}px`),s.style.setProperty("width",`${u.width}px`),s.style.setProperty("height",`${u.height}px`))})}clearElement(s){if(!this.elementsWithDataId[s])return;let c=this.divWrappers.get(s);if(c){let u=c.children,{length:p}=u;for(let b=0;b<p;++b){let l=u.item(b);this.pins.delete(l.id)}c.remove()}this.voidElementsWrappers.delete(s),this.removeElementListeners(s),this.divWrappers.delete(s),this.elementsWithDataId[s]=void 0,this.voidElementsWrappers.size||(cancelAnimationFrame(this.animateFrame),this.animateFrame=void 0)}resetSelectedPin(){!this.selectedPin||(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}removeAnnotationsPins(){this.pins.forEach(s=>{s.remove()}),this.pins.clear()}setElementReadyToPin(s,i){if(!this.elementsWithDataId[i]){if(this.elementsWithDataId[i]=s,!this.divWrappers.get(i)){let c=this.createWrapper(s,i);this.divWrappers.set(i,c)}!this.isActive||!this.isPinsVisible||(this.divWrappers.get(i).style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.divWrappers.get(i).style.pointerEvents="auto",this.addElementListeners(i))}}addTemporaryPinToElement(s,i){if(!this.elementsWithDataId[s])return;let u=this.divWrappers.get(s);!u||u.appendChild(i)}createPin(s,i,c){let u=document.createElement("superviz-comments-annotation-pin");return u.setAttribute("type","show"),u.setAttribute("annotation",JSON.stringify(s)),u.setAttribute("position",JSON.stringify({x:i,y:c})),u.setAttribute("keepPositionRatio",""),u.id=s.uuid,u}createWrapper(s,i){let c=s,u=`superviz-id-${i}`;if(this.divWrappers.get(i))return;let p=c.getBoundingClientRect(),b=document.createElement("div");if(b.setAttribute("data-wrapper-id",i),b.id=u,b.style.position="absolute",b.style.pointerEvents="none",b.style.transform="translateX(0) translateY(0) scale(1)",b.style.cursor="default",b.style.top="0",b.style.left="0",b.style.width="100%",b.style.height="100%",!this.VOID_ELEMENTS.includes(this.elementsWithDataId[i].tagName.toLowerCase()))return this.elementsWithDataId[i].appendChild(b),this.setPositionNotStatic(this.elementsWithDataId[i]),b;b.style.position="fixed",b.style.top=`${p.top}px`,b.style.left=`${p.left}px`,b.style.width=`${p.width}px`,b.style.height=`${p.height}px`;let l=this.elementsWithDataId[i].parentElement;return l||(l=document.body),this.setPositionNotStatic(l),l.appendChild(b),this.voidElementsWrappers.set(i,b),this.animateFrame||(this.animateFrame=requestAnimationFrame(this.animate)),b}setPositionNotStatic(s){let{position:i}=window.getComputedStyle(s);i==="static"&&s.style.setProperty("position","relative")}};I();var ws=Jt(kn());I();I();I();var dt=Jt(nl()),Hi=class{constructor(){this.browser=dt.default.getParser(navigator.userAgent)}get clientStats(){return this.browser.getResult()}get isFirefox(){return this.browser.isBrowser(dt.default.BROWSER_MAP.firefox)}get isSafari(){return this.browser.isBrowser(dt.default.BROWSER_MAP.safari)}get isChrome(){return this.browser.isBrowser(dt.default.BROWSER_MAP.chrome)}get isIE(){return this.browser.isBrowser(dt.default.BROWSER_MAP.ie)}get isEdge(){return this.browser.isBrowser(dt.default.BROWSER_MAP.edge)}get isMobileDevice(){return(this.browser.is(dt.default.PLATFORMS_MAP.mobile)||this.browser.is(dt.default.PLATFORMS_MAP.tablet))&&!navigator.userAgent.match(/iPad/i)}get isTabletDevice(){return this.browser.is(dt.default.PLATFORMS_MAP.tablet)}get isAndroid(){return this.isMobileDevice&&!!navigator.userAgent.match(/Android/i)}get isIpad(){return!!navigator.userAgent.match(/iPad/i)}get isIphone(){return this.isMobileDevice&&!!navigator.userAgent.match(/iPhone/i)}get isAppleMobileDevice(){return this.isIpad||this.isIphone}};I();var zi=class{constructor(){this.updateMeetingConnectionStatus=s=>{this.oldConnectionStatus=this.connectionStatus,this.connectionStatus=s,this.connectionStatusObserver.publish(s),this.logger.log("CONNECTION STATUS CHANGE",s)};this.onUpdateBrowserOnlineStatus=s=>{let{type:i}=s;if(i==="online"){this.updateMeetingConnectionStatus(1);return}this.updateMeetingConnectionStatus(4)};this.logger=new se("@superviz/sdk/connection-service"),this.connectionStatus=0,this.connectionStatusObserver=new ne({logger:this.logger})}addListeners(){window.addEventListener("online",this.onUpdateBrowserOnlineStatus),window.addEventListener("offline",this.onUpdateBrowserOnlineStatus)}removeListeners(){window.removeEventListener("online",this.onUpdateBrowserOnlineStatus),window.removeEventListener("offline",this.onUpdateBrowserOnlineStatus)}};I();I();var $i=class{build(s,i,c,u={},p={}){let b=document.querySelector(`#${s}`),l=new URL(i);if(this.wrapperId||this.element)throw new Error("Tried to initialize two frames with the same FrameBricklayer instance");this.element=document.createElement("iframe"),Object.entries(u).forEach(([h,g])=>{l.searchParams.set(h,g)}),Object.entries(p).forEach(([h,g])=>{this.element.setAttribute(h,g)}),this.element.src=l.toString(),this.element.id=c,b.appendChild(this.element),this.wrapperId=s}destroy(){if(!this.wrapperId)throw new Error("Tried to destroy a frame before it was initialized");let s=document.querySelector(`#${this.wrapperId}`);!!s&&!!s.querySelector(`#${this.element.id}`)&&s.removeChild(this.element),this.wrapperId=null,this.element=null}};I();var Vi=class{constructor(s){this.observers={};this.sourceBlockList=["vue-devtools-proxy","vue-devtools-backend"];this.originBlockList=["https://sketchfab.com"];this.publish=(s,i={})=>{this.logger.log("MessageBridge","Posting message to frame",s,i),this.contentWindow.postMessage({type:s,data:i},this.allowedOrigins)};this.listen=(s,i)=>{this.observers[s]||(this.observers[s]=new ne({logger:this.logger})),this.observers[s].subscribe(i)};this.onReceiveMessage=s=>{let{type:i,data:c,source:u}=s.data;if(this.sourceBlockList.includes(u)||this.originBlockList.includes(s.origin))return;let p=!!i,b=!this.domains.length||this.domains.includes(s.origin),l=this.observers.hasOwnProperty(i);if(this.logger.log("MessageBridge",`Message received -
        TYPE: ${s.type}
        ORIGIN: ${s.origin}
        DATA: ${JSON.stringify(s.data)} `),!p||!b||!l){this.logger.log("MessageBridge","Message discarded");return}this.observers[i].publish(c)};let{contentWindow:i,domains:c=[],allowedOrigins:u="*",sourceBlockList:p=[],logger:b}=s;if(this.logger=b,this.domains=c,this.allowedOrigins=u,this.sourceBlockList.push(...p),typeof window=="undefined")throw new Error("MessageBridge: window is undefined");this.contentWindow=i,window.addEventListener("message",this.onReceiveMessage)}destroy(){Object.entries(this.observers).forEach(([s,i])=>{i.reset(),delete this.observers[s]}),window.removeEventListener("message",this.onReceiveMessage),delete this.logger,delete this.allowedOrigins,delete this.contentWindow,delete this.domains,delete this.observers,delete this.sourceBlockList}};I();var il="sv-video-frame",zn=class{constructor(s){this.logger=new se("@superviz/sdk/video-conference-manager");this.frameStateObserver=new ne({logger:this.logger});this.frameSizeObserver=new ne({logger:this.logger});this.waitingForHostObserver=new ne({logger:this.logger});this.realtimeEventsObserver=new ne({logger:this.logger});this.sameAccountErrorObserver=new ne({logger:this.logger});this.devicesObserver=new ne({logger:this.logger});this.meetingStateObserver=new ne({logger:this.logger});this.meetingConnectionObserver=new ne({logger:this.logger});this.participantJoinedObserver=new ne({logger:this.logger});this.participantLeftObserver=new ne({logger:this.logger});this.participantListObserver=new ne({logger:this.logger});this.frameState=0;this.layoutModalsAndCamerasConfig=(s,i)=>{let c=s,u=i,p=["left","right","bottom","top"].includes(u),b=["left","right","center"].includes(c);return p||(u="right"),b||(c="right"),this.browserService.isMobileDevice?(u="bottom",{layoutPosition:c,camerasPosition:u}):(c==="left"&&u==="right"&&(c="right"),c==="right"&&u==="left"&&(c="left"),{layoutPosition:c,camerasPosition:u})};this.onFrameLoad=()=>{this.messageBridge=new Vi({logger:this.logger,contentWindow:this.bricklayer.element.contentWindow}),this.addMessagesListeners(),this.updateFrameState(2),this.updateFrameLocale(),this.updateMeetingAvatars(),this.onWindowResize(),this.setCustomColors()};this.setFrameOffset=s=>{let i=s!=null?s:{};["top","bottom","left","right"].forEach(c=>{Object.keys(i).includes(c)||(i[c]=0)}),this.frameOffset=i};this.setCustomColors=()=>{!this.customColors||this.messageBridge.publish("frame.color-list-update",this.customColors)};this.setFrameStyle=s=>{let i=document.createElement("style"),{bottom:c,left:u,right:p,top:b}=this.frameOffset;if(i.innerHTML=`
      :root {
        --superviz-offset-top: ${b}px;
        --superviz-offset-right: ${p}px;
        --superviz-offset-left: ${u}px;
        --superviz-offset-bottom: ${c}px;
      }     
    `,document.head.appendChild(i),this.browserService.isMobileDevice){this.bricklayer.element.classList.add("sv-video-frame--bottom");return}this.bricklayer.element.classList.add(`sv-video-frame--${s}`)};this.onFrameDimensionsUpdate=({width:s,height:i})=>{let c=document.getElementById(il),{bottom:u,right:p,left:b,top:l}=this.frameOffset,h=this.isWaterMarkEnabled?40:0,g=`${s}px`,O=`${i+h}px`;(s>=window.innerWidth||this.isHorizontalCameraEnabled)&&(g=`calc(100% - ${p}px - ${b}px)`),i>=window.innerHeight&&(O=`calc(100% - ${l}px - ${u}px)`),c.style.width=g,c.style.height=O,this.frameSizeObserver.publish({width:c.offsetWidth,height:c.offsetHeight})};this.onWindowResize=()=>{let{top:s,bottom:i,right:c,left:u}=this.frameOffset,{innerHeight:p,innerWidth:b}=window,l=p-s-i,h=b-c-u;!this.messageBridge||this.messageBridge.publish("frame.parent-window-size-update",{height:l,width:h})};this.updateFrameLocale=()=>{var p,b;if(!this.frameLocale||!((p=this.frameLocale)!=null&&p.language)&&((b=this.frameLocale)==null?void 0:b.locales))return;let{language:s,locales:i}=this.frameLocale,c=i.map(l=>l==null?void 0:l.language),u=["en",...c];if(s&&!u.includes(s))throw new Error("The default language is not available in the language listing.");this.messageBridge.publish("frame.locales-update",this.frameLocale)};this.updateMeetingAvatars=()=>{this.messageBridge.publish("frame.avatar-list-update",this.meetingAvatars)};this.onParticipantJoined=s=>{this.participantJoinedObserver.publish(s)};this.onParticipantLeft=s=>{this.participantLeftObserver.publish(s)};this.onMeetingHostChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.host-change",data:s})};this.onMeetingKickParticipant=s=>{this.realtimeEventsObserver.publish({event:"meeting.kick-participant",data:s})};this.onFollowParticipantDidChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.follow-participant",data:s})};this.onGoToDidChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.go-to-participant",data:s})};this.onGather=()=>{this.realtimeEventsObserver.publish({event:"realtime.gather",data:!0})};this.onGridModeChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.grid-mode-change",data:s})};this.onDrawingChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.drawing-change",data:s})};this.onTranscriptChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.transcript-change",data:s})};this.onSameAccountError=s=>{this.sameAccountErrorObserver.publish(s)};this.onDevicesChange=s=>{this.devicesObserver.publish(s)};this.meetingStateUpdate=s=>{this.meetingStateObserver.publish(s)};this.onConnectionStatusChange=s=>{this.meetingConnectionObserver.publish(s)};this.onWaitingForHostDidChange=s=>{this.waitingForHostObserver.publish(s)};this.onParticipantListUpdate=s=>{this.participantListObserver.publish(s)};var Nt,yt,Dt,Bt;let{language:i,canUseCams:c,canUseChat:u,canUseScreenshare:p,canUseDefaultAvatars:b,canUseFollow:l,canUseGoTo:h,canUseGather:g,canShowAudienceList:O,canUseDefaultToolbar:T,canUseTranscription:P,browserService:L,offset:R,locales:N,avatars:$,customColors:J,waterMark:ce,layoutPosition:fe,camerasPosition:ge,skipMeetingSettings:he,devices:U,layoutMode:me,collaborationMode:Te}=s;this.browserService=L;let ue=this.layoutModalsAndCamerasConfig(fe,ge),Re=document.createElement("div");this.frameConfig={apiKey:q.get("apiKey"),apiUrl:q.get("apiUrl"),ablyKey:q.get("ablyKey"),debug:q.get("debug"),roomId:q.get("roomId"),limits:q.get("limits"),collaborationMode:Te,canUseFollow:l,canUseGoTo:h,canUseCams:c,canUseChat:u,canUseGather:g,canUseScreenshare:p,canUseDefaultAvatars:b,canUseTranscription:P,canShowAudienceList:O,camerasPosition:(Nt=ue.camerasPosition)!=null?Nt:"right",canUseDefaultToolbar:T,devices:{audioInput:(yt=U==null?void 0:U.audioInput)!=null?yt:!0,audioOutput:(Dt=U==null?void 0:U.audioOutput)!=null?Dt:!0,videoInput:(Bt=U==null?void 0:U.videoInput)!=null?Bt:!0},waterMark:ce,layoutMode:me,skipMeetingSettings:he,layoutPosition:ue.layoutPosition},this.customColors=J,Re.classList.add("sv_video_wrapper"),Re.id="sv-video-wrapper",document.body.appendChild(Re),this.updateFrameState(1),this.bricklayer=new $i,this.bricklayer.build(Re.id,q.get("conferenceLayerUrl"),il,void 0,{allow:"camera *;microphone *; display-capture *;"}),this.setFrameOffset(R),this.setFrameStyle(ue.camerasPosition),this.bricklayer.element.addEventListener("load",this.onFrameLoad),this.frameLocale={language:i,locales:N},this.meetingAvatars=$,window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize)}get isWaterMarkEnabled(){return this.browserService.isMobileDevice?!1:this.frameConfig.waterMark}get isHorizontalCameraEnabled(){return this.browserService.isMobileDevice?!1:["top","bottom"].includes(this.frameConfig.camerasPosition)}addMessagesListeners(){this.messageBridge.listen("meeting.waiting-for-host",this.onWaitingForHostDidChange),this.messageBridge.listen("meeting.participant-joined",this.onParticipantJoined),this.messageBridge.listen("meeting.participant-list-update",this.onParticipantListUpdate),this.messageBridge.listen("meeting.participant-left",this.onParticipantLeft),this.messageBridge.listen("meeting.host-change",this.onMeetingHostChange),this.messageBridge.listen("meeting.kick-participant",this.onMeetingKickParticipant),this.messageBridge.listen("meeting.same-participant-error",this.onSameAccountError),this.messageBridge.listen("meeting.state-update",this.meetingStateUpdate),this.messageBridge.listen("meeting.connection-status-change",this.onConnectionStatusChange),this.messageBridge.listen("meeting.devices-change",this.onDevicesChange),this.messageBridge.listen("realtime.grid-mode-change",this.onGridModeChange),this.messageBridge.listen("realtime.drawing-change",this.onDrawingChange),this.messageBridge.listen("realtime.transcript-change",this.onTranscriptChange),this.messageBridge.listen("frame.dimensions-update",this.onFrameDimensionsUpdate),this.messageBridge.listen("realtime.follow-participant",this.onFollowParticipantDidChange),this.messageBridge.listen("realtime.go-to-participant",this.onGoToDidChange),this.messageBridge.listen("realtime.gather",this.onGather)}updateFrameState(s){s!==this.frameState&&(this.frameState=s,this.frameStateObserver.publish(this.frameState));let i={[1]:6,[2]:7,[0]:8};this.meetingStateUpdate(i[s])}start(s){this.messageBridge.publish("meeting.start",ut(pe({},s),{config:this.frameConfig}))}leave(){this.messageBridge.publish("meeting.leave"),this.destroy()}destroy(){var s,i;(s=this.messageBridge)==null||s.destroy(),(i=this.bricklayer)==null||i.destroy(),this.frameSizeObserver.destroy(),this.realtimeEventsObserver.destroy(),this.sameAccountErrorObserver.destroy(),this.devicesObserver.destroy(),this.meetingStateObserver.destroy(),this.meetingConnectionObserver.destroy(),this.participantJoinedObserver.destroy(),this.participantLeftObserver.destroy(),this.bricklayer=null,this.frameState=null}publishMessageToFrame(s,i){this.messageBridge.publish(s,i)}};var Os=class extends et{constructor(i){var c,u;super();this.participantToFrameList=[];this.participantsOnMeeting=[];this.startVideo=()=>{var i,c,u,p,b,l,h,g,O,T,P,L,R,N,$,J,ce,fe,ge,he,U,me,Te,ue,Re,Nt,yt,Dt,Bt,lt,tt,$n,Wt,Be,Vn;this.videoConfig={language:(i=this.params)==null?void 0:i.language,canUseTranscription:((c=this.params)==null?void 0:c.transcriptOff)===!1,canShowAudienceList:(p=(u=this.params)==null?void 0:u.showAudienceList)!=null?p:!0,canUseChat:!((b=this.params)!=null&&b.chatOff),canUseCams:!((l=this.params)!=null&&l.camsOff),canUseScreenshare:!((h=this.params)!=null&&h.screenshareOff),canUseDefaultAvatars:!!((g=this.params)!=null&&g.defaultAvatars)&&!((T=(O=this.localParticipant)==null?void 0:O.avatar)!=null&&T.model3DUrl),canUseGather:!!((P=this.params)!=null&&P.enableGather),canUseFollow:!!((L=this.params)!=null&&L.enableFollow),canUseGoTo:!!((R=this.params)!=null&&R.enableGoTo),canUseDefaultToolbar:($=(N=this.params)==null?void 0:N.defaultToolbar)!=null?$:!0,camerasPosition:(ce=(J=this.params)==null?void 0:J.collaborationMode)==null?void 0:ce.position,devices:(fe=this.params)==null?void 0:fe.devices,skipMeetingSettings:(ge=this.params)==null?void 0:ge.skipMeetingSettings,browserService:this.browserService,offset:(he=this.params)==null?void 0:he.offset,locales:(me=(U=this.params)==null?void 0:U.locales)!=null?me:[],avatars:(ue=(Te=this.params)==null?void 0:Te.avatars)!=null?ue:[],customColors:q.get("colors"),collaborationMode:(yt=(Nt=(Re=this.params)==null?void 0:Re.collaborationMode)==null?void 0:Nt.enabled)!=null?yt:!0,layoutPosition:((Bt=(Dt=this.params)==null?void 0:Dt.collaborationMode)==null?void 0:Bt.enabled)===!1?"center":($n=(tt=(lt=this.params)==null?void 0:lt.collaborationMode)==null?void 0:tt.modalPosition)!=null?$n:"center",layoutMode:(Vn=(Be=(Wt=this.params)==null?void 0:Wt.collaborationMode)==null?void 0:Be.initialView)!=null?Vn:"list",waterMark:this.showWaterMarkType},this.logger.log("video conference @ start video",this.videoConfig),this.videoManager=new zn(this.videoConfig),this.subscribeToVideoEvents()};this.subscribeToVideoEvents=()=>{this.logger.log("video conference @ subscribe to video events"),this.videoManager.meetingConnectionObserver.subscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.subscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.subscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.subscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.subscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.subscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.subscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.subscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.subscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.subscribe(this.onSameAccountError),this.videoManager.devicesObserver.subscribe(this.onDevicesChange)};this.unsubscribeFromVideoEvents=()=>{this.logger.log("video conference @ unsubscribe from video events"),this.videoManager.meetingConnectionObserver.unsubscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.unsubscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.unsubscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.unsubscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.unsubscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.unsubscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.unsubscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.unsubscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.unsubscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.unsubscribe(this.onSameAccountError),this.videoManager.devicesObserver.unsubscribe(this.onDevicesChange)};this.suscribeToRealtimeEvents=()=>{this.logger.log("video conference @ subscribe to realtime events"),this.realtime.kickAllParticipantsObserver.subscribe(this.onKickAllParticipantsDidChange),this.realtime.kickParticipantObserver.subscribe(this.onKickLocalParticipant),this.realtime.participantJoinedObserver.subscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.subscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.subscribe(this.onRealtimeParticipantsDidChange),this.realtime.hostObserver.subscribe(this.onHostParticipantDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("video conference @ unsubscribe from realtime events"),this.realtime.kickAllParticipantsObserver.unsubscribe(this.onKickAllParticipantsDidChange),this.realtime.participantJoinedObserver.unsubscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.unsubscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.unsubscribe(this.onRealtimeParticipantsDidChange),this.realtime.hostObserver.unsubscribe(this.onHostParticipantDidChange)};this.createParticipantFromAblyPresence=i=>{var c;return{id:i.clientId,color:this.realtime.getSlotColor((c=i.data)==null?void 0:c.slotIndex).color,avatar:i.data.avatar,type:i.data.type,name:i.data.name,isHost:this.realtime.hostClientId===i.clientId}};this.onFrameSizeDidChange=i=>{this.publish("frame.dimensions-update",i)};this.onWaitingForHost=i=>{this.publish("meeting.waiting-for-host",i)};this.onConnectionStatusChange=i=>{this.logger.log("video conference @ on connection status change",i);let c=[2,4,3,6];c.includes(i)&&this.realtime.freezeSync(!0),c.includes(this.connectionService.oldConnectionStatus)&&!c.includes(i)&&this.realtime.freezeSync(!1),this.publish("meeting.connection-status-change",i)};this.onMeetingStateChange=i=>{this.logger.log("video conference @ on meeting state change",i),this.publish("meeting.state-update",i)};this.onSameAccountError=i=>{this.publish("meeting.same-participant-error",i),this.internalRemoveComponent()};this.onDevicesChange=i=>{this.publish("meeting.devices-change",i)};this.onFrameStateChange=i=>{this.logger.log("video conference @ on frame state change",i),i===2&&(this.videoManager.start({group:this.group,participant:this.localParticipant,roomId:q.get("roomId")}),this.publish("meeting.start"))};this.onRealtimeEventFromFrame=({event:i,data:c})=>{this.logger.log("video conference @ on realtime event from frame",i,c);let u={["realtime.host-change"]:p=>this.realtime.setHost(p),["realtime.gather"]:p=>this.realtime.setGather(p),["realtime.grid-mode-change"]:p=>this.realtime.setGridMode(p),["realtime.drawing-change"]:p=>{this.realtime.setDrawing(p)},["realtime.follow-participant"]:p=>{this.realtime.setFollowParticipant(p)},["meeting.kick-participant"]:p=>{this.realtime.setKickParticipant(p)},["realtime.transcript-change"]:p=>{this.realtime.setTranscript(p)},["realtime.go-to-participant"]:p=>{this.eventBus.publish("realtime.go-to-participant",p)}}[i](c);this.publish(i,c)};this.onParticipantJoined=i=>{if(this.logger.log("video conference @ on participant joined",i),this.localParticipant=i,this.publish("meeting.participant-joined",i),this.publish("my-participant.joined",i),this.videoConfig.canUseDefaultAvatars){this.realtime.updateMyProperties({avatar:i.avatar,name:i.name,type:i.type});return}this.realtime.updateMyProperties({name:i.name,type:i.type})};this.onParticipantLeft=i=>{this.logger.log("video conference @ on participant left",this.localParticipant),this.publish("my-participant.left",this.localParticipant),this.internalRemoveComponent()};this.onParticipantListUpdate=i=>{this.logger.log("video conference @ on participant list update",i),!(0,ws.isEqual)(this.participantsOnMeeting,i)&&(this.publish("meeting.participant-list-update",i),this.participantsOnMeeting.length!==i.length&&this.publish("meeting.amount-of-participants-update",i.length),this.participantsOnMeeting=i)};this.onKickAllParticipantsDidChange=i=>{this.logger.log("video conference @ on kick all participants did change",i),this.publish("meeting.kick-all-participants",i),this.internalRemoveComponent()};this.onKickLocalParticipant=()=>{this.logger.log("video conference @ on kick local participant"),this.publish("meeting.kick-participant",this.localParticipant),this.internalRemoveComponent()};this.onRoomInfoUpdated=i=>{this.logger.log("video conference @ on room info updated",i);let{isGridModeEnable:c,followParticipantId:u,gather:p,drawing:b,transcript:l}=i;this.videoManager.publishMessageToFrame("realtime.grid-mode-change",c),this.videoManager.publishMessageToFrame("realtime.drawing-change",b),this.videoManager.publishMessageToFrame("realtime.follow-participant",u),this.videoManager.publishMessageToFrame("realtime.transcript-change",l),this.realtime.hostClientId===this.localParticipant.id&&p&&this.realtime.setGather(!1)};this.onRealtimeParticipantsDidChange=i=>{this.logger.log("video conference @ on participants did change",i);let c=Object.values(i).map(u=>({timestamp:u.timestamp,connectionId:u.connectionId,participantId:u.clientId,color:this.realtime.getSlotColor(u.data.slotIndex).name,name:u.data.name,isHost:this.realtime.hostClientId===u.clientId,avatar:u.data.avatar,type:u.data.type}));(0,ws.isEqual)(this.participantToFrameList,c)||this.videoManager.publishMessageToFrame("realtime.participant-list-update",c),this.participantToFrameList=c};this.onHostParticipantDidChange=i=>{this.logger.log("video conference @ on host participant did change",i),this.videoManager.publishMessageToFrame("realtime.host-change",i==null?void 0:i.newHostParticipantId)};this.onParticipantJoinedOnRealtime=i=>{this.logger.log("video conference @ on participant joined on realtime",i),this.publish("meeting.participant-joined",this.createParticipantFromAblyPresence(i))};this.onParticipantLeftOnRealtime=i=>{this.logger.log("video conference @ on participant left on realtime",i),this.publish("meeting.participant-left",this.createParticipantFromAblyPresence(i))};this.params=ut(pe({},i),{userType:(u=(c=i==null?void 0:i.participantType)!=null?c:i==null?void 0:i.userType)!=null?u:"guest"}),this.name="videoConference",this.logger=new se(`@superviz/sdk/${"videoConference"}`),this.browserService=new Hi,this.connectionService=new zi,this.connectionService.addListeners(),this.connectionService.connectionStatusObserver.subscribe(this.onConnectionStatusChange)}toggleMeetingSetup(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-setup")}toggleMicrophone(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-microphone")}toggleCam(){this.videoManager.publishMessageToFrame("meeting-controls.toggle-cam")}toggleScreenShare(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-screenshare")}toggleChat(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-chat")}toggleTranscript(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-transcript")}hangUp(){this.videoManager.publishMessageToFrame("hang-up")}start(){var i;this.logger.log("video conference @ start"),this.params.userType!=="guest"&&(this.localParticipant.type=this.params.userType),this.realtime.setKickParticipantsOnHostLeave(!((i=this.params)!=null&&i.allowGuests)),this.suscribeToRealtimeEvents(),this.showWaterMarkType=q.get("waterMark"),this.startVideo()}destroy(){this.logger.log("video conference @ destroy"),this.publish("destroy"),this.unsubscribeFromRealtimeEvents(),this.unsubscribeFromVideoEvents(),this.videoManager.leave(),this.connectionService.removeListeners()}internalRemoveComponent(){this.logger.log("video conference @ internal remove component");let{data:i}=this.realtime.participant,c=i.activeComponents.filter(u=>u!=="videoConference");this.realtime.updateMyProperties({activeComponents:c,type:"guest"}),this.realtime.setKickParticipantsOnHostLeave(!1),this.detach()}};I();var Ms=class extends et{constructor(i,c){super();this.subscribeToRealtimeEvents=()=>{this.logger.log("presence-mouse component @ subscribe to realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.subscribe(this.onParticipantsDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.unsubscribe(this.onParticipantsDidChange)};this.setParticipantPrivate=i=>{this.isPrivate=i,this.realtime.updatePresenceMouse(ut(pe({},this.localParticipant),{visible:!i}))};this.animate=()=>{this.renderDivWrapper(),this.updateParticipantsMouses(),requestAnimationFrame(this.animate)};this.goToMouse=i=>{let c=this.presences.get(i);if(!c)return;let u=this.canvas.getBoundingClientRect(),{width:p,height:b}=u,{x:l,y:h}=c,g=p/2,O=b/2,T=g-l,P=O-h;this.goToMouseCallback&&this.goToMouseCallback({x:T,y:P})};this.onMyParticipantMouseMove=i=>{let c=this.canvas.getContext("2d"),u=this.canvas.getBoundingClientRect(),p=i.x-u.left,b=i.y-u.top,h=(c==null?void 0:c.getTransform()).inverse(),g=new DOMPoint(p,b).matrixTransform(h);this.realtime.updatePresenceMouse(ut(pe({},this.localParticipant),{x:g.x,y:g.y,visible:!this.isPrivate}))};this.onParticipantsDidChange=i=>{this.logger.log("presence-mouse component @ on participants did change",i),Object.values(i).forEach(c=>{if(c.id!==this.localParticipant.id){if(this.following&&c.id!==this.following&&this.presences.has(c.id)){this.removePresenceMouseParticipant(c.id);return}this.presences.set(c.id,c)}}),this.following&&this.presences.get(this.following)&&this.goToMouse(this.following)};this.onMyParticipantMouseOut=i=>{let{x:c,y:u,width:p,height:b}=this.canvas.getBoundingClientRect();i.x>0&&i.y>0&&i.x<c+p&&i.y<u+b||this.realtime.updatePresenceMouse(pe({visible:!1},this.localParticipant))};this.onParticipantLeftOnRealtime=i=>{this.removePresenceMouseParticipant(i.id)};this.updateParticipantsMouses=()=>{this.presences.forEach(i=>{if(!(i!=null&&i.visible)){this.removePresenceMouseParticipant(i.id);return}this.renderPresenceMouses(i)})};this.renderPresenceMouses=i=>{let u=document.getElementById(`mouse-${i.id}`);u||(u=this.createMouseElement(i));let p=document.getElementById(`mouse-${i.id}`),b=document.getElementById(`mouse-${i.id}`);if(!p||!b)return;let l=p.getElementsByClassName("mouse-user-name")[0],h=b.getElementsByClassName("pointer-mouse")[0];h&&(h.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers/${i.slotIndex}.svg)`),l&&(l.style.color=this.textColorValues.includes(i.slotIndex)?"#FFFFFF":"#26242A",l.style.backgroundColor=i.color,l.innerHTML=i.name);let{x:g,y:O}=i,T=this.canvas.getContext("2d"),P=T==null?void 0:T.getTransform(),L=P==null?void 0:P.e,R=P==null?void 0:P.f,N=g+L,$=O+R,J=this.divWrapper.clientWidth>N&&this.divWrapper.clientHeight>$&&i.visible;u.style.opacity=J?"1":"0",u.style.left=`${N}px`,u.style.top=`${$}px`};this.followMouse=i=>{this.following=i};if(this.name="presence",this.logger=new se(`@superviz/sdk/${"presence"}`),this.canvas=document.getElementById(i),this.presences=new Map,!this.canvas){let u=`Canvas with id ${i} not found`;throw this.logger.log(u),new Error(u)}this.divWrapper=this.renderDivWrapper(),this.animateFrame=requestAnimationFrame(this.animate),this.goToMouseCallback=c==null?void 0:c.onGoToPresence}get textColorValues(){return[2,4,5,7,8,16]}start(){this.logger.log("presence-mouse component @ start"),this.canvas.addEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.addEventListener("mouseout",this.onMyParticipantMouseOut),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.subscribeToRealtimeEvents(),this.realtime.enterPresenceMouseChannel(this.localParticipant)}destroy(){this.logger.log("presence-mouse component @ destroy"),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.realtime.leavePresenceMouseChannel(),this.unsubscribeFromRealtimeEvents(),cancelAnimationFrame(this.animateFrame),this.canvas.removeEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.removeEventListener("mouseout",this.onMyParticipantMouseOut),this.divWrapper.remove()}renderDivWrapper(){let i=this.canvas.getBoundingClientRect(),c=document.getElementById("superviz-presence-mouse-wrapper");return c||(c=document.createElement("div"),c.id="superviz-presence-mouse-wrapper",this.canvas.parentElement.style.position="relative",this.canvas.parentElement.appendChild(c)),c.style.position="fixed",c.style.top=`${i.top}px`,c.style.left=`${i.left}px`,c.style.width=`${i.width}px`,c.style.height=`${i.height}px`,c.style.pointerEvents="none",c.style.overflow="hidden",c.style.zIndex="2",c}removePresenceMouseParticipant(i){let c=document.getElementById(`mouse-${i}`);c&&(c.remove(),this.presences.delete(i))}createMouseElement(i){let c=document.createElement("div");c.setAttribute("id",`mouse-${i.id}`),c.setAttribute("class","mouse-follower");let u=document.createElement("div");u.setAttribute("class","pointer-mouse");let p=document.createElement("div");return p.setAttribute("class","mouse-user-name"),p.innerHTML=i.name,c.appendChild(u),c.appendChild(p),this.divWrapper.appendChild(c),c}};I();I();var Ki=class{constructor(s){this.observers=new Map;this.subscribe=(s,i)=>{this.logger.log("pubsub service @ subscribe",{event:s,callback:i}),this.observers.has(s)||this.observers.set(s,new ne),this.observers.get(s).subscribe(i)};this.unsubscribe=(s,i)=>{this.logger.log("pubsub service @ unsubscribe",{event:s,callback:i}),this.observers.has(s)&&(this.observers.get(s).reset(),this.observers.delete(s))};this.publish=(s,i)=>{this.logger.log("pubsub service @ publish",{event:s,data:i}),this.realtime.setSyncProperty(s,i)};this.publishEventToClient=(s,i)=>{this.logger.log("pubsub service @ publishEventToClient",{event:s,data:i}),this.observers.has(s)&&this.observers.get(s).publish(i)};this.destroy=()=>{this.logger.log("pubsub service @ destroy"),this.realtime.syncPropertiesObserver.unsubscribe(this.onSyncPropertiesChange),this.observers.forEach(s=>s.destroy()),this.observers.clear()};this.onSyncPropertiesChange=s=>{this.logger.log("pubsub service @ onSyncPropertiesChange",{properties:s}),Object.entries(s).forEach(([i,c])=>{this.publishEventToClient(i,c)})};this.logger=new se("@superviz/sdk/pubsub"),this.realtime=s,this.realtime.syncPropertiesObserver.subscribe(this.onSyncPropertiesChange),this.logger.log("PubSub created")}fetchHistory(s){return this.realtime.fetchSyncClientProperty(s)}};I();var Is=class extends et{constructor(){super();this.callbacksToSubscribeWhenJoined=[];this.state="STOPPED";this.publish=(i,c)=>{if(!this.pubsub){let u=`Realtime component is not started yet. You can't publish event ${i} before start`;this.logger.log(u);return}this.pubsub.publish(i,c)};this.subscribe=(i,c)=>{if(!this.pubsub){this.callbacksToSubscribeWhenJoined.push({event:i,callback:c});return}this.pubsub.subscribe(i,c)};this.unsubscribe=(i,c)=>{this.pubsub.unsubscribe(i,c)};this.name="realtime",this.logger=new se("@superviz/sdk/realtime-component")}destroy(){this.logger.log("destroyed"),this.changeState("STOPPED"),this.pubsub.destroy()}start(){this.logger.log("started"),this.pubsub=new Ki(this.realtime),this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:c})=>{this.pubsub.subscribe(i,c)}),this.changeState("STARTED")}fetchHistory(i){return this.pubsub.fetchHistory(i)}changeState(i){this.logger.log("realtime component @ changeState - state changed",i),this.state=i,this.pubsub.publishEventToClient("realtime-component.state-changed",this.state)}};I();var rl=Jt(kn());I();var Ls=(u=>(u.TOP_LEFT="top-left",u.TOP_RIGHT="top-right",u.BOTTOM_LEFT="bottom-left",u.BOTTOM_RIGHT="bottom-right",u))(Ls||{});var Ss=class extends et{constructor(i){super();this.participants=[];this.onParticipantListUpdate=i=>{let u=Object.values(i).filter(({data:p})=>{var b;return(b=p.activeComponents)==null?void 0:b.includes("whoIsOnline")}).filter(({data:{isPrivate:p,id:b}})=>!p||p&&b===this.localParticipant.id).map(({data:p})=>{let{slotIndex:b,id:l,name:h,avatar:g,activeComponents:O}=p,{color:T}=this.realtime.getSlotColor(b),P=this.localParticipant.id===l,L=O.some(R=>R.includes("presence"));return this.setLocalData(P,!L,T,L),{name:h,id:l,slotIndex:b,color:T,isLocal:P,joinedPresence:L,avatar:g}});(0,rl.isEqual)(u,this.participants)||(this.following&&(u.find(({id:b})=>b===this.following)||this.stopFollowing({clientId:this.following})),this.participants=u,this.element.updateParticipants(this.participants))};this.setLocalData=(i,c,u,p)=>{!i||(this.element.disableDropdown=c,this.element.localParticipantData={color:u,id:this.localParticipant.id,joinedPresence:p})};this.goToMousePointer=({detail:i})=>{this.eventBus.publish("realtime.go-to-participant",i.id)};this.followMousePointer=({detail:i})=>{this.eventBus.publish("realtime.local-follow-participant",i.id),this.following=i.id};this.setPrivate=({detail:{isPrivate:i,id:c}})=>{this.eventBus.publish("realtime.private-mode",i),this.realtime.setPrivateWIOParticipant(c,i)};this.setFollow=i=>{var c;if(i.clientId!==this.localParticipant.id){if(this.followMousePointer({detail:{id:(c=i==null?void 0:i.data)==null?void 0:c.id}}),!i.data.id){this.element.following=void 0;return}this.following=i.data.id,this.element.following=i.data}};this.follow=i=>{var c;this.realtime.setFollowWIOParticipant(pe({},i.detail)),this.following=(c=i.detail)==null?void 0:c.id};this.stopFollowing=i=>{var c;i.clientId===((c=this.element.following)==null?void 0:c.id)&&(this.element.following=void 0,this.following=void 0,this.eventBus.publish("realtime.local-follow-participant",void 0))};this.gather=i=>{this.realtime.setGatherWIOParticipant(pe({},i.detail))};this.position=i!=null?i:"top-right",this.name="whoIsOnline",this.logger=new se("@superviz/sdk/who-is-online-component")}start(){this.subscribeToRealtimeEvents(),this.positionWhoIsOnline(),this.addListeners(),this.realtime.enterWIOChannel(this.localParticipant)}destroy(){this.unsubscribeToRealtimeEvents(),this.realtime.leaveWIOChannel(),this.removeListeners(),this.element.remove(),this.element=null,this.participants=null}addListeners(){this.element.addEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.addEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.addEventListener("realtime.private-mode",this.setPrivate),this.element.addEventListener("realtime.follow-participant",this.follow),this.element.addEventListener("realtime.gather",this.gather)}removeListeners(){this.element.removeEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.removeEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.removeEventListener("realtime.private-mode",this.setPrivate),this.element.removeEventListener("realtime.follow-participant",this.follow),this.element.removeEventListener("realtime.gather",this.gather)}subscribeToRealtimeEvents(){this.realtime.participantsObserver.subscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.subscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.subscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.subscribe(this.setFollow),this.realtime.gatherWIOObserver.subscribe(this.goToMousePointer)}unsubscribeToRealtimeEvents(){this.realtime.participantsObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.unsubscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.unsubscribe(this.setFollow),this.realtime.gatherWIOObserver.unsubscribe(this.goToMousePointer)}positionWhoIsOnline(){if(this.element=document.createElement("superviz-who-is-online"),Object.values(Ls).includes(this.position.toLowerCase())){document.body.appendChild(this.element);let[u,p]=this.position.split("-");this.element.position=`${u}: 20px; ${p}: 40px;`;return}let c=document.getElementById(this.position);if(!c){this.element.position="top: 20px; right: 40px;",document.body.appendChild(this.element);return}c.appendChild(this.element),this.element.position="position: relative;"}};export{Ts as CanvasPin,As as Comments,Ps as HTMLPin,Ms as MousePointers,Is as Realtime,Os as VideoConference,Ss as WhoIsOnline};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
