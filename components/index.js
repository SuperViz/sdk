var qm=Object.create;var ds=Object.defineProperty,Jm=Object.defineProperties,Ym=Object.getOwnPropertyDescriptor,Zm=Object.getOwnPropertyDescriptors,Xm=Object.getOwnPropertyNames,lu=Object.getOwnPropertySymbols,Qm=Object.getPrototypeOf,fu=Object.prototype.hasOwnProperty,jm=Object.prototype.propertyIsEnumerable;var cu=(a,s,i)=>s in a?ds(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i,pe=(a,s)=>{for(var i in s||(s={}))fu.call(s,i)&&cu(a,i,s[i]);if(lu)for(var i of lu(s))jm.call(s,i)&&cu(a,i,s[i]);return a},at=(a,s)=>Jm(a,Zm(s));var ev=(a,s)=>()=>(a&&(s=a(a=0)),s);var Ee=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports);var tv=(a,s,i,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let u of Xm(s))!fu.call(a,u)&&u!==i&&ds(a,u,{get:()=>s[u],enumerable:!(c=Ym(s,u))||c.enumerable});return a};var qt=(a,s,i)=>(i=a!=null?qm(Qm(a)):{},tv(s||!a||!a.__esModule?ds(i,"default",{value:a,enumerable:!0}):i,a));var le=(a,s,i)=>new Promise((c,u)=>{var p=h=>{try{l(i.next(h))}catch(g){u(g)}},b=h=>{try{l(i.throw(h))}catch(g){u(g)}},l=h=>h.done?c(h.value):Promise.resolve(h.value).then(p,b);l((i=i.apply(a,s)).next())});var D,I=ev(()=>{D={}});var du=Ee((mb,hu)=>{I();var fn=1e3,hn=fn*60,dn=hn*60,Jt=dn*24,iv=Jt*7,rv=Jt*365.25;hu.exports=function(a,s){s=s||{};var i=typeof a;if(i==="string"&&a.length>0)return sv(a);if(i==="number"&&isFinite(a))return s.long?av(a):ov(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function sv(a){if(a=String(a),!(a.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!!s){var i=parseFloat(s[1]),c=(s[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return i*rv;case"weeks":case"week":case"w":return i*iv;case"days":case"day":case"d":return i*Jt;case"hours":case"hour":case"hrs":case"hr":case"h":return i*dn;case"minutes":case"minute":case"mins":case"min":case"m":return i*hn;case"seconds":case"second":case"secs":case"sec":case"s":return i*fn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function ov(a){var s=Math.abs(a);return s>=Jt?Math.round(a/Jt)+"d":s>=dn?Math.round(a/dn)+"h":s>=hn?Math.round(a/hn)+"m":s>=fn?Math.round(a/fn)+"s":a+"ms"}function av(a){var s=Math.abs(a);return s>=Jt?Bi(a,s,Jt,"day"):s>=dn?Bi(a,s,dn,"hour"):s>=hn?Bi(a,s,hn,"minute"):s>=fn?Bi(a,s,fn,"second"):a+" ms"}function Bi(a,s,i,c){var u=s>=i*1.5;return Math.round(a/i)+" "+c+(u?"s":"")}});var gu=Ee((vb,pu)=>{I();function uv(a){i.debug=i,i.default=i,i.coerce=h,i.disable=p,i.enable=u,i.enabled=b,i.humanize=du(),i.destroy=g,Object.keys(a).forEach(O=>{i[O]=a[O]}),i.names=[],i.skips=[],i.formatters={};function s(O){let T=0;for(let P=0;P<O.length;P++)T=(T<<5)-T+O.charCodeAt(P),T|=0;return i.colors[Math.abs(T)%i.colors.length]}i.selectColor=s;function i(O){let T,P=null,L,R;function N(...K){if(!N.enabled)return;let Y=N,fe=Number(new Date),he=fe-(T||fe);Y.diff=he,Y.prev=T,Y.curr=fe,T=fe,K[0]=i.coerce(K[0]),typeof K[0]!="string"&&K.unshift("%O");let ge=0;K[0]=K[0].replace(/%([a-zA-Z%])/g,(q,me)=>{if(q==="%%")return"%";ge++;let _e=i.formatters[me];if(typeof _e=="function"){let ae=K[ge];q=_e.call(Y,ae),K.splice(ge,1),ge--}return q}),i.formatArgs.call(Y,K),(Y.log||i.log).apply(Y,K)}return N.namespace=O,N.useColors=i.useColors(),N.color=i.selectColor(O),N.extend=c,N.destroy=i.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>P!==null?P:(L!==i.namespaces&&(L=i.namespaces,R=i.enabled(O)),R),set:K=>{P=K}}),typeof i.init=="function"&&i.init(N),N}function c(O,T){let P=i(this.namespace+(typeof T=="undefined"?":":T)+O);return P.log=this.log,P}function u(O){i.save(O),i.namespaces=O,i.names=[],i.skips=[];let T,P=(typeof O=="string"?O:"").split(/[\s,]+/),L=P.length;for(T=0;T<L;T++)!P[T]||(O=P[T].replace(/\*/g,".*?"),O[0]==="-"?i.skips.push(new RegExp("^"+O.slice(1)+"$")):i.names.push(new RegExp("^"+O+"$")))}function p(){let O=[...i.names.map(l),...i.skips.map(l).map(T=>"-"+T)].join(",");return i.enable(""),O}function b(O){if(O[O.length-1]==="*")return!0;let T,P;for(T=0,P=i.skips.length;T<P;T++)if(i.skips[T].test(O))return!1;for(T=0,P=i.names.length;T<P;T++)if(i.names[T].test(O))return!0;return!1}function l(O){return O.toString().substring(2,O.toString().length-2).replace(/\.\*\?$/,"*")}function h(O){return O instanceof Error?O.stack||O.message:O}function g(){}return i.enable(i.load()),i}pu.exports=uv});var mu=Ee((He,Wi)=>{I();He.formatArgs=cv;He.save=fv;He.load=hv;He.useColors=lv;He.storage=dv();He.destroy=(()=>{let a=!1;return()=>{a||(a=!0)}})();He.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function lv(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cv(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+Wi.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;a.splice(1,0,s,"color: inherit");let i=0,c=0;a[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(i++,u==="%c"&&(c=i))}),a.splice(c,0,s)}He.log=console.debug||console.log||(()=>{});function fv(a){try{a?He.storage.setItem("debug",a):He.storage.removeItem("debug")}catch(s){}}function hv(){let a;try{a=He.storage.getItem("debug")}catch(s){}return!a&&typeof process!="undefined"&&"env"in process&&(a=D.DEBUG),a}function dv(){try{return localStorage}catch(a){}}Wi.exports=gu()(He);var{formatters:pv}=Wi.exports;pv.j=function(a){try{return JSON.stringify(a)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}});var Gi=Ee((_b,bu)=>{I();function gv(a){var s=typeof a;return a!=null&&(s=="object"||s=="function")}bu.exports=gv});var Eu=Ee((Eb,_u)=>{I();var mv=typeof global=="object"&&global&&global.Object===Object&&global;_u.exports=mv});var ps=Ee((Ab,Au)=>{I();var vv=Eu(),bv=typeof self=="object"&&self&&self.Object===Object&&self,_v=vv||bv||Function("return this")();Au.exports=_v});var Pu=Ee((Tb,Tu)=>{I();var Ev=ps(),Av=function(){return Ev.Date.now()};Tu.exports=Av});var Cu=Ee((Pb,yu)=>{I();var Tv=/\s/;function Pv(a){for(var s=a.length;s--&&Tv.test(a.charAt(s)););return s}yu.exports=Pv});var Ou=Ee((yb,wu)=>{I();var yv=Cu(),Cv=/^\s+/;function wv(a){return a&&a.slice(0,yv(a)+1).replace(Cv,"")}wu.exports=wv});var gs=Ee((Cb,Mu)=>{I();var Ov=ps(),Mv=Ov.Symbol;Mu.exports=Mv});var Ru=Ee((wb,Su)=>{I();var Iu=gs(),Lu=Object.prototype,Iv=Lu.hasOwnProperty,Lv=Lu.toString,Bn=Iu?Iu.toStringTag:void 0;function Sv(a){var s=Iv.call(a,Bn),i=a[Bn];try{a[Bn]=void 0;var c=!0}catch(p){}var u=Lv.call(a);return c&&(s?a[Bn]=i:delete a[Bn]),u}Su.exports=Sv});var Fu=Ee((Ob,xu)=>{I();var Rv=Object.prototype,xv=Rv.toString;function Fv(a){return xv.call(a)}xu.exports=Fv});var Wu=Ee((Mb,Bu)=>{I();var Nu=gs(),Nv=Ru(),Dv=Fu(),Bv="[object Null]",Wv="[object Undefined]",Du=Nu?Nu.toStringTag:void 0;function Gv(a){return a==null?a===void 0?Wv:Bv:Du&&Du in Object(a)?Nv(a):Dv(a)}Bu.exports=Gv});var Uu=Ee((Ib,Gu)=>{I();function Uv(a){return a!=null&&typeof a=="object"}Gu.exports=Uv});var Hu=Ee((Lb,ku)=>{I();var kv=Wu(),Hv=Uu(),zv="[object Symbol]";function $v(a){return typeof a=="symbol"||Hv(a)&&kv(a)==zv}ku.exports=$v});var Ku=Ee((Sb,Vu)=>{I();var Vv=Ou(),zu=Gi(),Kv=Hu(),$u=0/0,qv=/^[-+]0x[0-9a-f]+$/i,Jv=/^0b[01]+$/i,Yv=/^0o[0-7]+$/i,Zv=parseInt;function Xv(a){if(typeof a=="number")return a;if(Kv(a))return $u;if(zu(a)){var s=typeof a.valueOf=="function"?a.valueOf():a;a=zu(s)?s+"":s}if(typeof a!="string")return a===0?a:+a;a=Vv(a);var i=Jv.test(a);return i||Yv.test(a)?Zv(a.slice(2),i?2:8):qv.test(a)?$u:+a}Vu.exports=Xv});var Yu=Ee((Rb,Ju)=>{I();var Qv=Gi(),ms=Pu(),qu=Ku(),jv="Expected a function",eb=Math.max,tb=Math.min;function nb(a,s,i){var c,u,p,b,l,h,g=0,O=!1,T=!1,P=!0;if(typeof a!="function")throw new TypeError(jv);s=qu(s)||0,Qv(i)&&(O=!!i.leading,T="maxWait"in i,p=T?eb(qu(i.maxWait)||0,s):p,P="trailing"in i?!!i.trailing:P);function L(q){var me=c,_e=u;return c=u=void 0,g=q,b=a.apply(_e,me),b}function R(q){return g=q,l=setTimeout(Y,s),O?L(q):b}function N(q){var me=q-h,_e=q-g,ae=s-me;return T?tb(ae,p-_e):ae}function K(q){var me=q-h,_e=q-g;return h===void 0||me>=s||me<0||T&&_e>=p}function Y(){var q=ms();if(K(q))return fe(q);l=setTimeout(Y,N(q))}function fe(q){return l=void 0,P&&c?L(q):(c=u=void 0,b)}function he(){l!==void 0&&clearTimeout(l),g=0,c=h=u=l=void 0}function ge(){return l===void 0?b:fe(ms())}function j(){var q=ms(),me=K(q);if(c=arguments,u=this,h=q,me){if(l===void 0)return R(h);if(T)return clearTimeout(l),l=setTimeout(Y,s),L(h)}return l===void 0&&(l=setTimeout(Y,s)),b}return j.cancel=he,j.flush=ge,j}Ju.exports=nb});var Xu=Ee((xb,Zu)=>{I();var ib=Yu(),rb=Gi(),sb="Expected a function";function ob(a,s,i){var c=!0,u=!0;if(typeof a!="function")throw new TypeError(sb);return rb(i)&&(c="leading"in i?!!i.leading:c,u="trailing"in i?!!i.trailing:u),ib(a,s,{leading:c,maxWait:s,trailing:u})}Zu.exports=ob});var Un=Ee((pn,Gn)=>{I();(function(){var a,s="4.17.21",i=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",p="Invalid `variable` option passed into `_.template`",b="__lodash_hash_undefined__",l=500,h="__lodash_placeholder__",g=1,O=2,T=4,P=1,L=2,R=1,N=2,K=4,Y=8,fe=16,he=32,ge=64,j=128,q=256,me=512,_e=30,ae="...",ze=800,Nt=16,yt=1,Dt=2,zn=3,ut=1/0,et=9007199254740991,$n=17976931348623157e292,Bt=0/0,lt=4294967295,rl=lt-1,sl=lt>>>1,ol=[["ary",j],["bind",R],["bindKey",N],["curry",Y],["curryRight",fe],["flip",me],["partial",he],["partialRight",ge],["rearg",q]],Yt="[object Arguments]",Vn="[object Array]",al="[object AsyncFunction]",gn="[object Boolean]",mn="[object Date]",ul="[object DOMException]",Kn="[object Error]",qn="[object Function]",Ss="[object GeneratorFunction]",tt="[object Map]",vn="[object Number]",ll="[object Null]",pt="[object Object]",Rs="[object Promise]",cl="[object Proxy]",bn="[object RegExp]",nt="[object Set]",_n="[object String]",Jn="[object Symbol]",fl="[object Undefined]",En="[object WeakMap]",hl="[object WeakSet]",An="[object ArrayBuffer]",Zt="[object DataView]",Ki="[object Float32Array]",qi="[object Float64Array]",Ji="[object Int8Array]",Yi="[object Int16Array]",Zi="[object Int32Array]",Xi="[object Uint8Array]",Qi="[object Uint8ClampedArray]",ji="[object Uint16Array]",er="[object Uint32Array]",dl=/\b__p \+= '';/g,pl=/\b(__p \+=) '' \+/g,gl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xs=/&(?:amp|lt|gt|quot|#39);/g,Fs=/[&<>"']/g,ml=RegExp(xs.source),vl=RegExp(Fs.source),bl=/<%-([\s\S]+?)%>/g,_l=/<%([\s\S]+?)%>/g,Ns=/<%=([\s\S]+?)%>/g,El=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Al=/^\w*$/,Tl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tr=/[\\^$.*+?()[\]{}|]/g,Pl=RegExp(tr.source),nr=/^\s+/,yl=/\s/,Cl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wl=/\{\n\/\* \[wrapped with (.+)\] \*/,Ol=/,? & /,Ml=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Il=/[()=,{}\[\]\/\s]/,Ll=/\\(\\)?/g,Sl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ds=/\w*$/,Rl=/^[-+]0x[0-9a-f]+$/i,xl=/^0b[01]+$/i,Fl=/^\[object .+?Constructor\]$/,Nl=/^0o[0-7]+$/i,Dl=/^(?:0|[1-9]\d*)$/,Bl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yn=/($^)/,Wl=/['\n\r\u2028\u2029\\]/g,Zn="\\ud800-\\udfff",Gl="\\u0300-\\u036f",Ul="\\ufe20-\\ufe2f",kl="\\u20d0-\\u20ff",Bs=Gl+Ul+kl,Ws="\\u2700-\\u27bf",Gs="a-z\\xdf-\\xf6\\xf8-\\xff",Hl="\\xac\\xb1\\xd7\\xf7",zl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$l="\\u2000-\\u206f",Vl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Us="A-Z\\xc0-\\xd6\\xd8-\\xde",ks="\\ufe0e\\ufe0f",Hs=Hl+zl+$l+Vl,ir="['\u2019]",Kl="["+Zn+"]",zs="["+Hs+"]",Xn="["+Bs+"]",$s="\\d+",ql="["+Ws+"]",Vs="["+Gs+"]",Ks="[^"+Zn+Hs+$s+Ws+Gs+Us+"]",rr="\\ud83c[\\udffb-\\udfff]",Jl="(?:"+Xn+"|"+rr+")",qs="[^"+Zn+"]",sr="(?:\\ud83c[\\udde6-\\uddff]){2}",or="[\\ud800-\\udbff][\\udc00-\\udfff]",Xt="["+Us+"]",Js="\\u200d",Ys="(?:"+Vs+"|"+Ks+")",Yl="(?:"+Xt+"|"+Ks+")",Zs="(?:"+ir+"(?:d|ll|m|re|s|t|ve))?",Xs="(?:"+ir+"(?:D|LL|M|RE|S|T|VE))?",Qs=Jl+"?",js="["+ks+"]?",Zl="(?:"+Js+"(?:"+[qs,sr,or].join("|")+")"+js+Qs+")*",Xl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ql="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",eo=js+Qs+Zl,jl="(?:"+[ql,sr,or].join("|")+")"+eo,ec="(?:"+[qs+Xn+"?",Xn,sr,or,Kl].join("|")+")",tc=RegExp(ir,"g"),nc=RegExp(Xn,"g"),ar=RegExp(rr+"(?="+rr+")|"+ec+eo,"g"),ic=RegExp([Xt+"?"+Vs+"+"+Zs+"(?="+[zs,Xt,"$"].join("|")+")",Yl+"+"+Xs+"(?="+[zs,Xt+Ys,"$"].join("|")+")",Xt+"?"+Ys+"+"+Zs,Xt+"+"+Xs,Ql,Xl,$s,jl].join("|"),"g"),rc=RegExp("["+Js+Zn+Bs+ks+"]"),sc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ac=-1,se={};se[Ki]=se[qi]=se[Ji]=se[Yi]=se[Zi]=se[Xi]=se[Qi]=se[ji]=se[er]=!0,se[Yt]=se[Vn]=se[An]=se[gn]=se[Zt]=se[mn]=se[Kn]=se[qn]=se[tt]=se[vn]=se[pt]=se[bn]=se[nt]=se[_n]=se[En]=!1;var re={};re[Yt]=re[Vn]=re[An]=re[Zt]=re[gn]=re[mn]=re[Ki]=re[qi]=re[Ji]=re[Yi]=re[Zi]=re[tt]=re[vn]=re[pt]=re[bn]=re[nt]=re[_n]=re[Jn]=re[Xi]=re[Qi]=re[ji]=re[er]=!0,re[Kn]=re[qn]=re[En]=!1;var uc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hc=parseFloat,dc=parseInt,to=typeof global=="object"&&global&&global.Object===Object&&global,pc=typeof self=="object"&&self&&self.Object===Object&&self,Pe=to||pc||Function("return this")(),ur=typeof pn=="object"&&pn&&!pn.nodeType&&pn,Wt=ur&&typeof Gn=="object"&&Gn&&!Gn.nodeType&&Gn,no=Wt&&Wt.exports===ur,lr=no&&to.process,$e=function(){try{var _=Wt&&Wt.require&&Wt.require("util").types;return _||lr&&lr.binding&&lr.binding("util")}catch(y){}}(),io=$e&&$e.isArrayBuffer,ro=$e&&$e.isDate,so=$e&&$e.isMap,oo=$e&&$e.isRegExp,ao=$e&&$e.isSet,uo=$e&&$e.isTypedArray;function De(_,y,A){switch(A.length){case 0:return _.call(y);case 1:return _.call(y,A[0]);case 2:return _.call(y,A[0],A[1]);case 3:return _.call(y,A[0],A[1],A[2])}return _.apply(y,A)}function gc(_,y,A,x){for(var U=-1,Q=_==null?0:_.length;++U<Q;){var Ae=_[U];y(x,Ae,A(Ae),_)}return x}function Ve(_,y){for(var A=-1,x=_==null?0:_.length;++A<x&&y(_[A],A,_)!==!1;);return _}function mc(_,y){for(var A=_==null?0:_.length;A--&&y(_[A],A,_)!==!1;);return _}function lo(_,y){for(var A=-1,x=_==null?0:_.length;++A<x;)if(!y(_[A],A,_))return!1;return!0}function Ct(_,y){for(var A=-1,x=_==null?0:_.length,U=0,Q=[];++A<x;){var Ae=_[A];y(Ae,A,_)&&(Q[U++]=Ae)}return Q}function Qn(_,y){var A=_==null?0:_.length;return!!A&&Qt(_,y,0)>-1}function cr(_,y,A){for(var x=-1,U=_==null?0:_.length;++x<U;)if(A(y,_[x]))return!0;return!1}function ue(_,y){for(var A=-1,x=_==null?0:_.length,U=Array(x);++A<x;)U[A]=y(_[A],A,_);return U}function wt(_,y){for(var A=-1,x=y.length,U=_.length;++A<x;)_[U+A]=y[A];return _}function fr(_,y,A,x){var U=-1,Q=_==null?0:_.length;for(x&&Q&&(A=_[++U]);++U<Q;)A=y(A,_[U],U,_);return A}function vc(_,y,A,x){var U=_==null?0:_.length;for(x&&U&&(A=_[--U]);U--;)A=y(A,_[U],U,_);return A}function hr(_,y){for(var A=-1,x=_==null?0:_.length;++A<x;)if(y(_[A],A,_))return!0;return!1}var bc=dr("length");function _c(_){return _.split("")}function Ec(_){return _.match(Ml)||[]}function co(_,y,A){var x;return A(_,function(U,Q,Ae){if(y(U,Q,Ae))return x=Q,!1}),x}function jn(_,y,A,x){for(var U=_.length,Q=A+(x?1:-1);x?Q--:++Q<U;)if(y(_[Q],Q,_))return Q;return-1}function Qt(_,y,A){return y===y?Rc(_,y,A):jn(_,fo,A)}function Ac(_,y,A,x){for(var U=A-1,Q=_.length;++U<Q;)if(x(_[U],y))return U;return-1}function fo(_){return _!==_}function ho(_,y){var A=_==null?0:_.length;return A?gr(_,y)/A:Bt}function dr(_){return function(y){return y==null?a:y[_]}}function pr(_){return function(y){return _==null?a:_[y]}}function po(_,y,A,x,U){return U(_,function(Q,Ae,ne){A=x?(x=!1,Q):y(A,Q,Ae,ne)}),A}function Tc(_,y){var A=_.length;for(_.sort(y);A--;)_[A]=_[A].value;return _}function gr(_,y){for(var A,x=-1,U=_.length;++x<U;){var Q=y(_[x]);Q!==a&&(A=A===a?Q:A+Q)}return A}function mr(_,y){for(var A=-1,x=Array(_);++A<_;)x[A]=y(A);return x}function Pc(_,y){return ue(y,function(A){return[A,_[A]]})}function go(_){return _&&_.slice(0,_o(_)+1).replace(nr,"")}function Be(_){return function(y){return _(y)}}function vr(_,y){return ue(y,function(A){return _[A]})}function Tn(_,y){return _.has(y)}function mo(_,y){for(var A=-1,x=_.length;++A<x&&Qt(y,_[A],0)>-1;);return A}function vo(_,y){for(var A=_.length;A--&&Qt(y,_[A],0)>-1;);return A}function yc(_,y){for(var A=_.length,x=0;A--;)_[A]===y&&++x;return x}var Cc=pr(uc),wc=pr(lc);function Oc(_){return"\\"+fc[_]}function Mc(_,y){return _==null?a:_[y]}function jt(_){return rc.test(_)}function Ic(_){return sc.test(_)}function Lc(_){for(var y,A=[];!(y=_.next()).done;)A.push(y.value);return A}function br(_){var y=-1,A=Array(_.size);return _.forEach(function(x,U){A[++y]=[U,x]}),A}function bo(_,y){return function(A){return _(y(A))}}function Ot(_,y){for(var A=-1,x=_.length,U=0,Q=[];++A<x;){var Ae=_[A];(Ae===y||Ae===h)&&(_[A]=h,Q[U++]=A)}return Q}function ei(_){var y=-1,A=Array(_.size);return _.forEach(function(x){A[++y]=x}),A}function Sc(_){var y=-1,A=Array(_.size);return _.forEach(function(x){A[++y]=[x,x]}),A}function Rc(_,y,A){for(var x=A-1,U=_.length;++x<U;)if(_[x]===y)return x;return-1}function xc(_,y,A){for(var x=A+1;x--;)if(_[x]===y)return x;return x}function en(_){return jt(_)?Nc(_):bc(_)}function it(_){return jt(_)?Dc(_):_c(_)}function _o(_){for(var y=_.length;y--&&yl.test(_.charAt(y)););return y}var Fc=pr(cc);function Nc(_){for(var y=ar.lastIndex=0;ar.test(_);)++y;return y}function Dc(_){return _.match(ar)||[]}function Bc(_){return _.match(ic)||[]}var Wc=function _(y){y=y==null?Pe:Mt.defaults(Pe.Object(),y,Mt.pick(Pe,oc));var A=y.Array,x=y.Date,U=y.Error,Q=y.Function,Ae=y.Math,ne=y.Object,_r=y.RegExp,Gc=y.String,Ke=y.TypeError,ti=A.prototype,Uc=Q.prototype,tn=ne.prototype,ni=y["__core-js_shared__"],ii=Uc.toString,te=tn.hasOwnProperty,kc=0,Eo=function(){var e=/[^.]+$/.exec(ni&&ni.keys&&ni.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ri=tn.toString,Hc=ii.call(ne),zc=Pe._,$c=_r("^"+ii.call(te).replace(tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),si=no?y.Buffer:a,It=y.Symbol,oi=y.Uint8Array,Ao=si?si.allocUnsafe:a,ai=bo(ne.getPrototypeOf,ne),To=ne.create,Po=tn.propertyIsEnumerable,ui=ti.splice,yo=It?It.isConcatSpreadable:a,Pn=It?It.iterator:a,Gt=It?It.toStringTag:a,li=function(){try{var e=$t(ne,"defineProperty");return e({},"",{}),e}catch(t){}}(),Vc=y.clearTimeout!==Pe.clearTimeout&&y.clearTimeout,Kc=x&&x.now!==Pe.Date.now&&x.now,qc=y.setTimeout!==Pe.setTimeout&&y.setTimeout,ci=Ae.ceil,fi=Ae.floor,Er=ne.getOwnPropertySymbols,Jc=si?si.isBuffer:a,Co=y.isFinite,Yc=ti.join,Zc=bo(ne.keys,ne),Te=Ae.max,we=Ae.min,Xc=x.now,Qc=y.parseInt,wo=Ae.random,jc=ti.reverse,Ar=$t(y,"DataView"),yn=$t(y,"Map"),Tr=$t(y,"Promise"),nn=$t(y,"Set"),Cn=$t(y,"WeakMap"),wn=$t(ne,"create"),hi=Cn&&new Cn,rn={},ef=Vt(Ar),tf=Vt(yn),nf=Vt(Tr),rf=Vt(nn),sf=Vt(Cn),di=It?It.prototype:a,On=di?di.valueOf:a,Oo=di?di.toString:a;function f(e){if(de(e)&&!k(e)&&!(e instanceof Z)){if(e instanceof qe)return e;if(te.call(e,"__wrapped__"))return Ma(e)}return new qe(e)}var sn=function(){function e(){}return function(t){if(!ce(t))return{};if(To)return To(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function pi(){}function qe(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}f.templateSettings={escape:bl,evaluate:_l,interpolate:Ns,variable:"",imports:{_:f}},f.prototype=pi.prototype,f.prototype.constructor=f,qe.prototype=sn(pi.prototype),qe.prototype.constructor=qe;function Z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=lt,this.__views__=[]}function of(){var e=new Z(this.__wrapped__);return e.__actions__=Re(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Re(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Re(this.__views__),e}function af(){if(this.__filtered__){var e=new Z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function uf(){var e=this.__wrapped__.value(),t=this.__dir__,n=k(e),r=t<0,o=n?e.length:0,d=Eh(0,o,this.__views__),m=d.start,v=d.end,E=v-m,C=r?v:m-1,w=this.__iteratees__,M=w.length,S=0,F=we(E,this.__takeCount__);if(!n||!r&&o==E&&F==E)return Xo(e,this.__actions__);var W=[];e:for(;E--&&S<F;){C+=t;for(var z=-1,G=e[C];++z<M;){var J=w[z],X=J.iteratee,Ue=J.type,Le=X(G);if(Ue==Dt)G=Le;else if(!Le){if(Ue==yt)continue e;break e}}W[S++]=G}return W}Z.prototype=sn(pi.prototype),Z.prototype.constructor=Z;function Ut(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function lf(){this.__data__=wn?wn(null):{},this.size=0}function cf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function ff(e){var t=this.__data__;if(wn){var n=t[e];return n===b?a:n}return te.call(t,e)?t[e]:a}function hf(e){var t=this.__data__;return wn?t[e]!==a:te.call(t,e)}function df(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=wn&&t===a?b:t,this}Ut.prototype.clear=lf,Ut.prototype.delete=cf,Ut.prototype.get=ff,Ut.prototype.has=hf,Ut.prototype.set=df;function gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pf(){this.__data__=[],this.size=0}function gf(e){var t=this.__data__,n=gi(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ui.call(t,n,1),--this.size,!0}function mf(e){var t=this.__data__,n=gi(t,e);return n<0?a:t[n][1]}function vf(e){return gi(this.__data__,e)>-1}function bf(e,t){var n=this.__data__,r=gi(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}gt.prototype.clear=pf,gt.prototype.delete=gf,gt.prototype.get=mf,gt.prototype.has=vf,gt.prototype.set=bf;function mt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _f(){this.size=0,this.__data__={hash:new Ut,map:new(yn||gt),string:new Ut}}function Ef(e){var t=Oi(this,e).delete(e);return this.size-=t?1:0,t}function Af(e){return Oi(this,e).get(e)}function Tf(e){return Oi(this,e).has(e)}function Pf(e,t){var n=Oi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}mt.prototype.clear=_f,mt.prototype.delete=Ef,mt.prototype.get=Af,mt.prototype.has=Tf,mt.prototype.set=Pf;function kt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new mt;++t<n;)this.add(e[t])}function yf(e){return this.__data__.set(e,b),this}function Cf(e){return this.__data__.has(e)}kt.prototype.add=kt.prototype.push=yf,kt.prototype.has=Cf;function rt(e){var t=this.__data__=new gt(e);this.size=t.size}function wf(){this.__data__=new gt,this.size=0}function Of(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Mf(e){return this.__data__.get(e)}function If(e){return this.__data__.has(e)}function Lf(e,t){var n=this.__data__;if(n instanceof gt){var r=n.__data__;if(!yn||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new mt(r)}return n.set(e,t),this.size=n.size,this}rt.prototype.clear=wf,rt.prototype.delete=Of,rt.prototype.get=Mf,rt.prototype.has=If,rt.prototype.set=Lf;function Mo(e,t){var n=k(e),r=!n&&Kt(e),o=!n&&!r&&Ft(e),d=!n&&!r&&!o&&ln(e),m=n||r||o||d,v=m?mr(e.length,Gc):[],E=v.length;for(var C in e)(t||te.call(e,C))&&!(m&&(C=="length"||o&&(C=="offset"||C=="parent")||d&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||Et(C,E)))&&v.push(C);return v}function Io(e){var t=e.length;return t?e[xr(0,t-1)]:a}function Sf(e,t){return Mi(Re(e),Ht(t,0,e.length))}function Rf(e){return Mi(Re(e))}function Pr(e,t,n){(n!==a&&!st(e[t],n)||n===a&&!(t in e))&&vt(e,t,n)}function Mn(e,t,n){var r=e[t];(!(te.call(e,t)&&st(r,n))||n===a&&!(t in e))&&vt(e,t,n)}function gi(e,t){for(var n=e.length;n--;)if(st(e[n][0],t))return n;return-1}function xf(e,t,n,r){return Lt(e,function(o,d,m){t(r,o,n(o),m)}),r}function Lo(e,t){return e&&ft(t,ye(t),e)}function Ff(e,t){return e&&ft(t,Fe(t),e)}function vt(e,t,n){t=="__proto__"&&li?li(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function yr(e,t){for(var n=-1,r=t.length,o=A(r),d=e==null;++n<r;)o[n]=d?a:rs(e,t[n]);return o}function Ht(e,t,n){return e===e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function Je(e,t,n,r,o,d){var m,v=t&g,E=t&O,C=t&T;if(n&&(m=o?n(e,r,o,d):n(e)),m!==a)return m;if(!ce(e))return e;var w=k(e);if(w){if(m=Th(e),!v)return Re(e,m)}else{var M=Oe(e),S=M==qn||M==Ss;if(Ft(e))return ea(e,v);if(M==pt||M==Yt||S&&!o){if(m=E||S?{}:_a(e),!v)return E?fh(e,Ff(m,e)):ch(e,Lo(m,e))}else{if(!re[M])return o?e:{};m=Ph(e,M,v)}}d||(d=new rt);var F=d.get(e);if(F)return F;d.set(e,m),Ja(e)?e.forEach(function(G){m.add(Je(G,t,n,G,e,d))}):Ka(e)&&e.forEach(function(G,J){m.set(J,Je(G,t,n,J,e,d))});var W=C?E?$r:zr:E?Fe:ye,z=w?a:W(e);return Ve(z||e,function(G,J){z&&(J=G,G=e[J]),Mn(m,J,Je(G,t,n,J,e,d))}),m}function Nf(e){var t=ye(e);return function(n){return So(n,e,t)}}function So(e,t,n){var r=n.length;if(e==null)return!r;for(e=ne(e);r--;){var o=n[r],d=t[o],m=e[o];if(m===a&&!(o in e)||!d(m))return!1}return!0}function Ro(e,t,n){if(typeof e!="function")throw new Ke(u);return Nn(function(){e.apply(a,n)},t)}function In(e,t,n,r){var o=-1,d=Qn,m=!0,v=e.length,E=[],C=t.length;if(!v)return E;n&&(t=ue(t,Be(n))),r?(d=cr,m=!1):t.length>=i&&(d=Tn,m=!1,t=new kt(t));e:for(;++o<v;){var w=e[o],M=n==null?w:n(w);if(w=r||w!==0?w:0,m&&M===M){for(var S=C;S--;)if(t[S]===M)continue e;E.push(w)}else d(t,M,r)||E.push(w)}return E}var Lt=sa(ct),xo=sa(wr,!0);function Df(e,t){var n=!0;return Lt(e,function(r,o,d){return n=!!t(r,o,d),n}),n}function mi(e,t,n){for(var r=-1,o=e.length;++r<o;){var d=e[r],m=t(d);if(m!=null&&(v===a?m===m&&!Ge(m):n(m,v)))var v=m,E=d}return E}function Bf(e,t,n,r){var o=e.length;for(n=H(n),n<0&&(n=-n>o?0:o+n),r=r===a||r>o?o:H(r),r<0&&(r+=o),r=n>r?0:Za(r);n<r;)e[n++]=t;return e}function Fo(e,t){var n=[];return Lt(e,function(r,o,d){t(r,o,d)&&n.push(r)}),n}function Ce(e,t,n,r,o){var d=-1,m=e.length;for(n||(n=Ch),o||(o=[]);++d<m;){var v=e[d];t>0&&n(v)?t>1?Ce(v,t-1,n,r,o):wt(o,v):r||(o[o.length]=v)}return o}var Cr=oa(),No=oa(!0);function ct(e,t){return e&&Cr(e,t,ye)}function wr(e,t){return e&&No(e,t,ye)}function vi(e,t){return Ct(t,function(n){return At(e[n])})}function zt(e,t){t=Rt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ht(t[n++])];return n&&n==r?e:a}function Do(e,t,n){var r=t(e);return k(e)?r:wt(r,n(e))}function Me(e){return e==null?e===a?fl:ll:Gt&&Gt in ne(e)?_h(e):Rh(e)}function Or(e,t){return e>t}function Wf(e,t){return e!=null&&te.call(e,t)}function Gf(e,t){return e!=null&&t in ne(e)}function Uf(e,t,n){return e>=we(t,n)&&e<Te(t,n)}function Mr(e,t,n){for(var r=n?cr:Qn,o=e[0].length,d=e.length,m=d,v=A(d),E=1/0,C=[];m--;){var w=e[m];m&&t&&(w=ue(w,Be(t))),E=we(w.length,E),v[m]=!n&&(t||o>=120&&w.length>=120)?new kt(m&&w):a}w=e[0];var M=-1,S=v[0];e:for(;++M<o&&C.length<E;){var F=w[M],W=t?t(F):F;if(F=n||F!==0?F:0,!(S?Tn(S,W):r(C,W,n))){for(m=d;--m;){var z=v[m];if(!(z?Tn(z,W):r(e[m],W,n)))continue e}S&&S.push(W),C.push(F)}}return C}function kf(e,t,n,r){return ct(e,function(o,d,m){t(r,n(o),d,m)}),r}function Ln(e,t,n){t=Rt(t,e),e=Pa(e,t);var r=e==null?e:e[ht(Ze(t))];return r==null?a:De(r,e,n)}function Bo(e){return de(e)&&Me(e)==Yt}function Hf(e){return de(e)&&Me(e)==An}function zf(e){return de(e)&&Me(e)==mn}function Sn(e,t,n,r,o){return e===t?!0:e==null||t==null||!de(e)&&!de(t)?e!==e&&t!==t:$f(e,t,n,r,Sn,o)}function $f(e,t,n,r,o,d){var m=k(e),v=k(t),E=m?Vn:Oe(e),C=v?Vn:Oe(t);E=E==Yt?pt:E,C=C==Yt?pt:C;var w=E==pt,M=C==pt,S=E==C;if(S&&Ft(e)){if(!Ft(t))return!1;m=!0,w=!1}if(S&&!w)return d||(d=new rt),m||ln(e)?ma(e,t,n,r,o,d):vh(e,t,E,n,r,o,d);if(!(n&P)){var F=w&&te.call(e,"__wrapped__"),W=M&&te.call(t,"__wrapped__");if(F||W){var z=F?e.value():e,G=W?t.value():t;return d||(d=new rt),o(z,G,n,r,d)}}return S?(d||(d=new rt),bh(e,t,n,r,o,d)):!1}function Vf(e){return de(e)&&Oe(e)==tt}function Ir(e,t,n,r){var o=n.length,d=o,m=!r;if(e==null)return!d;for(e=ne(e);o--;){var v=n[o];if(m&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++o<d;){v=n[o];var E=v[0],C=e[E],w=v[1];if(m&&v[2]){if(C===a&&!(E in e))return!1}else{var M=new rt;if(r)var S=r(C,w,E,e,t,M);if(!(S===a?Sn(w,C,P|L,r,M):S))return!1}}return!0}function Wo(e){if(!ce(e)||Oh(e))return!1;var t=At(e)?$c:Fl;return t.test(Vt(e))}function Kf(e){return de(e)&&Me(e)==bn}function qf(e){return de(e)&&Oe(e)==nt}function Jf(e){return de(e)&&Fi(e.length)&&!!se[Me(e)]}function Go(e){return typeof e=="function"?e:e==null?Ne:typeof e=="object"?k(e)?Ho(e[0],e[1]):ko(e):au(e)}function Lr(e){if(!Fn(e))return Zc(e);var t=[];for(var n in ne(e))te.call(e,n)&&n!="constructor"&&t.push(n);return t}function Yf(e){if(!ce(e))return Sh(e);var t=Fn(e),n=[];for(var r in e)r=="constructor"&&(t||!te.call(e,r))||n.push(r);return n}function Sr(e,t){return e<t}function Uo(e,t){var n=-1,r=xe(e)?A(e.length):[];return Lt(e,function(o,d,m){r[++n]=t(o,d,m)}),r}function ko(e){var t=Kr(e);return t.length==1&&t[0][2]?Aa(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Ho(e,t){return Jr(e)&&Ea(t)?Aa(ht(e),t):function(n){var r=rs(n,e);return r===a&&r===t?ss(n,e):Sn(t,r,P|L)}}function bi(e,t,n,r,o){e!==t&&Cr(t,function(d,m){if(o||(o=new rt),ce(d))Zf(e,t,m,n,bi,r,o);else{var v=r?r(Zr(e,m),d,m+"",e,t,o):a;v===a&&(v=d),Pr(e,m,v)}},Fe)}function Zf(e,t,n,r,o,d,m){var v=Zr(e,n),E=Zr(t,n),C=m.get(E);if(C){Pr(e,n,C);return}var w=d?d(v,E,n+"",e,t,m):a,M=w===a;if(M){var S=k(E),F=!S&&Ft(E),W=!S&&!F&&ln(E);w=E,S||F||W?k(v)?w=v:ve(v)?w=Re(v):F?(M=!1,w=ea(E,!0)):W?(M=!1,w=ta(E,!0)):w=[]:Dn(E)||Kt(E)?(w=v,Kt(v)?w=Xa(v):(!ce(v)||At(v))&&(w=_a(E))):M=!1}M&&(m.set(E,w),o(w,E,r,d,m),m.delete(E)),Pr(e,n,w)}function zo(e,t){var n=e.length;if(!!n)return t+=t<0?n:0,Et(t,n)?e[t]:a}function $o(e,t,n){t.length?t=ue(t,function(d){return k(d)?function(m){return zt(m,d.length===1?d[0]:d)}:d}):t=[Ne];var r=-1;t=ue(t,Be(B()));var o=Uo(e,function(d,m,v){var E=ue(t,function(C){return C(d)});return{criteria:E,index:++r,value:d}});return Tc(o,function(d,m){return lh(d,m,n)})}function Xf(e,t){return Vo(e,t,function(n,r){return ss(e,r)})}function Vo(e,t,n){for(var r=-1,o=t.length,d={};++r<o;){var m=t[r],v=zt(e,m);n(v,m)&&Rn(d,Rt(m,e),v)}return d}function Qf(e){return function(t){return zt(t,e)}}function Rr(e,t,n,r){var o=r?Ac:Qt,d=-1,m=t.length,v=e;for(e===t&&(t=Re(t)),n&&(v=ue(e,Be(n)));++d<m;)for(var E=0,C=t[d],w=n?n(C):C;(E=o(v,w,E,r))>-1;)v!==e&&ui.call(v,E,1),ui.call(e,E,1);return e}function Ko(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==d){var d=o;Et(o)?ui.call(e,o,1):Dr(e,o)}}return e}function xr(e,t){return e+fi(wo()*(t-e+1))}function jf(e,t,n,r){for(var o=-1,d=Te(ci((t-e)/(n||1)),0),m=A(d);d--;)m[r?d:++o]=e,e+=n;return m}function Fr(e,t){var n="";if(!e||t<1||t>et)return n;do t%2&&(n+=e),t=fi(t/2),t&&(e+=e);while(t);return n}function $(e,t){return Xr(Ta(e,t,Ne),e+"")}function eh(e){return Io(cn(e))}function th(e,t){var n=cn(e);return Mi(n,Ht(t,0,n.length))}function Rn(e,t,n,r){if(!ce(e))return e;t=Rt(t,e);for(var o=-1,d=t.length,m=d-1,v=e;v!=null&&++o<d;){var E=ht(t[o]),C=n;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(o!=m){var w=v[E];C=r?r(w,E,v):a,C===a&&(C=ce(w)?w:Et(t[o+1])?[]:{})}Mn(v,E,C),v=v[E]}return e}var qo=hi?function(e,t){return hi.set(e,t),e}:Ne,nh=li?function(e,t){return li(e,"toString",{configurable:!0,enumerable:!1,value:as(t),writable:!0})}:Ne;function ih(e){return Mi(cn(e))}function Ye(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var d=A(o);++r<o;)d[r]=e[r+t];return d}function rh(e,t){var n;return Lt(e,function(r,o,d){return n=t(r,o,d),!n}),!!n}function _i(e,t,n){var r=0,o=e==null?r:e.length;if(typeof t=="number"&&t===t&&o<=sl){for(;r<o;){var d=r+o>>>1,m=e[d];m!==null&&!Ge(m)&&(n?m<=t:m<t)?r=d+1:o=d}return o}return Nr(e,t,Ne,n)}function Nr(e,t,n,r){var o=0,d=e==null?0:e.length;if(d===0)return 0;t=n(t);for(var m=t!==t,v=t===null,E=Ge(t),C=t===a;o<d;){var w=fi((o+d)/2),M=n(e[w]),S=M!==a,F=M===null,W=M===M,z=Ge(M);if(m)var G=r||W;else C?G=W&&(r||S):v?G=W&&S&&(r||!F):E?G=W&&S&&!F&&(r||!z):F||z?G=!1:G=r?M<=t:M<t;G?o=w+1:d=w}return we(d,rl)}function Jo(e,t){for(var n=-1,r=e.length,o=0,d=[];++n<r;){var m=e[n],v=t?t(m):m;if(!n||!st(v,E)){var E=v;d[o++]=m===0?0:m}}return d}function Yo(e){return typeof e=="number"?e:Ge(e)?Bt:+e}function We(e){if(typeof e=="string")return e;if(k(e))return ue(e,We)+"";if(Ge(e))return Oo?Oo.call(e):"";var t=e+"";return t=="0"&&1/e==-ut?"-0":t}function St(e,t,n){var r=-1,o=Qn,d=e.length,m=!0,v=[],E=v;if(n)m=!1,o=cr;else if(d>=i){var C=t?null:gh(e);if(C)return ei(C);m=!1,o=Tn,E=new kt}else E=t?[]:v;e:for(;++r<d;){var w=e[r],M=t?t(w):w;if(w=n||w!==0?w:0,m&&M===M){for(var S=E.length;S--;)if(E[S]===M)continue e;t&&E.push(M),v.push(w)}else o(E,M,n)||(E!==v&&E.push(M),v.push(w))}return v}function Dr(e,t){return t=Rt(t,e),e=Pa(e,t),e==null||delete e[ht(Ze(t))]}function Zo(e,t,n,r){return Rn(e,t,n(zt(e,t)),r)}function Ei(e,t,n,r){for(var o=e.length,d=r?o:-1;(r?d--:++d<o)&&t(e[d],d,e););return n?Ye(e,r?0:d,r?d+1:o):Ye(e,r?d+1:0,r?o:d)}function Xo(e,t){var n=e;return n instanceof Z&&(n=n.value()),fr(t,function(r,o){return o.func.apply(o.thisArg,wt([r],o.args))},n)}function Br(e,t,n){var r=e.length;if(r<2)return r?St(e[0]):[];for(var o=-1,d=A(r);++o<r;)for(var m=e[o],v=-1;++v<r;)v!=o&&(d[o]=In(d[o]||m,e[v],t,n));return St(Ce(d,1),t,n)}function Qo(e,t,n){for(var r=-1,o=e.length,d=t.length,m={};++r<o;){var v=r<d?t[r]:a;n(m,e[r],v)}return m}function Wr(e){return ve(e)?e:[]}function Gr(e){return typeof e=="function"?e:Ne}function Rt(e,t){return k(e)?e:Jr(e,t)?[e]:Oa(ee(e))}var sh=$;function xt(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:Ye(e,t,n)}var jo=Vc||function(e){return Pe.clearTimeout(e)};function ea(e,t){if(t)return e.slice();var n=e.length,r=Ao?Ao(n):new e.constructor(n);return e.copy(r),r}function Ur(e){var t=new e.constructor(e.byteLength);return new oi(t).set(new oi(e)),t}function oh(e,t){var n=t?Ur(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ah(e){var t=new e.constructor(e.source,Ds.exec(e));return t.lastIndex=e.lastIndex,t}function uh(e){return On?ne(On.call(e)):{}}function ta(e,t){var n=t?Ur(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function na(e,t){if(e!==t){var n=e!==a,r=e===null,o=e===e,d=Ge(e),m=t!==a,v=t===null,E=t===t,C=Ge(t);if(!v&&!C&&!d&&e>t||d&&m&&E&&!v&&!C||r&&m&&E||!n&&E||!o)return 1;if(!r&&!d&&!C&&e<t||C&&n&&o&&!r&&!d||v&&n&&o||!m&&o||!E)return-1}return 0}function lh(e,t,n){for(var r=-1,o=e.criteria,d=t.criteria,m=o.length,v=n.length;++r<m;){var E=na(o[r],d[r]);if(E){if(r>=v)return E;var C=n[r];return E*(C=="desc"?-1:1)}}return e.index-t.index}function ia(e,t,n,r){for(var o=-1,d=e.length,m=n.length,v=-1,E=t.length,C=Te(d-m,0),w=A(E+C),M=!r;++v<E;)w[v]=t[v];for(;++o<m;)(M||o<d)&&(w[n[o]]=e[o]);for(;C--;)w[v++]=e[o++];return w}function ra(e,t,n,r){for(var o=-1,d=e.length,m=-1,v=n.length,E=-1,C=t.length,w=Te(d-v,0),M=A(w+C),S=!r;++o<w;)M[o]=e[o];for(var F=o;++E<C;)M[F+E]=t[E];for(;++m<v;)(S||o<d)&&(M[F+n[m]]=e[o++]);return M}function Re(e,t){var n=-1,r=e.length;for(t||(t=A(r));++n<r;)t[n]=e[n];return t}function ft(e,t,n,r){var o=!n;n||(n={});for(var d=-1,m=t.length;++d<m;){var v=t[d],E=r?r(n[v],e[v],v,n,e):a;E===a&&(E=e[v]),o?vt(n,v,E):Mn(n,v,E)}return n}function ch(e,t){return ft(e,qr(e),t)}function fh(e,t){return ft(e,va(e),t)}function Ai(e,t){return function(n,r){var o=k(n)?gc:xf,d=t?t():{};return o(n,e,B(r,2),d)}}function on(e){return $(function(t,n){var r=-1,o=n.length,d=o>1?n[o-1]:a,m=o>2?n[2]:a;for(d=e.length>3&&typeof d=="function"?(o--,d):a,m&&Ie(n[0],n[1],m)&&(d=o<3?a:d,o=1),t=ne(t);++r<o;){var v=n[r];v&&e(t,v,r,d)}return t})}function sa(e,t){return function(n,r){if(n==null)return n;if(!xe(n))return e(n,r);for(var o=n.length,d=t?o:-1,m=ne(n);(t?d--:++d<o)&&r(m[d],d,m)!==!1;);return n}}function oa(e){return function(t,n,r){for(var o=-1,d=ne(t),m=r(t),v=m.length;v--;){var E=m[e?v:++o];if(n(d[E],E,d)===!1)break}return t}}function hh(e,t,n){var r=t&R,o=xn(e);function d(){var m=this&&this!==Pe&&this instanceof d?o:e;return m.apply(r?n:this,arguments)}return d}function aa(e){return function(t){t=ee(t);var n=jt(t)?it(t):a,r=n?n[0]:t.charAt(0),o=n?xt(n,1).join(""):t.slice(1);return r[e]()+o}}function an(e){return function(t){return fr(su(ru(t).replace(tc,"")),e,"")}}function xn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=sn(e.prototype),r=e.apply(n,t);return ce(r)?r:n}}function dh(e,t,n){var r=xn(e);function o(){for(var d=arguments.length,m=A(d),v=d,E=un(o);v--;)m[v]=arguments[v];var C=d<3&&m[0]!==E&&m[d-1]!==E?[]:Ot(m,E);if(d-=C.length,d<n)return ha(e,t,Ti,o.placeholder,a,m,C,a,a,n-d);var w=this&&this!==Pe&&this instanceof o?r:e;return De(w,this,m)}return o}function ua(e){return function(t,n,r){var o=ne(t);if(!xe(t)){var d=B(n,3);t=ye(t),n=function(v){return d(o[v],v,o)}}var m=e(t,n,r);return m>-1?o[d?t[m]:m]:a}}function la(e){return _t(function(t){var n=t.length,r=n,o=qe.prototype.thru;for(e&&t.reverse();r--;){var d=t[r];if(typeof d!="function")throw new Ke(u);if(o&&!m&&wi(d)=="wrapper")var m=new qe([],!0)}for(r=m?r:n;++r<n;){d=t[r];var v=wi(d),E=v=="wrapper"?Vr(d):a;E&&Yr(E[0])&&E[1]==(j|Y|he|q)&&!E[4].length&&E[9]==1?m=m[wi(E[0])].apply(m,E[3]):m=d.length==1&&Yr(d)?m[v]():m.thru(d)}return function(){var C=arguments,w=C[0];if(m&&C.length==1&&k(w))return m.plant(w).value();for(var M=0,S=n?t[M].apply(this,C):w;++M<n;)S=t[M].call(this,S);return S}})}function Ti(e,t,n,r,o,d,m,v,E,C){var w=t&j,M=t&R,S=t&N,F=t&(Y|fe),W=t&me,z=S?a:xn(e);function G(){for(var J=arguments.length,X=A(J),Ue=J;Ue--;)X[Ue]=arguments[Ue];if(F)var Le=un(G),ke=yc(X,Le);if(r&&(X=ia(X,r,o,F)),d&&(X=ra(X,d,m,F)),J-=ke,F&&J<C){var be=Ot(X,Le);return ha(e,t,Ti,G.placeholder,n,X,be,v,E,C-J)}var ot=M?n:this,Pt=S?ot[e]:e;return J=X.length,v?X=xh(X,v):W&&J>1&&X.reverse(),w&&E<J&&(X.length=E),this&&this!==Pe&&this instanceof G&&(Pt=z||xn(Pt)),Pt.apply(ot,X)}return G}function ca(e,t){return function(n,r){return kf(n,e,t(r),{})}}function Pi(e,t){return function(n,r){var o;if(n===a&&r===a)return t;if(n!==a&&(o=n),r!==a){if(o===a)return r;typeof n=="string"||typeof r=="string"?(n=We(n),r=We(r)):(n=Yo(n),r=Yo(r)),o=e(n,r)}return o}}function kr(e){return _t(function(t){return t=ue(t,Be(B())),$(function(n){var r=this;return e(t,function(o){return De(o,r,n)})})})}function yi(e,t){t=t===a?" ":We(t);var n=t.length;if(n<2)return n?Fr(t,e):t;var r=Fr(t,ci(e/en(t)));return jt(t)?xt(it(r),0,e).join(""):r.slice(0,e)}function ph(e,t,n,r){var o=t&R,d=xn(e);function m(){for(var v=-1,E=arguments.length,C=-1,w=r.length,M=A(w+E),S=this&&this!==Pe&&this instanceof m?d:e;++C<w;)M[C]=r[C];for(;E--;)M[C++]=arguments[++v];return De(S,o?n:this,M)}return m}function fa(e){return function(t,n,r){return r&&typeof r!="number"&&Ie(t,n,r)&&(n=r=a),t=Tt(t),n===a?(n=t,t=0):n=Tt(n),r=r===a?t<n?1:-1:Tt(r),jf(t,n,r,e)}}function Ci(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Xe(t),n=Xe(n)),e(t,n)}}function ha(e,t,n,r,o,d,m,v,E,C){var w=t&Y,M=w?m:a,S=w?a:m,F=w?d:a,W=w?a:d;t|=w?he:ge,t&=~(w?ge:he),t&K||(t&=~(R|N));var z=[e,t,o,F,M,W,S,v,E,C],G=n.apply(a,z);return Yr(e)&&ya(G,z),G.placeholder=r,Ca(G,e,t)}function Hr(e){var t=Ae[e];return function(n,r){if(n=Xe(n),r=r==null?0:we(H(r),292),r&&Co(n)){var o=(ee(n)+"e").split("e"),d=t(o[0]+"e"+(+o[1]+r));return o=(ee(d)+"e").split("e"),+(o[0]+"e"+(+o[1]-r))}return t(n)}}var gh=nn&&1/ei(new nn([,-0]))[1]==ut?function(e){return new nn(e)}:cs;function da(e){return function(t){var n=Oe(t);return n==tt?br(t):n==nt?Sc(t):Pc(t,e(t))}}function bt(e,t,n,r,o,d,m,v){var E=t&N;if(!E&&typeof e!="function")throw new Ke(u);var C=r?r.length:0;if(C||(t&=~(he|ge),r=o=a),m=m===a?m:Te(H(m),0),v=v===a?v:H(v),C-=o?o.length:0,t&ge){var w=r,M=o;r=o=a}var S=E?a:Vr(e),F=[e,t,n,r,o,w,M,d,m,v];if(S&&Lh(F,S),e=F[0],t=F[1],n=F[2],r=F[3],o=F[4],v=F[9]=F[9]===a?E?0:e.length:Te(F[9]-C,0),!v&&t&(Y|fe)&&(t&=~(Y|fe)),!t||t==R)var W=hh(e,t,n);else t==Y||t==fe?W=dh(e,t,v):(t==he||t==(R|he))&&!o.length?W=ph(e,t,n,r):W=Ti.apply(a,F);var z=S?qo:ya;return Ca(z(W,F),e,t)}function pa(e,t,n,r){return e===a||st(e,tn[n])&&!te.call(r,n)?t:e}function ga(e,t,n,r,o,d){return ce(e)&&ce(t)&&(d.set(t,e),bi(e,t,a,ga,d),d.delete(t)),e}function mh(e){return Dn(e)?a:e}function ma(e,t,n,r,o,d){var m=n&P,v=e.length,E=t.length;if(v!=E&&!(m&&E>v))return!1;var C=d.get(e),w=d.get(t);if(C&&w)return C==t&&w==e;var M=-1,S=!0,F=n&L?new kt:a;for(d.set(e,t),d.set(t,e);++M<v;){var W=e[M],z=t[M];if(r)var G=m?r(z,W,M,t,e,d):r(W,z,M,e,t,d);if(G!==a){if(G)continue;S=!1;break}if(F){if(!hr(t,function(J,X){if(!Tn(F,X)&&(W===J||o(W,J,n,r,d)))return F.push(X)})){S=!1;break}}else if(!(W===z||o(W,z,n,r,d))){S=!1;break}}return d.delete(e),d.delete(t),S}function vh(e,t,n,r,o,d,m){switch(n){case Zt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case An:return!(e.byteLength!=t.byteLength||!d(new oi(e),new oi(t)));case gn:case mn:case vn:return st(+e,+t);case Kn:return e.name==t.name&&e.message==t.message;case bn:case _n:return e==t+"";case tt:var v=br;case nt:var E=r&P;if(v||(v=ei),e.size!=t.size&&!E)return!1;var C=m.get(e);if(C)return C==t;r|=L,m.set(e,t);var w=ma(v(e),v(t),r,o,d,m);return m.delete(e),w;case Jn:if(On)return On.call(e)==On.call(t)}return!1}function bh(e,t,n,r,o,d){var m=n&P,v=zr(e),E=v.length,C=zr(t),w=C.length;if(E!=w&&!m)return!1;for(var M=E;M--;){var S=v[M];if(!(m?S in t:te.call(t,S)))return!1}var F=d.get(e),W=d.get(t);if(F&&W)return F==t&&W==e;var z=!0;d.set(e,t),d.set(t,e);for(var G=m;++M<E;){S=v[M];var J=e[S],X=t[S];if(r)var Ue=m?r(X,J,S,t,e,d):r(J,X,S,e,t,d);if(!(Ue===a?J===X||o(J,X,n,r,d):Ue)){z=!1;break}G||(G=S=="constructor")}if(z&&!G){var Le=e.constructor,ke=t.constructor;Le!=ke&&"constructor"in e&&"constructor"in t&&!(typeof Le=="function"&&Le instanceof Le&&typeof ke=="function"&&ke instanceof ke)&&(z=!1)}return d.delete(e),d.delete(t),z}function _t(e){return Xr(Ta(e,a,Sa),e+"")}function zr(e){return Do(e,ye,qr)}function $r(e){return Do(e,Fe,va)}var Vr=hi?function(e){return hi.get(e)}:cs;function wi(e){for(var t=e.name+"",n=rn[t],r=te.call(rn,t)?n.length:0;r--;){var o=n[r],d=o.func;if(d==null||d==e)return o.name}return t}function un(e){var t=te.call(f,"placeholder")?f:e;return t.placeholder}function B(){var e=f.iteratee||us;return e=e===us?Go:e,arguments.length?e(arguments[0],arguments[1]):e}function Oi(e,t){var n=e.__data__;return wh(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Kr(e){for(var t=ye(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Ea(o)]}return t}function $t(e,t){var n=Mc(e,t);return Wo(n)?n:a}function _h(e){var t=te.call(e,Gt),n=e[Gt];try{e[Gt]=a;var r=!0}catch(d){}var o=ri.call(e);return r&&(t?e[Gt]=n:delete e[Gt]),o}var qr=Er?function(e){return e==null?[]:(e=ne(e),Ct(Er(e),function(t){return Po.call(e,t)}))}:fs,va=Er?function(e){for(var t=[];e;)wt(t,qr(e)),e=ai(e);return t}:fs,Oe=Me;(Ar&&Oe(new Ar(new ArrayBuffer(1)))!=Zt||yn&&Oe(new yn)!=tt||Tr&&Oe(Tr.resolve())!=Rs||nn&&Oe(new nn)!=nt||Cn&&Oe(new Cn)!=En)&&(Oe=function(e){var t=Me(e),n=t==pt?e.constructor:a,r=n?Vt(n):"";if(r)switch(r){case ef:return Zt;case tf:return tt;case nf:return Rs;case rf:return nt;case sf:return En}return t});function Eh(e,t,n){for(var r=-1,o=n.length;++r<o;){var d=n[r],m=d.size;switch(d.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=we(t,e+m);break;case"takeRight":e=Te(e,t-m);break}}return{start:e,end:t}}function Ah(e){var t=e.match(wl);return t?t[1].split(Ol):[]}function ba(e,t,n){t=Rt(t,e);for(var r=-1,o=t.length,d=!1;++r<o;){var m=ht(t[r]);if(!(d=e!=null&&n(e,m)))break;e=e[m]}return d||++r!=o?d:(o=e==null?0:e.length,!!o&&Fi(o)&&Et(m,o)&&(k(e)||Kt(e)))}function Th(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&te.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function _a(e){return typeof e.constructor=="function"&&!Fn(e)?sn(ai(e)):{}}function Ph(e,t,n){var r=e.constructor;switch(t){case An:return Ur(e);case gn:case mn:return new r(+e);case Zt:return oh(e,n);case Ki:case qi:case Ji:case Yi:case Zi:case Xi:case Qi:case ji:case er:return ta(e,n);case tt:return new r;case vn:case _n:return new r(e);case bn:return ah(e);case nt:return new r;case Jn:return uh(e)}}function yh(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Cl,`{
/* [wrapped with `+t+`] */
`)}function Ch(e){return k(e)||Kt(e)||!!(yo&&e&&e[yo])}function Et(e,t){var n=typeof e;return t=t==null?et:t,!!t&&(n=="number"||n!="symbol"&&Dl.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t,n){if(!ce(n))return!1;var r=typeof t;return(r=="number"?xe(n)&&Et(t,n.length):r=="string"&&t in n)?st(n[t],e):!1}function Jr(e,t){if(k(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ge(e)?!0:Al.test(e)||!El.test(e)||t!=null&&e in ne(t)}function wh(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Yr(e){var t=wi(e),n=f[t];if(typeof n!="function"||!(t in Z.prototype))return!1;if(e===n)return!0;var r=Vr(n);return!!r&&e===r[0]}function Oh(e){return!!Eo&&Eo in e}var Mh=ni?At:hs;function Fn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||tn;return e===n}function Ea(e){return e===e&&!ce(e)}function Aa(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==a||e in ne(n))}}function Ih(e){var t=Ri(e,function(r){return n.size===l&&n.clear(),r}),n=t.cache;return t}function Lh(e,t){var n=e[1],r=t[1],o=n|r,d=o<(R|N|j),m=r==j&&n==Y||r==j&&n==q&&e[7].length<=t[8]||r==(j|q)&&t[7].length<=t[8]&&n==Y;if(!(d||m))return e;r&R&&(e[2]=t[2],o|=n&R?0:K);var v=t[3];if(v){var E=e[3];e[3]=E?ia(E,v,t[4]):v,e[4]=E?Ot(e[3],h):t[4]}return v=t[5],v&&(E=e[5],e[5]=E?ra(E,v,t[6]):v,e[6]=E?Ot(e[5],h):t[6]),v=t[7],v&&(e[7]=v),r&j&&(e[8]=e[8]==null?t[8]:we(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function Sh(e){var t=[];if(e!=null)for(var n in ne(e))t.push(n);return t}function Rh(e){return ri.call(e)}function Ta(e,t,n){return t=Te(t===a?e.length-1:t,0),function(){for(var r=arguments,o=-1,d=Te(r.length-t,0),m=A(d);++o<d;)m[o]=r[t+o];o=-1;for(var v=A(t+1);++o<t;)v[o]=r[o];return v[t]=n(m),De(e,this,v)}}function Pa(e,t){return t.length<2?e:zt(e,Ye(t,0,-1))}function xh(e,t){for(var n=e.length,r=we(t.length,n),o=Re(e);r--;){var d=t[r];e[r]=Et(d,n)?o[d]:a}return e}function Zr(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ya=wa(qo),Nn=qc||function(e,t){return Pe.setTimeout(e,t)},Xr=wa(nh);function Ca(e,t,n){var r=t+"";return Xr(e,yh(r,Fh(Ah(r),n)))}function wa(e){var t=0,n=0;return function(){var r=Xc(),o=Nt-(r-n);if(n=r,o>0){if(++t>=ze)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Mi(e,t){var n=-1,r=e.length,o=r-1;for(t=t===a?r:t;++n<t;){var d=xr(n,o),m=e[d];e[d]=e[n],e[n]=m}return e.length=t,e}var Oa=Ih(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Tl,function(n,r,o,d){t.push(o?d.replace(Ll,"$1"):r||n)}),t});function ht(e){if(typeof e=="string"||Ge(e))return e;var t=e+"";return t=="0"&&1/e==-ut?"-0":t}function Vt(e){if(e!=null){try{return ii.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fh(e,t){return Ve(ol,function(n){var r="_."+n[0];t&n[1]&&!Qn(e,r)&&e.push(r)}),e.sort()}function Ma(e){if(e instanceof Z)return e.clone();var t=new qe(e.__wrapped__,e.__chain__);return t.__actions__=Re(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Nh(e,t,n){(n?Ie(e,t,n):t===a)?t=1:t=Te(H(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var o=0,d=0,m=A(ci(r/t));o<r;)m[d++]=Ye(e,o,o+=t);return m}function Dh(e){for(var t=-1,n=e==null?0:e.length,r=0,o=[];++t<n;){var d=e[t];d&&(o[r++]=d)}return o}function Bh(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return wt(k(n)?Re(n):[n],Ce(t,1))}var Wh=$(function(e,t){return ve(e)?In(e,Ce(t,1,ve,!0)):[]}),Gh=$(function(e,t){var n=Ze(t);return ve(n)&&(n=a),ve(e)?In(e,Ce(t,1,ve,!0),B(n,2)):[]}),Uh=$(function(e,t){var n=Ze(t);return ve(n)&&(n=a),ve(e)?In(e,Ce(t,1,ve,!0),a,n):[]});function kh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===a?1:H(t),Ye(e,t<0?0:t,r)):[]}function Hh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===a?1:H(t),t=r-t,Ye(e,0,t<0?0:t)):[]}function zh(e,t){return e&&e.length?Ei(e,B(t,3),!0,!0):[]}function $h(e,t){return e&&e.length?Ei(e,B(t,3),!0):[]}function Vh(e,t,n,r){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&Ie(e,t,n)&&(n=0,r=o),Bf(e,t,n,r)):[]}function Ia(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:H(n);return o<0&&(o=Te(r+o,0)),jn(e,B(t,3),o)}function La(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=r-1;return n!==a&&(o=H(n),o=n<0?Te(r+o,0):we(o,r-1)),jn(e,B(t,3),o,!0)}function Sa(e){var t=e==null?0:e.length;return t?Ce(e,1):[]}function Kh(e){var t=e==null?0:e.length;return t?Ce(e,ut):[]}function qh(e,t){var n=e==null?0:e.length;return n?(t=t===a?1:H(t),Ce(e,t)):[]}function Jh(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r}function Ra(e){return e&&e.length?e[0]:a}function Yh(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:H(n);return o<0&&(o=Te(r+o,0)),Qt(e,t,o)}function Zh(e){var t=e==null?0:e.length;return t?Ye(e,0,-1):[]}var Xh=$(function(e){var t=ue(e,Wr);return t.length&&t[0]===e[0]?Mr(t):[]}),Qh=$(function(e){var t=Ze(e),n=ue(e,Wr);return t===Ze(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Mr(n,B(t,2)):[]}),jh=$(function(e){var t=Ze(e),n=ue(e,Wr);return t=typeof t=="function"?t:a,t&&n.pop(),n.length&&n[0]===e[0]?Mr(n,a,t):[]});function ed(e,t){return e==null?"":Yc.call(e,t)}function Ze(e){var t=e==null?0:e.length;return t?e[t-1]:a}function td(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=r;return n!==a&&(o=H(n),o=o<0?Te(r+o,0):we(o,r-1)),t===t?xc(e,t,o):jn(e,fo,o,!0)}function nd(e,t){return e&&e.length?zo(e,H(t)):a}var id=$(xa);function xa(e,t){return e&&e.length&&t&&t.length?Rr(e,t):e}function rd(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,B(n,2)):e}function sd(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,a,n):e}var od=_t(function(e,t){var n=e==null?0:e.length,r=yr(e,t);return Ko(e,ue(t,function(o){return Et(o,n)?+o:o}).sort(na)),r});function ad(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,o=[],d=e.length;for(t=B(t,3);++r<d;){var m=e[r];t(m,r,e)&&(n.push(m),o.push(r))}return Ko(e,o),n}function Qr(e){return e==null?e:jc.call(e)}function ud(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Ie(e,t,n)?(t=0,n=r):(t=t==null?0:H(t),n=n===a?r:H(n)),Ye(e,t,n)):[]}function ld(e,t){return _i(e,t)}function cd(e,t,n){return Nr(e,t,B(n,2))}function fd(e,t){var n=e==null?0:e.length;if(n){var r=_i(e,t);if(r<n&&st(e[r],t))return r}return-1}function hd(e,t){return _i(e,t,!0)}function dd(e,t,n){return Nr(e,t,B(n,2),!0)}function pd(e,t){var n=e==null?0:e.length;if(n){var r=_i(e,t,!0)-1;if(st(e[r],t))return r}return-1}function gd(e){return e&&e.length?Jo(e):[]}function md(e,t){return e&&e.length?Jo(e,B(t,2)):[]}function vd(e){var t=e==null?0:e.length;return t?Ye(e,1,t):[]}function bd(e,t,n){return e&&e.length?(t=n||t===a?1:H(t),Ye(e,0,t<0?0:t)):[]}function _d(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===a?1:H(t),t=r-t,Ye(e,t<0?0:t,r)):[]}function Ed(e,t){return e&&e.length?Ei(e,B(t,3),!1,!0):[]}function Ad(e,t){return e&&e.length?Ei(e,B(t,3)):[]}var Td=$(function(e){return St(Ce(e,1,ve,!0))}),Pd=$(function(e){var t=Ze(e);return ve(t)&&(t=a),St(Ce(e,1,ve,!0),B(t,2))}),yd=$(function(e){var t=Ze(e);return t=typeof t=="function"?t:a,St(Ce(e,1,ve,!0),a,t)});function Cd(e){return e&&e.length?St(e):[]}function wd(e,t){return e&&e.length?St(e,B(t,2)):[]}function Od(e,t){return t=typeof t=="function"?t:a,e&&e.length?St(e,a,t):[]}function jr(e){if(!(e&&e.length))return[];var t=0;return e=Ct(e,function(n){if(ve(n))return t=Te(n.length,t),!0}),mr(t,function(n){return ue(e,dr(n))})}function Fa(e,t){if(!(e&&e.length))return[];var n=jr(e);return t==null?n:ue(n,function(r){return De(t,a,r)})}var Md=$(function(e,t){return ve(e)?In(e,t):[]}),Id=$(function(e){return Br(Ct(e,ve))}),Ld=$(function(e){var t=Ze(e);return ve(t)&&(t=a),Br(Ct(e,ve),B(t,2))}),Sd=$(function(e){var t=Ze(e);return t=typeof t=="function"?t:a,Br(Ct(e,ve),a,t)}),Rd=$(jr);function xd(e,t){return Qo(e||[],t||[],Mn)}function Fd(e,t){return Qo(e||[],t||[],Rn)}var Nd=$(function(e){var t=e.length,n=t>1?e[t-1]:a;return n=typeof n=="function"?(e.pop(),n):a,Fa(e,n)});function Na(e){var t=f(e);return t.__chain__=!0,t}function Dd(e,t){return t(e),e}function Ii(e,t){return t(e)}var Bd=_t(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(d){return yr(d,e)};return t>1||this.__actions__.length||!(r instanceof Z)||!Et(n)?this.thru(o):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Ii,args:[o],thisArg:a}),new qe(r,this.__chain__).thru(function(d){return t&&!d.length&&d.push(a),d}))});function Wd(){return Na(this)}function Gd(){return new qe(this.value(),this.__chain__)}function Ud(){this.__values__===a&&(this.__values__=Ya(this.value()));var e=this.__index__>=this.__values__.length,t=e?a:this.__values__[this.__index__++];return{done:e,value:t}}function kd(){return this}function Hd(e){for(var t,n=this;n instanceof pi;){var r=Ma(n);r.__index__=0,r.__values__=a,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t}function zd(){var e=this.__wrapped__;if(e instanceof Z){var t=e;return this.__actions__.length&&(t=new Z(this)),t=t.reverse(),t.__actions__.push({func:Ii,args:[Qr],thisArg:a}),new qe(t,this.__chain__)}return this.thru(Qr)}function $d(){return Xo(this.__wrapped__,this.__actions__)}var Vd=Ai(function(e,t,n){te.call(e,n)?++e[n]:vt(e,n,1)});function Kd(e,t,n){var r=k(e)?lo:Df;return n&&Ie(e,t,n)&&(t=a),r(e,B(t,3))}function qd(e,t){var n=k(e)?Ct:Fo;return n(e,B(t,3))}var Jd=ua(Ia),Yd=ua(La);function Zd(e,t){return Ce(Li(e,t),1)}function Xd(e,t){return Ce(Li(e,t),ut)}function Qd(e,t,n){return n=n===a?1:H(n),Ce(Li(e,t),n)}function Da(e,t){var n=k(e)?Ve:Lt;return n(e,B(t,3))}function Ba(e,t){var n=k(e)?mc:xo;return n(e,B(t,3))}var jd=Ai(function(e,t,n){te.call(e,n)?e[n].push(t):vt(e,n,[t])});function ep(e,t,n,r){e=xe(e)?e:cn(e),n=n&&!r?H(n):0;var o=e.length;return n<0&&(n=Te(o+n,0)),Ni(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Qt(e,t,n)>-1}var tp=$(function(e,t,n){var r=-1,o=typeof t=="function",d=xe(e)?A(e.length):[];return Lt(e,function(m){d[++r]=o?De(t,m,n):Ln(m,t,n)}),d}),np=Ai(function(e,t,n){vt(e,n,t)});function Li(e,t){var n=k(e)?ue:Uo;return n(e,B(t,3))}function ip(e,t,n,r){return e==null?[]:(k(t)||(t=t==null?[]:[t]),n=r?a:n,k(n)||(n=n==null?[]:[n]),$o(e,t,n))}var rp=Ai(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function sp(e,t,n){var r=k(e)?fr:po,o=arguments.length<3;return r(e,B(t,4),n,o,Lt)}function op(e,t,n){var r=k(e)?vc:po,o=arguments.length<3;return r(e,B(t,4),n,o,xo)}function ap(e,t){var n=k(e)?Ct:Fo;return n(e,xi(B(t,3)))}function up(e){var t=k(e)?Io:eh;return t(e)}function lp(e,t,n){(n?Ie(e,t,n):t===a)?t=1:t=H(t);var r=k(e)?Sf:th;return r(e,t)}function cp(e){var t=k(e)?Rf:ih;return t(e)}function fp(e){if(e==null)return 0;if(xe(e))return Ni(e)?en(e):e.length;var t=Oe(e);return t==tt||t==nt?e.size:Lr(e).length}function hp(e,t,n){var r=k(e)?hr:rh;return n&&Ie(e,t,n)&&(t=a),r(e,B(t,3))}var dp=$(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Ie(e,t[0],t[1])?t=[]:n>2&&Ie(t[0],t[1],t[2])&&(t=[t[0]]),$o(e,Ce(t,1),[])}),Si=Kc||function(){return Pe.Date.now()};function pp(e,t){if(typeof t!="function")throw new Ke(u);return e=H(e),function(){if(--e<1)return t.apply(this,arguments)}}function Wa(e,t,n){return t=n?a:t,t=e&&t==null?e.length:t,bt(e,j,a,a,a,a,t)}function Ga(e,t){var n;if(typeof t!="function")throw new Ke(u);return e=H(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var es=$(function(e,t,n){var r=R;if(n.length){var o=Ot(n,un(es));r|=he}return bt(e,r,t,n,o)}),Ua=$(function(e,t,n){var r=R|N;if(n.length){var o=Ot(n,un(Ua));r|=he}return bt(t,r,e,n,o)});function ka(e,t,n){t=n?a:t;var r=bt(e,Y,a,a,a,a,a,t);return r.placeholder=ka.placeholder,r}function Ha(e,t,n){t=n?a:t;var r=bt(e,fe,a,a,a,a,a,t);return r.placeholder=Ha.placeholder,r}function za(e,t,n){var r,o,d,m,v,E,C=0,w=!1,M=!1,S=!0;if(typeof e!="function")throw new Ke(u);t=Xe(t)||0,ce(n)&&(w=!!n.leading,M="maxWait"in n,d=M?Te(Xe(n.maxWait)||0,t):d,S="trailing"in n?!!n.trailing:S);function F(be){var ot=r,Pt=o;return r=o=a,C=be,m=e.apply(Pt,ot),m}function W(be){return C=be,v=Nn(J,t),w?F(be):m}function z(be){var ot=be-E,Pt=be-C,uu=t-ot;return M?we(uu,d-Pt):uu}function G(be){var ot=be-E,Pt=be-C;return E===a||ot>=t||ot<0||M&&Pt>=d}function J(){var be=Si();if(G(be))return X(be);v=Nn(J,z(be))}function X(be){return v=a,S&&r?F(be):(r=o=a,m)}function Ue(){v!==a&&jo(v),C=0,r=E=o=v=a}function Le(){return v===a?m:X(Si())}function ke(){var be=Si(),ot=G(be);if(r=arguments,o=this,E=be,ot){if(v===a)return W(E);if(M)return jo(v),v=Nn(J,t),F(E)}return v===a&&(v=Nn(J,t)),m}return ke.cancel=Ue,ke.flush=Le,ke}var gp=$(function(e,t){return Ro(e,1,t)}),mp=$(function(e,t,n){return Ro(e,Xe(t)||0,n)});function vp(e){return bt(e,me)}function Ri(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ke(u);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],d=n.cache;if(d.has(o))return d.get(o);var m=e.apply(this,r);return n.cache=d.set(o,m)||d,m};return n.cache=new(Ri.Cache||mt),n}Ri.Cache=mt;function xi(e){if(typeof e!="function")throw new Ke(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function bp(e){return Ga(2,e)}var _p=sh(function(e,t){t=t.length==1&&k(t[0])?ue(t[0],Be(B())):ue(Ce(t,1),Be(B()));var n=t.length;return $(function(r){for(var o=-1,d=we(r.length,n);++o<d;)r[o]=t[o].call(this,r[o]);return De(e,this,r)})}),ts=$(function(e,t){var n=Ot(t,un(ts));return bt(e,he,a,t,n)}),$a=$(function(e,t){var n=Ot(t,un($a));return bt(e,ge,a,t,n)}),Ep=_t(function(e,t){return bt(e,q,a,a,a,t)});function Ap(e,t){if(typeof e!="function")throw new Ke(u);return t=t===a?t:H(t),$(e,t)}function Tp(e,t){if(typeof e!="function")throw new Ke(u);return t=t==null?0:Te(H(t),0),$(function(n){var r=n[t],o=xt(n,0,t);return r&&wt(o,r),De(e,this,o)})}function Pp(e,t,n){var r=!0,o=!0;if(typeof e!="function")throw new Ke(u);return ce(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),za(e,t,{leading:r,maxWait:t,trailing:o})}function yp(e){return Wa(e,1)}function Cp(e,t){return ts(Gr(t),e)}function wp(){if(!arguments.length)return[];var e=arguments[0];return k(e)?e:[e]}function Op(e){return Je(e,T)}function Mp(e,t){return t=typeof t=="function"?t:a,Je(e,T,t)}function Ip(e){return Je(e,g|T)}function Lp(e,t){return t=typeof t=="function"?t:a,Je(e,g|T,t)}function Sp(e,t){return t==null||So(e,t,ye(t))}function st(e,t){return e===t||e!==e&&t!==t}var Rp=Ci(Or),xp=Ci(function(e,t){return e>=t}),Kt=Bo(function(){return arguments}())?Bo:function(e){return de(e)&&te.call(e,"callee")&&!Po.call(e,"callee")},k=A.isArray,Fp=io?Be(io):Hf;function xe(e){return e!=null&&Fi(e.length)&&!At(e)}function ve(e){return de(e)&&xe(e)}function Np(e){return e===!0||e===!1||de(e)&&Me(e)==gn}var Ft=Jc||hs,Dp=ro?Be(ro):zf;function Bp(e){return de(e)&&e.nodeType===1&&!Dn(e)}function Wp(e){if(e==null)return!0;if(xe(e)&&(k(e)||typeof e=="string"||typeof e.splice=="function"||Ft(e)||ln(e)||Kt(e)))return!e.length;var t=Oe(e);if(t==tt||t==nt)return!e.size;if(Fn(e))return!Lr(e).length;for(var n in e)if(te.call(e,n))return!1;return!0}function Gp(e,t){return Sn(e,t)}function Up(e,t,n){n=typeof n=="function"?n:a;var r=n?n(e,t):a;return r===a?Sn(e,t,a,n):!!r}function ns(e){if(!de(e))return!1;var t=Me(e);return t==Kn||t==ul||typeof e.message=="string"&&typeof e.name=="string"&&!Dn(e)}function kp(e){return typeof e=="number"&&Co(e)}function At(e){if(!ce(e))return!1;var t=Me(e);return t==qn||t==Ss||t==al||t==cl}function Va(e){return typeof e=="number"&&e==H(e)}function Fi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=et}function ce(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function de(e){return e!=null&&typeof e=="object"}var Ka=so?Be(so):Vf;function Hp(e,t){return e===t||Ir(e,t,Kr(t))}function zp(e,t,n){return n=typeof n=="function"?n:a,Ir(e,t,Kr(t),n)}function $p(e){return qa(e)&&e!=+e}function Vp(e){if(Mh(e))throw new U(c);return Wo(e)}function Kp(e){return e===null}function qp(e){return e==null}function qa(e){return typeof e=="number"||de(e)&&Me(e)==vn}function Dn(e){if(!de(e)||Me(e)!=pt)return!1;var t=ai(e);if(t===null)return!0;var n=te.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ii.call(n)==Hc}var is=oo?Be(oo):Kf;function Jp(e){return Va(e)&&e>=-et&&e<=et}var Ja=ao?Be(ao):qf;function Ni(e){return typeof e=="string"||!k(e)&&de(e)&&Me(e)==_n}function Ge(e){return typeof e=="symbol"||de(e)&&Me(e)==Jn}var ln=uo?Be(uo):Jf;function Yp(e){return e===a}function Zp(e){return de(e)&&Oe(e)==En}function Xp(e){return de(e)&&Me(e)==hl}var Qp=Ci(Sr),jp=Ci(function(e,t){return e<=t});function Ya(e){if(!e)return[];if(xe(e))return Ni(e)?it(e):Re(e);if(Pn&&e[Pn])return Lc(e[Pn]());var t=Oe(e),n=t==tt?br:t==nt?ei:cn;return n(e)}function Tt(e){if(!e)return e===0?e:0;if(e=Xe(e),e===ut||e===-ut){var t=e<0?-1:1;return t*$n}return e===e?e:0}function H(e){var t=Tt(e),n=t%1;return t===t?n?t-n:t:0}function Za(e){return e?Ht(H(e),0,lt):0}function Xe(e){if(typeof e=="number")return e;if(Ge(e))return Bt;if(ce(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ce(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=go(e);var n=xl.test(e);return n||Nl.test(e)?dc(e.slice(2),n?2:8):Rl.test(e)?Bt:+e}function Xa(e){return ft(e,Fe(e))}function eg(e){return e?Ht(H(e),-et,et):e===0?e:0}function ee(e){return e==null?"":We(e)}var tg=on(function(e,t){if(Fn(t)||xe(t)){ft(t,ye(t),e);return}for(var n in t)te.call(t,n)&&Mn(e,n,t[n])}),Qa=on(function(e,t){ft(t,Fe(t),e)}),Di=on(function(e,t,n,r){ft(t,Fe(t),e,r)}),ng=on(function(e,t,n,r){ft(t,ye(t),e,r)}),ig=_t(yr);function rg(e,t){var n=sn(e);return t==null?n:Lo(n,t)}var sg=$(function(e,t){e=ne(e);var n=-1,r=t.length,o=r>2?t[2]:a;for(o&&Ie(t[0],t[1],o)&&(r=1);++n<r;)for(var d=t[n],m=Fe(d),v=-1,E=m.length;++v<E;){var C=m[v],w=e[C];(w===a||st(w,tn[C])&&!te.call(e,C))&&(e[C]=d[C])}return e}),og=$(function(e){return e.push(a,ga),De(ja,a,e)});function ag(e,t){return co(e,B(t,3),ct)}function ug(e,t){return co(e,B(t,3),wr)}function lg(e,t){return e==null?e:Cr(e,B(t,3),Fe)}function cg(e,t){return e==null?e:No(e,B(t,3),Fe)}function fg(e,t){return e&&ct(e,B(t,3))}function hg(e,t){return e&&wr(e,B(t,3))}function dg(e){return e==null?[]:vi(e,ye(e))}function pg(e){return e==null?[]:vi(e,Fe(e))}function rs(e,t,n){var r=e==null?a:zt(e,t);return r===a?n:r}function gg(e,t){return e!=null&&ba(e,t,Wf)}function ss(e,t){return e!=null&&ba(e,t,Gf)}var mg=ca(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ri.call(t)),e[t]=n},as(Ne)),vg=ca(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ri.call(t)),te.call(e,t)?e[t].push(n):e[t]=[n]},B),bg=$(Ln);function ye(e){return xe(e)?Mo(e):Lr(e)}function Fe(e){return xe(e)?Mo(e,!0):Yf(e)}function _g(e,t){var n={};return t=B(t,3),ct(e,function(r,o,d){vt(n,t(r,o,d),r)}),n}function Eg(e,t){var n={};return t=B(t,3),ct(e,function(r,o,d){vt(n,o,t(r,o,d))}),n}var Ag=on(function(e,t,n){bi(e,t,n)}),ja=on(function(e,t,n,r){bi(e,t,n,r)}),Tg=_t(function(e,t){var n={};if(e==null)return n;var r=!1;t=ue(t,function(d){return d=Rt(d,e),r||(r=d.length>1),d}),ft(e,$r(e),n),r&&(n=Je(n,g|O|T,mh));for(var o=t.length;o--;)Dr(n,t[o]);return n});function Pg(e,t){return eu(e,xi(B(t)))}var yg=_t(function(e,t){return e==null?{}:Xf(e,t)});function eu(e,t){if(e==null)return{};var n=ue($r(e),function(r){return[r]});return t=B(t),Vo(e,n,function(r,o){return t(r,o[0])})}function Cg(e,t,n){t=Rt(t,e);var r=-1,o=t.length;for(o||(o=1,e=a);++r<o;){var d=e==null?a:e[ht(t[r])];d===a&&(r=o,d=n),e=At(d)?d.call(e):d}return e}function wg(e,t,n){return e==null?e:Rn(e,t,n)}function Og(e,t,n,r){return r=typeof r=="function"?r:a,e==null?e:Rn(e,t,n,r)}var tu=da(ye),nu=da(Fe);function Mg(e,t,n){var r=k(e),o=r||Ft(e)||ln(e);if(t=B(t,4),n==null){var d=e&&e.constructor;o?n=r?new d:[]:ce(e)?n=At(d)?sn(ai(e)):{}:n={}}return(o?Ve:ct)(e,function(m,v,E){return t(n,m,v,E)}),n}function Ig(e,t){return e==null?!0:Dr(e,t)}function Lg(e,t,n){return e==null?e:Zo(e,t,Gr(n))}function Sg(e,t,n,r){return r=typeof r=="function"?r:a,e==null?e:Zo(e,t,Gr(n),r)}function cn(e){return e==null?[]:vr(e,ye(e))}function Rg(e){return e==null?[]:vr(e,Fe(e))}function xg(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=Xe(n),n=n===n?n:0),t!==a&&(t=Xe(t),t=t===t?t:0),Ht(Xe(e),t,n)}function Fg(e,t,n){return t=Tt(t),n===a?(n=t,t=0):n=Tt(n),e=Xe(e),Uf(e,t,n)}function Ng(e,t,n){if(n&&typeof n!="boolean"&&Ie(e,t,n)&&(t=n=a),n===a&&(typeof t=="boolean"?(n=t,t=a):typeof e=="boolean"&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=Tt(e),t===a?(t=e,e=0):t=Tt(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=wo();return we(e+o*(t-e+hc("1e-"+((o+"").length-1))),t)}return xr(e,t)}var Dg=an(function(e,t,n){return t=t.toLowerCase(),e+(n?iu(t):t)});function iu(e){return os(ee(e).toLowerCase())}function ru(e){return e=ee(e),e&&e.replace(Bl,Cc).replace(nc,"")}function Bg(e,t,n){e=ee(e),t=We(t);var r=e.length;n=n===a?r:Ht(H(n),0,r);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function Wg(e){return e=ee(e),e&&vl.test(e)?e.replace(Fs,wc):e}function Gg(e){return e=ee(e),e&&Pl.test(e)?e.replace(tr,"\\$&"):e}var Ug=an(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),kg=an(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Hg=aa("toLowerCase");function zg(e,t,n){e=ee(e),t=H(t);var r=t?en(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return yi(fi(o),n)+e+yi(ci(o),n)}function $g(e,t,n){e=ee(e),t=H(t);var r=t?en(e):0;return t&&r<t?e+yi(t-r,n):e}function Vg(e,t,n){e=ee(e),t=H(t);var r=t?en(e):0;return t&&r<t?yi(t-r,n)+e:e}function Kg(e,t,n){return n||t==null?t=0:t&&(t=+t),Qc(ee(e).replace(nr,""),t||0)}function qg(e,t,n){return(n?Ie(e,t,n):t===a)?t=1:t=H(t),Fr(ee(e),t)}function Jg(){var e=arguments,t=ee(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Yg=an(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Zg(e,t,n){return n&&typeof n!="number"&&Ie(e,t,n)&&(t=n=a),n=n===a?lt:n>>>0,n?(e=ee(e),e&&(typeof t=="string"||t!=null&&!is(t))&&(t=We(t),!t&&jt(e))?xt(it(e),0,n):e.split(t,n)):[]}var Xg=an(function(e,t,n){return e+(n?" ":"")+os(t)});function Qg(e,t,n){return e=ee(e),n=n==null?0:Ht(H(n),0,e.length),t=We(t),e.slice(n,n+t.length)==t}function jg(e,t,n){var r=f.templateSettings;n&&Ie(e,t,n)&&(t=a),e=ee(e),t=Di({},t,r,pa);var o=Di({},t.imports,r.imports,pa),d=ye(o),m=vr(o,d),v,E,C=0,w=t.interpolate||Yn,M="__p += '",S=_r((t.escape||Yn).source+"|"+w.source+"|"+(w===Ns?Sl:Yn).source+"|"+(t.evaluate||Yn).source+"|$","g"),F="//# sourceURL="+(te.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ac+"]")+`
`;e.replace(S,function(G,J,X,Ue,Le,ke){return X||(X=Ue),M+=e.slice(C,ke).replace(Wl,Oc),J&&(v=!0,M+=`' +
__e(`+J+`) +
'`),Le&&(E=!0,M+=`';
`+Le+`;
__p += '`),X&&(M+=`' +
((__t = (`+X+`)) == null ? '' : __t) +
'`),C=ke+G.length,G}),M+=`';
`;var W=te.call(t,"variable")&&t.variable;if(!W)M=`with (obj) {
`+M+`
}
`;else if(Il.test(W))throw new U(p);M=(E?M.replace(dl,""):M).replace(pl,"$1").replace(gl,"$1;"),M="function("+(W||"obj")+`) {
`+(W?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+M+`return __p
}`;var z=ou(function(){return Q(d,F+"return "+M).apply(a,m)});if(z.source=M,ns(z))throw z;return z}function em(e){return ee(e).toLowerCase()}function tm(e){return ee(e).toUpperCase()}function nm(e,t,n){if(e=ee(e),e&&(n||t===a))return go(e);if(!e||!(t=We(t)))return e;var r=it(e),o=it(t),d=mo(r,o),m=vo(r,o)+1;return xt(r,d,m).join("")}function im(e,t,n){if(e=ee(e),e&&(n||t===a))return e.slice(0,_o(e)+1);if(!e||!(t=We(t)))return e;var r=it(e),o=vo(r,it(t))+1;return xt(r,0,o).join("")}function rm(e,t,n){if(e=ee(e),e&&(n||t===a))return e.replace(nr,"");if(!e||!(t=We(t)))return e;var r=it(e),o=mo(r,it(t));return xt(r,o).join("")}function sm(e,t){var n=_e,r=ae;if(ce(t)){var o="separator"in t?t.separator:o;n="length"in t?H(t.length):n,r="omission"in t?We(t.omission):r}e=ee(e);var d=e.length;if(jt(e)){var m=it(e);d=m.length}if(n>=d)return e;var v=n-en(r);if(v<1)return r;var E=m?xt(m,0,v).join(""):e.slice(0,v);if(o===a)return E+r;if(m&&(v+=E.length-v),is(o)){if(e.slice(v).search(o)){var C,w=E;for(o.global||(o=_r(o.source,ee(Ds.exec(o))+"g")),o.lastIndex=0;C=o.exec(w);)var M=C.index;E=E.slice(0,M===a?v:M)}}else if(e.indexOf(We(o),v)!=v){var S=E.lastIndexOf(o);S>-1&&(E=E.slice(0,S))}return E+r}function om(e){return e=ee(e),e&&ml.test(e)?e.replace(xs,Fc):e}var am=an(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),os=aa("toUpperCase");function su(e,t,n){return e=ee(e),t=n?a:t,t===a?Ic(e)?Bc(e):Ec(e):e.match(t)||[]}var ou=$(function(e,t){try{return De(e,a,t)}catch(n){return ns(n)?n:new U(n)}}),um=_t(function(e,t){return Ve(t,function(n){n=ht(n),vt(e,n,es(e[n],e))}),e});function lm(e){var t=e==null?0:e.length,n=B();return e=t?ue(e,function(r){if(typeof r[1]!="function")throw new Ke(u);return[n(r[0]),r[1]]}):[],$(function(r){for(var o=-1;++o<t;){var d=e[o];if(De(d[0],this,r))return De(d[1],this,r)}})}function cm(e){return Nf(Je(e,g))}function as(e){return function(){return e}}function fm(e,t){return e==null||e!==e?t:e}var hm=la(),dm=la(!0);function Ne(e){return e}function us(e){return Go(typeof e=="function"?e:Je(e,g))}function pm(e){return ko(Je(e,g))}function gm(e,t){return Ho(e,Je(t,g))}var mm=$(function(e,t){return function(n){return Ln(n,e,t)}}),vm=$(function(e,t){return function(n){return Ln(e,n,t)}});function ls(e,t,n){var r=ye(t),o=vi(t,r);n==null&&!(ce(t)&&(o.length||!r.length))&&(n=t,t=e,e=this,o=vi(t,ye(t)));var d=!(ce(n)&&"chain"in n)||!!n.chain,m=At(e);return Ve(o,function(v){var E=t[v];e[v]=E,m&&(e.prototype[v]=function(){var C=this.__chain__;if(d||C){var w=e(this.__wrapped__),M=w.__actions__=Re(this.__actions__);return M.push({func:E,args:arguments,thisArg:e}),w.__chain__=C,w}return E.apply(e,wt([this.value()],arguments))})}),e}function bm(){return Pe._===this&&(Pe._=zc),this}function cs(){}function _m(e){return e=H(e),$(function(t){return zo(t,e)})}var Em=kr(ue),Am=kr(lo),Tm=kr(hr);function au(e){return Jr(e)?dr(ht(e)):Qf(e)}function Pm(e){return function(t){return e==null?a:zt(e,t)}}var ym=fa(),Cm=fa(!0);function fs(){return[]}function hs(){return!1}function wm(){return{}}function Om(){return""}function Mm(){return!0}function Im(e,t){if(e=H(e),e<1||e>et)return[];var n=lt,r=we(e,lt);t=B(t),e-=lt;for(var o=mr(r,t);++n<e;)t(n);return o}function Lm(e){return k(e)?ue(e,ht):Ge(e)?[e]:Re(Oa(ee(e)))}function Sm(e){var t=++kc;return ee(e)+t}var Rm=Pi(function(e,t){return e+t},0),xm=Hr("ceil"),Fm=Pi(function(e,t){return e/t},1),Nm=Hr("floor");function Dm(e){return e&&e.length?mi(e,Ne,Or):a}function Bm(e,t){return e&&e.length?mi(e,B(t,2),Or):a}function Wm(e){return ho(e,Ne)}function Gm(e,t){return ho(e,B(t,2))}function Um(e){return e&&e.length?mi(e,Ne,Sr):a}function km(e,t){return e&&e.length?mi(e,B(t,2),Sr):a}var Hm=Pi(function(e,t){return e*t},1),zm=Hr("round"),$m=Pi(function(e,t){return e-t},0);function Vm(e){return e&&e.length?gr(e,Ne):0}function Km(e,t){return e&&e.length?gr(e,B(t,2)):0}return f.after=pp,f.ary=Wa,f.assign=tg,f.assignIn=Qa,f.assignInWith=Di,f.assignWith=ng,f.at=ig,f.before=Ga,f.bind=es,f.bindAll=um,f.bindKey=Ua,f.castArray=wp,f.chain=Na,f.chunk=Nh,f.compact=Dh,f.concat=Bh,f.cond=lm,f.conforms=cm,f.constant=as,f.countBy=Vd,f.create=rg,f.curry=ka,f.curryRight=Ha,f.debounce=za,f.defaults=sg,f.defaultsDeep=og,f.defer=gp,f.delay=mp,f.difference=Wh,f.differenceBy=Gh,f.differenceWith=Uh,f.drop=kh,f.dropRight=Hh,f.dropRightWhile=zh,f.dropWhile=$h,f.fill=Vh,f.filter=qd,f.flatMap=Zd,f.flatMapDeep=Xd,f.flatMapDepth=Qd,f.flatten=Sa,f.flattenDeep=Kh,f.flattenDepth=qh,f.flip=vp,f.flow=hm,f.flowRight=dm,f.fromPairs=Jh,f.functions=dg,f.functionsIn=pg,f.groupBy=jd,f.initial=Zh,f.intersection=Xh,f.intersectionBy=Qh,f.intersectionWith=jh,f.invert=mg,f.invertBy=vg,f.invokeMap=tp,f.iteratee=us,f.keyBy=np,f.keys=ye,f.keysIn=Fe,f.map=Li,f.mapKeys=_g,f.mapValues=Eg,f.matches=pm,f.matchesProperty=gm,f.memoize=Ri,f.merge=Ag,f.mergeWith=ja,f.method=mm,f.methodOf=vm,f.mixin=ls,f.negate=xi,f.nthArg=_m,f.omit=Tg,f.omitBy=Pg,f.once=bp,f.orderBy=ip,f.over=Em,f.overArgs=_p,f.overEvery=Am,f.overSome=Tm,f.partial=ts,f.partialRight=$a,f.partition=rp,f.pick=yg,f.pickBy=eu,f.property=au,f.propertyOf=Pm,f.pull=id,f.pullAll=xa,f.pullAllBy=rd,f.pullAllWith=sd,f.pullAt=od,f.range=ym,f.rangeRight=Cm,f.rearg=Ep,f.reject=ap,f.remove=ad,f.rest=Ap,f.reverse=Qr,f.sampleSize=lp,f.set=wg,f.setWith=Og,f.shuffle=cp,f.slice=ud,f.sortBy=dp,f.sortedUniq=gd,f.sortedUniqBy=md,f.split=Zg,f.spread=Tp,f.tail=vd,f.take=bd,f.takeRight=_d,f.takeRightWhile=Ed,f.takeWhile=Ad,f.tap=Dd,f.throttle=Pp,f.thru=Ii,f.toArray=Ya,f.toPairs=tu,f.toPairsIn=nu,f.toPath=Lm,f.toPlainObject=Xa,f.transform=Mg,f.unary=yp,f.union=Td,f.unionBy=Pd,f.unionWith=yd,f.uniq=Cd,f.uniqBy=wd,f.uniqWith=Od,f.unset=Ig,f.unzip=jr,f.unzipWith=Fa,f.update=Lg,f.updateWith=Sg,f.values=cn,f.valuesIn=Rg,f.without=Md,f.words=su,f.wrap=Cp,f.xor=Id,f.xorBy=Ld,f.xorWith=Sd,f.zip=Rd,f.zipObject=xd,f.zipObjectDeep=Fd,f.zipWith=Nd,f.entries=tu,f.entriesIn=nu,f.extend=Qa,f.extendWith=Di,ls(f,f),f.add=Rm,f.attempt=ou,f.camelCase=Dg,f.capitalize=iu,f.ceil=xm,f.clamp=xg,f.clone=Op,f.cloneDeep=Ip,f.cloneDeepWith=Lp,f.cloneWith=Mp,f.conformsTo=Sp,f.deburr=ru,f.defaultTo=fm,f.divide=Fm,f.endsWith=Bg,f.eq=st,f.escape=Wg,f.escapeRegExp=Gg,f.every=Kd,f.find=Jd,f.findIndex=Ia,f.findKey=ag,f.findLast=Yd,f.findLastIndex=La,f.findLastKey=ug,f.floor=Nm,f.forEach=Da,f.forEachRight=Ba,f.forIn=lg,f.forInRight=cg,f.forOwn=fg,f.forOwnRight=hg,f.get=rs,f.gt=Rp,f.gte=xp,f.has=gg,f.hasIn=ss,f.head=Ra,f.identity=Ne,f.includes=ep,f.indexOf=Yh,f.inRange=Fg,f.invoke=bg,f.isArguments=Kt,f.isArray=k,f.isArrayBuffer=Fp,f.isArrayLike=xe,f.isArrayLikeObject=ve,f.isBoolean=Np,f.isBuffer=Ft,f.isDate=Dp,f.isElement=Bp,f.isEmpty=Wp,f.isEqual=Gp,f.isEqualWith=Up,f.isError=ns,f.isFinite=kp,f.isFunction=At,f.isInteger=Va,f.isLength=Fi,f.isMap=Ka,f.isMatch=Hp,f.isMatchWith=zp,f.isNaN=$p,f.isNative=Vp,f.isNil=qp,f.isNull=Kp,f.isNumber=qa,f.isObject=ce,f.isObjectLike=de,f.isPlainObject=Dn,f.isRegExp=is,f.isSafeInteger=Jp,f.isSet=Ja,f.isString=Ni,f.isSymbol=Ge,f.isTypedArray=ln,f.isUndefined=Yp,f.isWeakMap=Zp,f.isWeakSet=Xp,f.join=ed,f.kebabCase=Ug,f.last=Ze,f.lastIndexOf=td,f.lowerCase=kg,f.lowerFirst=Hg,f.lt=Qp,f.lte=jp,f.max=Dm,f.maxBy=Bm,f.mean=Wm,f.meanBy=Gm,f.min=Um,f.minBy=km,f.stubArray=fs,f.stubFalse=hs,f.stubObject=wm,f.stubString=Om,f.stubTrue=Mm,f.multiply=Hm,f.nth=nd,f.noConflict=bm,f.noop=cs,f.now=Si,f.pad=zg,f.padEnd=$g,f.padStart=Vg,f.parseInt=Kg,f.random=Ng,f.reduce=sp,f.reduceRight=op,f.repeat=qg,f.replace=Jg,f.result=Cg,f.round=zm,f.runInContext=_,f.sample=up,f.size=fp,f.snakeCase=Yg,f.some=hp,f.sortedIndex=ld,f.sortedIndexBy=cd,f.sortedIndexOf=fd,f.sortedLastIndex=hd,f.sortedLastIndexBy=dd,f.sortedLastIndexOf=pd,f.startCase=Xg,f.startsWith=Qg,f.subtract=$m,f.sum=Vm,f.sumBy=Km,f.template=jg,f.times=Im,f.toFinite=Tt,f.toInteger=H,f.toLength=Za,f.toLower=em,f.toNumber=Xe,f.toSafeInteger=eg,f.toString=ee,f.toUpper=tm,f.trim=nm,f.trimEnd=im,f.trimStart=rm,f.truncate=sm,f.unescape=om,f.uniqueId=Sm,f.upperCase=am,f.upperFirst=os,f.each=Da,f.eachRight=Ba,f.first=Ra,ls(f,function(){var e={};return ct(f,function(t,n){te.call(f.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),f.VERSION=s,Ve(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),Ve(["drop","take"],function(e,t){Z.prototype[e]=function(n){n=n===a?1:Te(H(n),0);var r=this.__filtered__&&!t?new Z(this):this.clone();return r.__filtered__?r.__takeCount__=we(n,r.__takeCount__):r.__views__.push({size:we(n,lt),type:e+(r.__dir__<0?"Right":"")}),r},Z.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Ve(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==yt||n==zn;Z.prototype[e]=function(o){var d=this.clone();return d.__iteratees__.push({iteratee:B(o,3),type:n}),d.__filtered__=d.__filtered__||r,d}}),Ve(["head","last"],function(e,t){var n="take"+(t?"Right":"");Z.prototype[e]=function(){return this[n](1).value()[0]}}),Ve(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Z.prototype[e]=function(){return this.__filtered__?new Z(this):this[n](1)}}),Z.prototype.compact=function(){return this.filter(Ne)},Z.prototype.find=function(e){return this.filter(e).head()},Z.prototype.findLast=function(e){return this.reverse().find(e)},Z.prototype.invokeMap=$(function(e,t){return typeof e=="function"?new Z(this):this.map(function(n){return Ln(n,e,t)})}),Z.prototype.reject=function(e){return this.filter(xi(B(e)))},Z.prototype.slice=function(e,t){e=H(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Z(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(t=H(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Z.prototype.toArray=function(){return this.take(lt)},ct(Z.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=f[r?"take"+(t=="last"?"Right":""):t],d=r||/^find/.test(t);!o||(f.prototype[t]=function(){var m=this.__wrapped__,v=r?[1]:arguments,E=m instanceof Z,C=v[0],w=E||k(m),M=function(J){var X=o.apply(f,wt([J],v));return r&&S?X[0]:X};w&&n&&typeof C=="function"&&C.length!=1&&(E=w=!1);var S=this.__chain__,F=!!this.__actions__.length,W=d&&!S,z=E&&!F;if(!d&&w){m=z?m:new Z(this);var G=e.apply(m,v);return G.__actions__.push({func:Ii,args:[M],thisArg:a}),new qe(G,S)}return W&&z?e.apply(this,v):(G=this.thru(M),W?r?G.value()[0]:G.value():G)})}),Ve(["pop","push","shift","sort","splice","unshift"],function(e){var t=ti[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var o=arguments;if(r&&!this.__chain__){var d=this.value();return t.apply(k(d)?d:[],o)}return this[n](function(m){return t.apply(k(m)?m:[],o)})}}),ct(Z.prototype,function(e,t){var n=f[t];if(n){var r=n.name+"";te.call(rn,r)||(rn[r]=[]),rn[r].push({name:t,func:n})}}),rn[Ti(a,N).name]=[{name:"wrapper",func:a}],Z.prototype.clone=of,Z.prototype.reverse=af,Z.prototype.value=uf,f.prototype.at=Bd,f.prototype.chain=Wd,f.prototype.commit=Gd,f.prototype.next=Ud,f.prototype.plant=Hd,f.prototype.reverse=zd,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=$d,f.prototype.first=f.prototype.head,Pn&&(f.prototype[Pn]=kd),f},Mt=Wc();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Pe._=Mt,define(function(){return Mt})):Wt?((Wt.exports=Mt)._=Mt,ur._=Mt):Pe._=Mt}).call(pn)});var tl=Ee((kn,Ps)=>{I();(function(a,s){typeof kn=="object"&&typeof Ps=="object"?Ps.exports=s():typeof define=="function"&&define.amd?define([],s):typeof kn=="object"?kn.bowser=s():a.bowser=s()})(kn,function(){return function(a){var s={};function i(c){if(s[c])return s[c].exports;var u=s[c]={i:c,l:!1,exports:{}};return a[c].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=a,i.c=s,i.d=function(c,u,p){i.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:p})},i.r=function(c){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},i.t=function(c,u){if(1&u&&(c=i(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var p=Object.create(null);if(i.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var b in c)i.d(p,b,function(l){return c[l]}.bind(null,b));return p},i.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(u,"a",u),u},i.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},i.p="",i(i.s=90)}({17:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c=i(18),u=function(){function p(){}return p.getFirstMatch=function(b,l){var h=l.match(b);return h&&h.length>0&&h[1]||""},p.getSecondMatch=function(b,l){var h=l.match(b);return h&&h.length>1&&h[2]||""},p.matchAndReturnConst=function(b,l,h){if(b.test(l))return h},p.getWindowsVersionName=function(b){switch(b){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},p.getMacOSVersionName=function(b){var l=b.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(l.push(0),l[0]===10)switch(l[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},p.getAndroidVersionName=function(b){var l=b.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(l.push(0),!(l[0]===1&&l[1]<5))return l[0]===1&&l[1]<6?"Cupcake":l[0]===1&&l[1]>=6?"Donut":l[0]===2&&l[1]<2?"Eclair":l[0]===2&&l[1]===2?"Froyo":l[0]===2&&l[1]>2?"Gingerbread":l[0]===3?"Honeycomb":l[0]===4&&l[1]<1?"Ice Cream Sandwich":l[0]===4&&l[1]<4?"Jelly Bean":l[0]===4&&l[1]>=4?"KitKat":l[0]===5?"Lollipop":l[0]===6?"Marshmallow":l[0]===7?"Nougat":l[0]===8?"Oreo":l[0]===9?"Pie":void 0},p.getVersionPrecision=function(b){return b.split(".").length},p.compareVersions=function(b,l,h){h===void 0&&(h=!1);var g=p.getVersionPrecision(b),O=p.getVersionPrecision(l),T=Math.max(g,O),P=0,L=p.map([b,l],function(R){var N=T-p.getVersionPrecision(R),K=R+new Array(N+1).join(".0");return p.map(K.split("."),function(Y){return new Array(20-Y.length).join("0")+Y}).reverse()});for(h&&(P=T-Math.min(g,O)),T-=1;T>=P;){if(L[0][T]>L[1][T])return 1;if(L[0][T]===L[1][T]){if(T===P)return 0;T-=1}else if(L[0][T]<L[1][T])return-1}},p.map=function(b,l){var h,g=[];if(Array.prototype.map)return Array.prototype.map.call(b,l);for(h=0;h<b.length;h+=1)g.push(l(b[h]));return g},p.find=function(b,l){var h,g;if(Array.prototype.find)return Array.prototype.find.call(b,l);for(h=0,g=b.length;h<g;h+=1){var O=b[h];if(l(O,h))return O}},p.assign=function(b){for(var l,h,g=b,O=arguments.length,T=new Array(O>1?O-1:0),P=1;P<O;P++)T[P-1]=arguments[P];if(Object.assign)return Object.assign.apply(Object,[b].concat(T));var L=function(){var R=T[l];typeof R=="object"&&R!==null&&Object.keys(R).forEach(function(N){g[N]=R[N]})};for(l=0,h=T.length;l<h;l+=1)L();return b},p.getBrowserAlias=function(b){return c.BROWSER_ALIASES_MAP[b]},p.getBrowserTypeByAlias=function(b){return c.BROWSER_MAP[b]||""},p}();s.default=u,a.exports=s.default},18:function(a,s,i){"use strict";s.__esModule=!0,s.ENGINE_MAP=s.OS_MAP=s.PLATFORMS_MAP=s.BROWSER_MAP=s.BROWSER_ALIASES_MAP=void 0,s.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},s.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},s.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},s.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},s.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(91))&&c.__esModule?c:{default:c},p=i(18);function b(h,g){for(var O=0;O<g.length;O++){var T=g[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(h,T.key,T)}}var l=function(){function h(){}var g,O,T;return h.getParser=function(P,L){if(L===void 0&&(L=!1),typeof P!="string")throw new Error("UserAgent should be a string");return new u.default(P,L)},h.parse=function(P){return new u.default(P).getResult()},g=h,T=[{key:"BROWSER_MAP",get:function(){return p.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return p.ENGINE_MAP}},{key:"OS_MAP",get:function(){return p.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return p.PLATFORMS_MAP}}],(O=null)&&b(g.prototype,O),T&&b(g,T),h}();s.default=l,a.exports=s.default},91:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c=h(i(92)),u=h(i(93)),p=h(i(94)),b=h(i(95)),l=h(i(17));function h(O){return O&&O.__esModule?O:{default:O}}var g=function(){function O(P,L){if(L===void 0&&(L=!1),P==null||P==="")throw new Error("UserAgent parameter can't be empty");this._ua=P,this.parsedResult={},L!==!0&&this.parse()}var T=O.prototype;return T.getUA=function(){return this._ua},T.test=function(P){return P.test(this._ua)},T.parseBrowser=function(){var P=this;this.parsedResult.browser={};var L=l.default.find(c.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.browser=L.describe(this.getUA())),this.parsedResult.browser},T.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},T.getBrowserName=function(P){return P?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},T.getBrowserVersion=function(){return this.getBrowser().version},T.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},T.parseOS=function(){var P=this;this.parsedResult.os={};var L=l.default.find(u.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.os=L.describe(this.getUA())),this.parsedResult.os},T.getOSName=function(P){var L=this.getOS().name;return P?String(L).toLowerCase()||"":L||""},T.getOSVersion=function(){return this.getOS().version},T.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},T.getPlatformType=function(P){P===void 0&&(P=!1);var L=this.getPlatform().type;return P?String(L).toLowerCase()||"":L||""},T.parsePlatform=function(){var P=this;this.parsedResult.platform={};var L=l.default.find(p.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.platform=L.describe(this.getUA())),this.parsedResult.platform},T.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},T.getEngineName=function(P){return P?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},T.parseEngine=function(){var P=this;this.parsedResult.engine={};var L=l.default.find(b.default,function(R){if(typeof R.test=="function")return R.test(P);if(R.test instanceof Array)return R.test.some(function(N){return P.test(N)});throw new Error("Browser's test function is not valid")});return L&&(this.parsedResult.engine=L.describe(this.getUA())),this.parsedResult.engine},T.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},T.getResult=function(){return l.default.assign({},this.parsedResult)},T.satisfies=function(P){var L=this,R={},N=0,K={},Y=0;if(Object.keys(P).forEach(function(ae){var ze=P[ae];typeof ze=="string"?(K[ae]=ze,Y+=1):typeof ze=="object"&&(R[ae]=ze,N+=1)}),N>0){var fe=Object.keys(R),he=l.default.find(fe,function(ae){return L.isOS(ae)});if(he){var ge=this.satisfies(R[he]);if(ge!==void 0)return ge}var j=l.default.find(fe,function(ae){return L.isPlatform(ae)});if(j){var q=this.satisfies(R[j]);if(q!==void 0)return q}}if(Y>0){var me=Object.keys(K),_e=l.default.find(me,function(ae){return L.isBrowser(ae,!0)});if(_e!==void 0)return this.compareVersion(K[_e])}},T.isBrowser=function(P,L){L===void 0&&(L=!1);var R=this.getBrowserName().toLowerCase(),N=P.toLowerCase(),K=l.default.getBrowserTypeByAlias(N);return L&&K&&(N=K.toLowerCase()),N===R},T.compareVersion=function(P){var L=[0],R=P,N=!1,K=this.getBrowserVersion();if(typeof K=="string")return P[0]===">"||P[0]==="<"?(R=P.substr(1),P[1]==="="?(N=!0,R=P.substr(2)):L=[],P[0]===">"?L.push(1):L.push(-1)):P[0]==="="?R=P.substr(1):P[0]==="~"&&(N=!0,R=P.substr(1)),L.indexOf(l.default.compareVersions(K,R,N))>-1},T.isOS=function(P){return this.getOSName(!0)===String(P).toLowerCase()},T.isPlatform=function(P){return this.getPlatformType(!0)===String(P).toLowerCase()},T.isEngine=function(P){return this.getEngineName(!0)===String(P).toLowerCase()},T.is=function(P,L){return L===void 0&&(L=!1),this.isBrowser(P,L)||this.isOS(P)||this.isPlatform(P)},T.some=function(P){var L=this;return P===void 0&&(P=[]),P.some(function(R){return L.is(R)})},O}();s.default=g,a.exports=s.default},92:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=/version\/(\d+(\.?_?\d+)+)/i,b=[{test:[/googlebot/i],describe:function(l){var h={name:"Googlebot"},g=u.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/opera/i],describe:function(l){var h={name:"Opera"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/opr\/|opios/i],describe:function(l){var h={name:"Opera"},g=u.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/SamsungBrowser/i],describe:function(l){var h={name:"Samsung Internet for Android"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/Whale/i],describe:function(l){var h={name:"NAVER Whale Browser"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/MZBrowser/i],describe:function(l){var h={name:"MZ Browser"},g=u.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/focus/i],describe:function(l){var h={name:"Focus"},g=u.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/swing/i],describe:function(l){var h={name:"Swing"},g=u.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/coast/i],describe:function(l){var h={name:"Opera Coast"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(l){var h={name:"Opera Touch"},g=u.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/yabrowser/i],describe:function(l){var h={name:"Yandex Browser"},g=u.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/ucbrowser/i],describe:function(l){var h={name:"UC Browser"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/Maxthon|mxios/i],describe:function(l){var h={name:"Maxthon"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/epiphany/i],describe:function(l){var h={name:"Epiphany"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/puffin/i],describe:function(l){var h={name:"Puffin"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/sleipnir/i],describe:function(l){var h={name:"Sleipnir"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/k-meleon/i],describe:function(l){var h={name:"K-Meleon"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/micromessenger/i],describe:function(l){var h={name:"WeChat"},g=u.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/qqbrowser/i],describe:function(l){var h={name:/qqbrowserlite/i.test(l)?"QQ Browser Lite":"QQ Browser"},g=u.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/msie|trident/i],describe:function(l){var h={name:"Internet Explorer"},g=u.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/\sedg\//i],describe:function(l){var h={name:"Microsoft Edge"},g=u.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/edg([ea]|ios)/i],describe:function(l){var h={name:"Microsoft Edge"},g=u.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/vivaldi/i],describe:function(l){var h={name:"Vivaldi"},g=u.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/seamonkey/i],describe:function(l){var h={name:"SeaMonkey"},g=u.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/sailfish/i],describe:function(l){var h={name:"Sailfish"},g=u.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,l);return g&&(h.version=g),h}},{test:[/silk/i],describe:function(l){var h={name:"Amazon Silk"},g=u.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/phantom/i],describe:function(l){var h={name:"PhantomJS"},g=u.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/slimerjs/i],describe:function(l){var h={name:"SlimerJS"},g=u.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var h={name:"BlackBerry"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var h={name:"WebOS Browser"},g=u.default.getFirstMatch(p,l)||u.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/bada/i],describe:function(l){var h={name:"Bada"},g=u.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/tizen/i],describe:function(l){var h={name:"Tizen"},g=u.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/qupzilla/i],describe:function(l){var h={name:"QupZilla"},g=u.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/firefox|iceweasel|fxios/i],describe:function(l){var h={name:"Firefox"},g=u.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/electron/i],describe:function(l){var h={name:"Electron"},g=u.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/MiuiBrowser/i],describe:function(l){var h={name:"Miui"},g=u.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/chromium/i],describe:function(l){var h={name:"Chromium"},g=u.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,l)||u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/chrome|crios|crmo/i],describe:function(l){var h={name:"Chrome"},g=u.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/GSA/i],describe:function(l){var h={name:"Google Search"},g=u.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:function(l){var h=!l.test(/like android/i),g=l.test(/android/i);return h&&g},describe:function(l){var h={name:"Android Browser"},g=u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/playstation 4/i],describe:function(l){var h={name:"PlayStation 4"},g=u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/safari|applewebkit/i],describe:function(l){var h={name:"Safari"},g=u.default.getFirstMatch(p,l);return g&&(h.version=g),h}},{test:[/.*/i],describe:function(l){var h=l.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:u.default.getFirstMatch(h,l),version:u.default.getSecondMatch(h,l)}}}];s.default=b,a.exports=s.default},93:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=i(18),b=[{test:[/Roku\/DVP/],describe:function(l){var h=u.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,l);return{name:p.OS_MAP.Roku,version:h}}},{test:[/windows phone/i],describe:function(l){var h=u.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.WindowsPhone,version:h}}},{test:[/windows /i],describe:function(l){var h=u.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,l),g=u.default.getWindowsVersionName(h);return{name:p.OS_MAP.Windows,version:h,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(l){var h={name:p.OS_MAP.iOS},g=u.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,l);return g&&(h.version=g),h}},{test:[/macintosh/i],describe:function(l){var h=u.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,l).replace(/[_\s]/g,"."),g=u.default.getMacOSVersionName(h),O={name:p.OS_MAP.MacOS,version:h};return g&&(O.versionName=g),O}},{test:[/(ipod|iphone|ipad)/i],describe:function(l){var h=u.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,l).replace(/[_\s]/g,".");return{name:p.OS_MAP.iOS,version:h}}},{test:function(l){var h=!l.test(/like android/i),g=l.test(/android/i);return h&&g},describe:function(l){var h=u.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,l),g=u.default.getAndroidVersionName(h),O={name:p.OS_MAP.Android,version:h};return g&&(O.versionName=g),O}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var h=u.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,l),g={name:p.OS_MAP.WebOS};return h&&h.length&&(g.version=h),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var h=u.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,l)||u.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,l)||u.default.getFirstMatch(/\bbb(\d+)/i,l);return{name:p.OS_MAP.BlackBerry,version:h}}},{test:[/bada/i],describe:function(l){var h=u.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.Bada,version:h}}},{test:[/tizen/i],describe:function(l){var h=u.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.Tizen,version:h}}},{test:[/linux/i],describe:function(){return{name:p.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:p.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(l){var h=u.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,l);return{name:p.OS_MAP.PlayStation4,version:h}}}];s.default=b,a.exports=s.default},94:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=i(18),b=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(l){var h=u.default.getFirstMatch(/(can-l01)/i,l)&&"Nova",g={type:p.PLATFORMS_MAP.mobile,vendor:"Huawei"};return h&&(g.model=h),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(l){var h=l.test(/ipod|iphone/i),g=l.test(/like (ipod|iphone)/i);return h&&!g},describe:function(l){var h=u.default.getFirstMatch(/(ipod|iphone)/i,l);return{type:p.PLATFORMS_MAP.mobile,vendor:"Apple",model:h}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName(!0)==="blackberry"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(l){return l.getBrowserName(!0)==="bada"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName()==="windows phone"},describe:function(){return{type:p.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(l){var h=Number(String(l.getOSVersion()).split(".")[0]);return l.getOSName(!0)==="android"&&h>=3},describe:function(){return{type:p.PLATFORMS_MAP.tablet}}},{test:function(l){return l.getOSName(!0)==="android"},describe:function(){return{type:p.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getOSName(!0)==="macos"},describe:function(){return{type:p.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(l){return l.getOSName(!0)==="windows"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="linux"},describe:function(){return{type:p.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="playstation 4"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}},{test:function(l){return l.getOSName(!0)==="roku"},describe:function(){return{type:p.PLATFORMS_MAP.tv}}}];s.default=b,a.exports=s.default},95:function(a,s,i){"use strict";s.__esModule=!0,s.default=void 0;var c,u=(c=i(17))&&c.__esModule?c:{default:c},p=i(18),b=[{test:function(l){return l.getBrowserName(!0)==="microsoft edge"},describe:function(l){if(/\sedg\//i.test(l))return{name:p.ENGINE_MAP.Blink};var h=u.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,l);return{name:p.ENGINE_MAP.EdgeHTML,version:h}}},{test:[/trident/i],describe:function(l){var h={name:p.ENGINE_MAP.Trident},g=u.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:function(l){return l.test(/presto/i)},describe:function(l){var h={name:p.ENGINE_MAP.Presto},g=u.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:function(l){var h=l.test(/gecko/i),g=l.test(/like gecko/i);return h&&!g},describe:function(l){var h={name:p.ENGINE_MAP.Gecko},g=u.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:p.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(l){var h={name:p.ENGINE_MAP.WebKit},g=u.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,l);return g&&(h.version=g),h}}];s.default=b,a.exports=s.default}})})});I();I();I();I();var Se=(u,p,b,...l)=>le(void 0,[u,p,b,...l],function*(a,s,i,c={}){let h=yield fetch(a,{method:s,headers:pe({"Content-Type":"application/json"},c),body:i?JSON.stringify(i):null});if(!h.ok)throw h;try{return yield h.json()}catch(g){return h.ok}});I();var vu=qt(mu()),oe=class{constructor(s){this.debug=(0,vu.default)(s)}log(s,...i){this.debug(s,...i)}};I();I();var Qu=qt(Xu());var ie=class{constructor(s={}){this.subscribe=s=>{this.callbacks.push(s)};this.unsubscribe=s=>{this.callbacks=this.callbacks.filter(i=>i!==s)};this.publish=(...s)=>{!this.callbacks||this.callbacks.forEach(i=>{this.callListener(i,s).catch(c=>{this.logger.log("superviz-sdk:observer-helper:publish:error",`
            Failed to execute callback on publish value.
            Callback: ${i}
            Event: ${JSON.stringify(s)}
            Error: ${c}
          `)})})};this.reset=()=>{this.callbacks=[]};this.destroy=()=>{delete this.logger,delete this.callbacks};this.callListener=(s,i)=>new Promise((c,u)=>{try{let p=s(...i);c(p)}catch(p){u(p)}});let{logger:i,throttleTime:c}=s;this.logger=i!=null?i:new oe("@superviz/sdk/observer-helper"),this.throttle=c,this.callbacks=[],this.throttle&&(this.publish=(0,Qu.default)(this.publish,this.throttle))}};var Wn=class{constructor(){this.observers={};this.subscribe=(s,i)=>{this.logger.log(`subscribed to ${s} event`),this.observers[s]||(this.observers[s]=new ie({logger:this.logger})),this.observers[s].subscribe(i)};this.unsubscribe=(s,i)=>{if(this.logger.log(`unsubscribed from ${s} event`),!!this.observers[s]){if(!i){this.observers[s].destroy(),delete this.observers[s];return}this.observers[s].unsubscribe(i)}};this.publish=(s,i)=>{s in this.observers&&this.observers[s].publish(i)}}};I();I();I();var ju=qt(Un()),vs=class{setConfig(s){this.configuration=s}get(s,i){return this.configuration?ju.default.get(this.configuration,s,i):i}},V=new vs;var Qe=class{static createUrl(s,i,c={}){let u=new URL(i,s);return Object.keys(c).forEach(p=>u.searchParams.append(p,c[p])),u.toString()}static validateApiKey(s,i){let c="/user/checkapikey",u=this.createUrl(s,c);return Se(u,"POST",{apiKey:i})}static fetchConfig(s,i){let c="/immersive-config",u=this.createUrl(s,c);return Se(u,"POST",{apiKey:i})}static fetchLimits(s,i){return le(this,null,function*(){let c="/user/check_limits",u=this.createUrl(s,c);return(yield Se(u,"GET","",{apikey:i})).usage})}static fetchWaterMark(s,i){return le(this,null,function*(){let c="/user/watermark",u=this.createUrl(s,c),{message:p}=yield Se(u,"POST",{apiKey:i});return p})}static createAnnotations(s,i,c){return le(this,null,function*(){let u="/annotations",p=this.createUrl(s,u);return Se(p,"POST",pe({},c),{apikey:i})})}static updateComment(s,i,c,u){return le(this,null,function*(){let p=`/comments/${c}`,b=this.createUrl(s,p);return Se(b,"PUT",{text:u},{apikey:i})})}static createComment(s,i,c){return le(this,null,function*(){let u="/comments",p=this.createUrl(s,u);return Se(p,"POST",pe({},c),{apikey:i})})}static fetchAnnotation(s,i,c){return le(this,null,function*(){let u="/annotations",p=this.createUrl(s,u,{roomId:c.roomId,url:c.url});return Se(p,"GET",void 0,{apikey:i})})}static resolveAnnotation(s,i,c){return le(this,null,function*(){let u=`/annotations/resolve/${c}`,p=this.createUrl(s,u);return Se(p,"POST",{},{apikey:i})})}static deleteComment(s,i,c){return le(this,null,function*(){let u=`/comments/${c}`,p=this.createUrl(s,u);return Se(p,"DELETE",{},{apikey:i})})}static deleteAnnotation(s,i,c){return le(this,null,function*(){let u=`/annotations/${c}`,p=this.createUrl(s,u);return Se(p,"DELETE",{},{apikey:i})})}static createOrUpdateParticipant(s){return le(this,null,function*(){let i=V.get("apiUrl"),c="/participants",u=this.createUrl(i,c);return Se(u,"POST",pe({},s),{apikey:V.get("apiKey")})})}static sendActivity(s,i,c,u){return le(this,null,function*(){let p="/activity",b=V.get("apiUrl"),l=V.get("roomId"),h=V.get("apiKey"),g=this.createUrl(b,p);return Se(g,"POST",{groupId:i,groupName:c,meetingId:l,product:u,userId:s},{apikey:h})})}static validadeParticipantIsEnteringTwice(s,i,c,u){return le(this,null,function*(){let p=window.btoa(u),l=`https://rest.ably.io/channels/${`superviz:${i.toLowerCase()}-${c}`}/presence`;try{return(yield(yield fetch(l,{headers:{Authorization:`Basic ${p}`}})).json()).some(T=>JSON.parse(T.data).id===s.id)}catch(h){throw new Error("Failed to fetch realtime participants")}})}};I();var je=class extends Wn{constructor(){super(...arguments);this.isAttached=!1;this.attach=i=>{if(Object.values(i).includes(null)||Object.values(i).includes(void 0)){let h=`${this.name} @ attach - params are required`;throw this.logger.log(h),new Error(h)}let{realtime:c,localParticipant:u,group:p,config:b,eventBus:l}=i;if(!c.isDomainWhitelisted){let h=`Component ${this.name} can't be used because this website's domain is not whitelisted. Please add your domain in https://dashboard.superviz.com/developer`;this.logger.log(h);return}if(V.setConfig(b),this.realtime=c,this.localParticipant=u,this.group=p,this.eventBus=l,this.isAttached=!0,!this.realtime.isJoinedRoom){this.logger.log(`${this.name} @ attach - not joined yet`),setTimeout(()=>{this.logger.log(`${this.name} @ attach - retrying`),this.attach(i)},1e3);return}this.logger.log(`${this.name} @ attached`),this.start()};this.detach=()=>{if(!this.isAttached){this.logger.log(`${this.name} @ detach - component is not attached}`);return}this.logger.log("detached"),this.destroy(),Object.values(this.observers).forEach(i=>{i.reset(),i.destroy()}),this.observers=void 0,this.realtime=void 0,this.localParticipant=void 0,this.isAttached=!1}}};I();I();var bs=(i=>(i.LEFT="left",i.RIGHT="right",i))(bs||{}),_s=(u=>(u.TOP_LEFT="top-left",u.TOP_RIGHT="top-right",u.BOTTOM_LEFT="bottom-left",u.BOTTOM_RIGHT="bottom-right",u))(_s||{});var Es=class extends je{constructor(i,c){super();this.sidebarOpen=!1;this.onPinFixed=i=>{this.coordinates=i};this.toggleAnnotationSidebar=()=>{this.element.toggleAttribute("open"),this.sidebarOpen=this.element.hasAttribute("open"),this.pinAdapter.setActive(this.sidebarOpen),document.body.dispatchEvent(new CustomEvent("prepare-to-create-annotation",{detail:void 0,composed:!0,bubbles:!0})),document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0}))};this.onSelectAnnotation=i=>{this.sidebarOpen||this.toggleAnnotationSidebar()};this.positionFloatingButton=()=>{var h,g;this.button=document.createElement("superviz-comments-button");let i=(h=this.layoutOptions)==null?void 0:h.buttonLocation,c=(g=this.layoutOptions)==null?void 0:g.position;if(!i){document.body.appendChild(this.button),this.button.commentsPosition=c;return}let u="",p=Object.values(_s),b=!1,l=!p.includes(i.toLocaleLowerCase());if(l){let O=window.document.body.querySelector(`#${i}`);O?(O.appendChild(this.button),u="position: relative"):(b=!0,i="top-left")}if(!l||b){document.body.appendChild(this.button);let[O,T]=i.split("-");u=`${O}: 20px; ${T}: 20px;`}this.button.positionStyles=u,this.button.commentsPosition=c};this.positionComments=()=>{var b;this.element=document.createElement("superviz-comments"),this.element.setAttribute("comments",JSON.stringify([])),this.element.side="left: 0;",document.body.appendChild(this.element);let i=(b=this.layoutOptions)==null?void 0:b.position;if(!i)return;let c=Object.values(bs),u=i.toLocaleLowerCase();if(!c.includes(u))return;let p=i==="left"?"left: 0;":"right: 0;";this.element.side=p};this.createAnnotation=c=>le(this,[c],function*({detail:i}){try{let{text:u}=i,{url:p}=this,b=pe({},this.coordinates),l=yield Qe.createAnnotations(V.get("apiUrl"),V.get("apiKey"),{roomId:V.get("roomId"),position:JSON.stringify(b),url:p,userId:this.localParticipant.id}),h=yield this.createComment(l.uuid,u);this.addAnnotation(at(pe({},l),{comments:[h]})),this.pinAdapter.removeAnnotationPin("temporary-pin"),document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:l.uuid},composed:!0,bubbles:!0}))}catch(u){this.logger.log("error when creating annotation",u)}});this.deleteAnnotation=c=>le(this,[c],function*({detail:i}){try{let{uuid:u}=i;yield Qe.deleteAnnotation(V.get("apiUrl"),V.get("apiKey"),u);let p=this.annotations.filter(b=>b.uuid!==u);this.updateAnnotationList(p),this.pinAdapter.removeAnnotationPin(u),this.element.updateAnnotations(this.annotations)}catch(u){this.logger.log("error when deleting annotation",u)}});this.updateComment=c=>le(this,[c],function*({detail:i}){try{let{uuid:u,text:p}=i;yield Qe.updateComment(V.get("apiUrl"),V.get("apiKey"),u,p);let b=this.annotations.map(l=>Object.assign({},l,{comments:l.comments.map(h=>h.uuid===u?Object.assign({},h,{text:p}):h)}));this.updateAnnotationList(b)}catch(u){this.logger.log("error when updating comment",u)}});this.resolveAnnotation=c=>le(this,[c],function*({detail:i}){try{let{uuid:u}=i,{resolved:p}=yield Qe.resolveAnnotation(V.get("apiUrl"),V.get("apiKey"),u),b=this.annotations.map(l=>l.uuid===u?Object.assign({},l,{resolved:p}):l);if(this.updateAnnotationList(b),p){this.pinAdapter.removeAnnotationPin(u);return}this.pinAdapter.updateAnnotations(this.annotations)}catch(u){this.logger.log("error when resolve annotation",u)}});this.deleteComment=c=>le(this,[c],function*({detail:i}){try{let{uuid:u,annotationId:p}=i;if(!u||!p)return;yield Qe.deleteComment(V.get("apiUrl"),V.get("apiKey"),u);let b=this.annotations.find(h=>h.uuid===p);b.comments=b.comments.filter(h=>h.uuid!==u);let l=this.annotations.map(h=>h.uuid===p?b:h);this.element.updateAnnotations(l),this.updateAnnotationList(l)}catch(u){this.logger.log("error when deleting comment",u)}});this.onAnnotationListUpdate=i=>{let{data:c,clientId:u}=i;this.localParticipant.id!==u&&(this.annotations=c,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations))};this.name="comments",this.logger=new oe("@superviz/sdk/comments-component"),this.annotations=[],this.layoutOptions=c!=null?c:{position:"left",buttonLocation:"top-left"},setTimeout(()=>{var u,p,b,l,h;i.setCommentsMetadata((p=(u=this.layoutOptions)==null?void 0:u.position)!=null?p:"left",(l=(b=this.localParticipant)==null?void 0:b.avatar)==null?void 0:l.imageUrl,(h=this.localParticipant)==null?void 0:h.name)}),this.pinAdapter=i}get url(){let i=new URL(this.clientUrl);return i.search="",i.toString()}start(){this.clientUrl=window.location.href,this.positionComments(),this.positionFloatingButton(),this.fetchAnnotations(),this.waterMarkState(),this.addListeners(),this.pinAdapter.setPinsVisibility(!0)}destroy(){this.logger.log("comments component @ destroy"),this.destroyListeners(),this.button.remove(),this.element.remove(),this.element=void 0,this.pinAdapter.destroy()}addListeners(){this.button.addEventListener("toggle",this.toggleAnnotationSidebar),this.element.addEventListener("toggle",this.toggleAnnotationSidebar),document.body.addEventListener("create-annotation",this.createAnnotation),this.element.addEventListener("resolve-annotation",this.resolveAnnotation),this.element.addEventListener("delete-annotation",this.deleteAnnotation),this.element.addEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,!0)}),this.element.addEventListener("update-comment",this.updateComment),this.element.addEventListener("delete-comment",this.deleteComment),document.body.addEventListener("select-annotation",this.onSelectAnnotation),this.realtime.commentsObserver.subscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.subscribe(this.onPinFixed)}destroyListeners(){this.button.removeEventListener("toggle",this.toggleAnnotationSidebar),this.element.removeEventListener("toggle",this.toggleAnnotationSidebar),this.element.removeEventListener("create-annotation",this.createAnnotation),this.element.removeEventListener("resolve-annotation",this.resolveAnnotation),this.element.removeEventListener("create-comment",({detail:i})=>{this.createComment(i.uuid,i.text,!0)}),this.element.removeEventListener("update-comment",this.updateComment),this.element.removeEventListener("delete-comment",this.deleteComment),document.body.removeEventListener("select-annotation",this.onSelectAnnotation),this.realtime.commentsObserver.unsubscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.unsubscribe(this.onPinFixed)}createComment(i,c,u=!1){return le(this,null,function*(){try{let p=yield Qe.createComment(V.get("apiUrl"),V.get("apiKey"),{annotationId:i,userId:this.localParticipant.id,text:c});return u&&this.addComment(i,p),p}catch(p){this.logger.log("error when creating comment",p)}})}addAnnotation(i){let c=[i,...this.annotations];this.element.updateAnnotations(c),this.pinAdapter.updateAnnotations(c),this.updateAnnotationList(c)}updateAnnotationList(i){this.annotations=i,this.realtime.updateComments(i)}addComment(i,c){let u=this.annotations.find(b=>b.uuid===i);u.comments.push(c);let p=this.annotations.map(b=>b.uuid===i?u:b);this.updateAnnotationList(p),this.element.updateAnnotations(p)}fetchAnnotations(){return le(this,null,function*(){try{let i=yield Qe.fetchAnnotation(V.get("apiUrl"),V.get("apiKey"),{roomId:V.get("roomId"),url:this.url});this.annotations=i,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations)}catch(i){this.logger.log("error when fetching annotations",i)}})}waterMarkState(){return le(this,null,function*(){try{let i=yield Qe.fetchWaterMark(V.get("apiUrl"),V.get("apiKey"));this.element.waterMarkStatus(i)}catch(i){this.logger.log("error when fetching waterMark",i)}})}};I();I();var As=class{constructor(s,i){this.isPinsVisible=!0;this.selectedPin=null;this.temporaryPinCoordinates=null;this.commentsSide="left";this.localParticipant={};this.setCommentsMetadata=(s,i,c)=>{this.commentsSide=s,this.localParticipant.avatar=i,this.localParticipant.name=c};this.resetPins=s=>{s&&(s==null?void 0:s.key)!=="Escape"||(this.resetSelectedPin(),this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};this.animate=()=>{(this.isActive||this.isPinsVisible)&&(this.renderAnnotationsPins(),this.renderDivWrapper()),this.temporaryPinCoordinates&&this.renderTemporaryPin(),requestAnimationFrame(this.animate)};this.setMouseDownCoordinates=({x:s,y:i})=>{this.mouseDownCoordinates={x:s,y:i}};this.annotationSelected=({detail:{uuid:s}})=>{var u,p;if(!s)return;let i=JSON.parse((p=(u=this.selectedPin)==null?void 0:u.getAttribute("annotation"))!=null?p:"{}");if(this.resetPins(),(i==null?void 0:i.uuid)===s)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let c=this.pins.get(s);!c||(c.setAttribute("active",""),this.selectedPin=c,this.goToPin(s))};this.onClick=s=>{if(!this.isActive)return;let i=this.canvas.getBoundingClientRect(),{x:c,y:u}=this.mouseDownCoordinates,p=c-i.x,b=u-i.y,l=s.clientX-i.left,h=s.clientY-i.top;if(Math.hypot(l-p,h-b)>10)return;let P=this.canvas.getContext("2d").getTransform().inverse(),L=new DOMPoint(l,h).matrixTransform(P);this.onPinFixedObserver.publish({x:L.x,y:L.y,type:"canvas"}),this.resetSelectedPin(),this.temporaryPinCoordinates={x:L.x,y:L.y},this.renderTemporaryPin();let R=document.getElementById("superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,R.setAttribute("movedPosition",String(this.movedTemporaryPin)),!this.selectedPin&&document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onMouseMove=s=>{let{x:i,y:c}=s;this.mouseElement||(this.mouseElement=this.createMouseElement()),this.mouseElement.setAttribute("position",JSON.stringify({x:i,y:c}))};this.onMouseLeave=()=>{this.mouseElement&&(this.mouseElement.remove(),this.mouseElement=null),this.canvas.style.cursor="default"};this.onMouseEnter=()=>{this.mouseElement||(this.mouseElement=this.createMouseElement())};this.onToggleAnnotationSidebar=({detail:s})=>{let{open:i}=s;i||(this.pins.forEach(c=>{c.removeAttribute("active")}),this.pins.has("temporary-pin")&&this.removeAnnotationPin("temporary-pin"))};if(this.logger=new oe("@superviz/sdk/comments-component/canvas-pin-adapter"),this.canvas=document.getElementById(s),this.isActive=!1,this.pins=new Map,this.goToPinCallback=i==null?void 0:i.onGoToPin,!this.canvas){let c=`Canvas with id ${s} not found`;throw this.logger.log(c),new Error(c)}this.canvasSides=this.canvas.getBoundingClientRect(),document.body.style.position="relative",this.onPinFixedObserver=new ie({logger:this.logger}),this.divWrapper=this.renderDivWrapper(),this.annotations=[],this.renderAnnotationsPins(),this.animateFrame=requestAnimationFrame(this.animate)}destroy(){this.removeListeners(),this.removeAnnotationsPins(),this.mouseElement=null,this.pins=new Map,this.divWrapper.remove(),this.onPinFixedObserver.destroy(),this.onPinFixedObserver=null,this.canvas.style.cursor="default",this.annotations=[],cancelAnimationFrame(this.animateFrame)}setPinsVisibility(s){if(this.isPinsVisible=s,this.isPinsVisible){this.renderAnnotationsPins();return}this.removeAnnotationsPins()}setActive(s){if(this.isActive=s,this.canvas.style.cursor=s?"none":"default",this.isActive){this.addListeners();return}this.removeListeners()}updateAnnotations(s){this.logger.log("updateAnnotations",s),this.annotations=s,!(!this.isActive&&!this.isPinsVisible)&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}removeAnnotationPin(s){let i=this.pins.get(s);!i||(i.remove(),this.pins.delete(s),this.annotations=this.annotations.filter(c=>c.uuid!==s))}renderTemporaryPin(){var O,T;let s=document.getElementById("superviz-temporary-pin");s||(s=document.createElement("superviz-comments-annotation-pin"),s.id="superviz-temporary-pin",s.setAttribute("type","add"),s.setAttribute("showInput",""),s.setAttribute("containerSides",JSON.stringify(this.canvasSides)),s.setAttribute("commentsSide",this.commentsSide),s.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),s.setAttribute("annotation",JSON.stringify({})),s.setAttribute("localAvatar",(O=this.localParticipant.avatar)!=null?O:""),s.setAttribute("localName",(T=this.localParticipant.name)!=null?T:""),s.setAttributeNode(document.createAttribute("active")),this.divWrapper.appendChild(s));let{x:i,y:c}=this.temporaryPinCoordinates,p=this.canvas.getContext("2d").getTransform(),b=p.e,l=p.f,h=i+b,g=c+l;s.setAttribute("position",JSON.stringify({x:h,y:g})),this.pins.set("temporary-pin",s)}addListeners(){this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.setMouseDownCoordinates),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseout",this.onMouseLeave),this.canvas.addEventListener("mouseenter",this.onMouseEnter),document.body.addEventListener("keyup",this.resetPins),document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar)}removeListeners(){this.canvas.removeEventListener("click",this.onClick),this.canvas.removeEventListener("mousedown",this.setMouseDownCoordinates),this.canvas.removeEventListener("mousemove",this.onMouseMove),this.canvas.removeEventListener("mouseout",this.onMouseLeave),this.canvas.removeEventListener("mouseenter",this.onMouseEnter),document.body.removeEventListener("keyup",this.resetPins),document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar)}createMouseElement(){let s=document.createElement("superviz-comments-annotation-pin");return s.setAttribute("type","add"),s.setAttribute("annotation",JSON.stringify({})),s.setAttribute("position",JSON.stringify({x:0,y:0})),document.body.appendChild(s),this.canvas.style.cursor="none",s}resetSelectedPin(){!this.selectedPin||(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}renderDivWrapper(){let s=this.canvas.getBoundingClientRect(),i=document.createElement("div");return i.id="superviz-canvas-wrapper",this.canvas.parentElement.style.position="relative",i.style.position="fixed",i.style.top=`${s.top}px`,i.style.left=`${s.left}px`,i.style.width=`${s.width}px`,i.style.height=`${s.height}px`,i.style.pointerEvents="none",i.style.overflow="hidden",document.getElementById("superviz-canvas-wrapper")||this.canvas.parentElement.appendChild(i),i}renderAnnotationsPins(){if(!this.annotations.length||this.canvas.style.display==="none"){this.removeAnnotationsPins();return}this.annotations.forEach(s=>{if(s.resolved)return;let i=JSON.parse(s.position);if((i==null?void 0:i.type)!=="canvas")return;let{x:c,y:u}=i,b=this.canvas.getContext("2d").getTransform(),l=b.e,h=b.f,g=c+l,O=u+h;if(this.pins.has(s.uuid)){let P=this.pins.get(s.uuid);if(this.divWrapper.clientWidth>g&&this.divWrapper.clientHeight>O){P.setAttribute("style","opacity: 1"),this.pins.get(s.uuid).setAttribute("position",JSON.stringify({x:g,y:O}));return}P.setAttribute("style","opacity: 0");return}let T=document.createElement("superviz-comments-annotation-pin");T.setAttribute("type","show"),T.setAttribute("annotation",JSON.stringify(s)),T.setAttribute("position",JSON.stringify({x:g,y:O})),T.id=s.uuid,this.divWrapper.appendChild(T),this.pins.set(s.uuid,T)})}removeAnnotationsPins(){this.pins.forEach(s=>{s.remove()}),this.pins.clear()}goToPin(s){let i=this.annotations.find(L=>L.uuid===s);if(!i)return;let c=JSON.parse(i.position);if((c==null?void 0:c.type)!=="canvas")return;let u=this.canvas.getBoundingClientRect(),{width:p,height:b}=u,{x:l,y:h}=c,g=p/2,O=b/2,T=g-l,P=O-h;this.goToPinCallback&&this.goToPinCallback({x:T,y:P})}};I();var el=qt(Un());var Ts=class{constructor(s,i={}){this.localParticipant={};this.isPinsVisible=!0;this.selectedPin=null;this.dataAttribute="data-superviz-id";this.commentsSide="left";this.temporaryPinCoordinates={};this.elementsWithDataId={};this.divWrappers=new Map;this.voidElementsWrappers=new Map;this.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];this.animate=()=>{this.voidElementsWrappers&&(this.updatePinsPositions(),this.animateFrame=requestAnimationFrame(this.animate))};this.setCommentsMetadata=(s,i,c)=>{this.commentsSide=s,this.localParticipant.avatar=i,this.localParticipant.name=c};this.resetPins=s=>{s&&(s==null?void 0:s.key)!=="Escape"||(this.resetSelectedPin(),this.temporaryPinCoordinates.elementId&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={}))};this.annotationSelected=({detail:{uuid:s}})=>{if(!s)return;let i=this.annotations.find(p=>{var b;return p.uuid===((b=this.selectedPin)==null?void 0:b.id)});if(this.resetPins(),(i==null?void 0:i.uuid)===s)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let c=this.pins.get(s);if(!c)return;c.setAttribute("active",""),this.selectedPin=c;let u=this.annotations.find(p=>p.uuid===s);this.selectedPin.setAttribute("elementId",JSON.parse(u.position).elementId)};this.onClick=s=>{if(!this.isActive||s.target===this.pins.get("temporary-pin"))return;let i=s.target,c=s.currentTarget;if(i!==c&&this.pins.has(i.id))return;let u=c.getAttribute("data-wrapper-id"),p=c.getBoundingClientRect(),{x:b,y:l}=this.mouseDownCoordinates,h=c.getBoundingClientRect().width/c.offsetWidth||1,g=(s.clientX-p.left)/h,O=(s.clientY-p.top)/h,T=(b-p.x)/h,P=(l-p.y)/h;if(Math.hypot(g-T,O-P)>10)return;this.onPinFixedObserver.publish({x:g,y:O-30,type:"html",elementId:u}),this.resetSelectedPin(),this.temporaryPinCoordinates=at(pe({},this.temporaryPinCoordinates),{x:g,y:O-30}),this.renderTemporaryPin(u);let R=this.divWrappers.get(u).querySelector("#superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,R.setAttribute("movedPosition",String(this.movedTemporaryPin)),document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onMouseDown=({x:s,y:i})=>{this.mouseDownCoordinates={x:s,y:i}};this.handleMutationObserverChanges=s=>{s.forEach(i=>{var g;let{target:c,oldValue:u}=i,p=c.getAttribute(this.dataAttribute);if(!p&&!u||p===u)return;let b=this.dataAttributeValueFilters.some(O=>u.match(O));if(!p&&u&&!b){this.removeAnnotationPin("temporary-pin"),this.clearElement(u),((g=this.selectedPin)==null?void 0:g.getAttribute("elementId"))===u&&(document.body.dispatchEvent(new CustomEvent("unselect-annotation")),this.selectedPin=null);return}let h=this.dataAttributeValueFilters.some(O=>p.match(O));(u&&this.elementsWithDataId[u]||h)&&this.clearElement(u),!h&&(this.setElementReadyToPin(c,p),this.renderAnnotationsPins())})};this.onToggleAnnotationSidebar=({detail:s})=>{let{open:i}=s;i||(this.resetSelectedPin(),this.pins.has("temporary-pin")&&this.removeAnnotationPin("temporary-pin"))};if(this.logger=new oe("@superviz/sdk/comments-component/container-pin-adapter"),this.container=document.getElementById(s),!this.container){let p=`Element with id ${s} not found`;throw this.logger.log(p),new Error(p)}if(typeof i!="object")throw new Error("Second argument of the HTMLPin constructor must be an object");let{dataAttributeName:c,dataAttributeValueFilters:u}=i;if(c==="")throw new Error("dataAttributeName must be a non-empty string");if(c===null)throw new Error("dataAttributeName cannot be null");if(c!==void 0&&typeof c!="string")throw new Error("dataAttributeName must be a non-empty string");this.dataAttribute=c||this.dataAttribute,this.dataAttributeValueFilters=u||[],this.isActive=!1,this.prepareElements(),this.mutationObserver=new MutationObserver(this.handleMutationObserverChanges),this.observeContainer(),this.pins=new Map,this.onPinFixedObserver=new ie({logger:this.logger}),this.annotations=[],document.body.addEventListener("select-annotation",this.annotationSelected),this.voidElementsWrappers.size&&(this.animateFrame=requestAnimationFrame(this.animate))}destroy(){this.logger.log("Destroying HTML Pin Adapter for Comments"),this.removeListeners(),this.removeObservers(),this.divWrappers.forEach(s=>s.remove()),this.divWrappers.clear(),this.pins.forEach(s=>s.remove()),this.pins.clear(),this.divWrappers=void 0,this.pins=void 0,this.elementsWithDataId=void 0,this.logger=void 0,this.onPinFixedObserver.destroy(),this.onPinFixedObserver=void 0,this.container=void 0,this.voidElementsWrappers.clear(),this.voidElementsWrappers=void 0,this.annotations=[],document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),cancelAnimationFrame(this.animateFrame)}addElementListeners(s){this.divWrappers.get(s).addEventListener("click",this.onClick,!0),this.divWrappers.get(s).addEventListener("mousedown",this.onMouseDown)}removeElementListeners(s){this.divWrappers.get(s).removeEventListener("click",this.onClick,!0),this.divWrappers.get(s).removeEventListener("mousedown",this.onMouseDown)}removeObservers(){this.mutationObserver.disconnect(),this.mutationObserver=void 0}addListeners(){Object.keys(this.elementsWithDataId).forEach(s=>this.addElementListeners(s)),document.body.addEventListener("keyup",this.resetPins),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar)}removeListeners(){Object.keys(this.elementsWithDataId).forEach(s=>this.removeElementListeners(s)),document.body.removeEventListener("keyup",this.resetPins)}observeContainer(){this.mutationObserver.observe(this.container,{subtree:!0,attributes:!0,attributeFilter:[this.dataAttribute],attributeOldValue:!0})}prepareElements(){this.container.querySelectorAll(`[${this.dataAttribute}]`).forEach(i=>{let c=i.getAttribute(this.dataAttribute);this.dataAttributeValueFilters.some((p,b)=>c.match(p))||this.setElementReadyToPin(i,c)})}setAddCursor(){Object.keys(this.elementsWithDataId).forEach(s=>{this.divWrappers.get(s).style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.divWrappers.get(s).style.pointerEvents="auto"})}removeAddCursor(){Object.keys(this.elementsWithDataId).forEach(s=>{this.divWrappers.get(s).style.cursor="default",this.divWrappers.get(s).style.pointerEvents="none"})}setPinsVisibility(s){this.isPinsVisible=s,this.isPinsVisible&&this.renderAnnotationsPins(),this.removeAnnotationsPins()}removeAnnotationPin(s){let i=this.pins.get(s);!i&&s==="temporary-pin"||(i&&(i.remove(),this.pins.delete(s)),this.annotations=this.annotations.filter(c=>c.uuid!==s))}updateAnnotations(s){this.logger.log("updateAnnotations",s),this.annotations=s,this.isPinsVisible&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}setActive(s){if(this.isActive=s,this.isActive){this.addListeners(),this.setAddCursor(),this.prepareElements();return}this.removeListeners(),this.removeAddCursor()}renderTemporaryPin(s){var p,b,l;(p=this.temporaryPinCoordinates).elementId||(p.elementId=s);let i=this.pins.get("temporary-pin");if(s&&s!==this.temporaryPinCoordinates.elementId&&(this.pins.get("temporary-pin").remove(),this.pins.delete("temporary-pin"),this.temporaryPinCoordinates.elementId=s,i=null),!i){let h=this.elementsWithDataId[s].getBoundingClientRect();i=document.createElement("superviz-comments-annotation-pin"),i.id="superviz-temporary-pin",i.setAttribute("type","add"),i.setAttribute("showInput",""),i.setAttribute("containerSides",JSON.stringify(h)),i.setAttribute("commentsSide",this.commentsSide),i.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),i.setAttribute("annotation",JSON.stringify({})),i.setAttribute("localAvatar",(b=this.localParticipant.avatar)!=null?b:""),i.setAttribute("localName",(l=this.localParticipant.name)!=null?l:""),i.setAttributeNode(document.createAttribute("active")),this.addTemporaryPinToElement(s,i)}let{x:c,y:u}=this.temporaryPinCoordinates;i.setAttribute("position",JSON.stringify({x:c,y:u})),this.pins.set("temporary-pin",i)}renderAnnotationsPins(){if(!this.annotations.length){this.removeAnnotationsPins();return}this.annotations.forEach(s=>{if(s.resolved)return;let{x:i,y:c,elementId:u,type:p}=JSON.parse(s.position);if(p!=="html"||this.pins.has(s.uuid)||!this.elementsWithDataId[u])return;let l=this.divWrappers.get(u);if(!l)return;let h=this.createPin(s,i,c);l.appendChild(h),this.pins.set(s.uuid,h)})}updatePinsPositions(){this.voidElementsWrappers.forEach((s,i)=>{let c=JSON.stringify(s.getBoundingClientRect()),u=this.elementsWithDataId[i].getBoundingClientRect();(0,el.isEqual)(JSON.stringify(u),c)||(s.style.setProperty("top",`${u.top}px`),s.style.setProperty("left",`${u.left}px`),s.style.setProperty("width",`${u.width}px`),s.style.setProperty("height",`${u.height}px`))})}clearElement(s){if(!this.elementsWithDataId[s])return;let c=this.divWrappers.get(s);if(c){let u=c.children,{length:p}=u;for(let b=0;b<p;++b){let l=u.item(b);this.pins.delete(l.id)}c.remove()}this.voidElementsWrappers.delete(s),this.removeElementListeners(s),this.divWrappers.delete(s),this.elementsWithDataId[s]=void 0,this.voidElementsWrappers.size||(cancelAnimationFrame(this.animateFrame),this.animateFrame=void 0)}resetSelectedPin(){!this.selectedPin||(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}removeAnnotationsPins(){this.pins.forEach(s=>{s.remove()}),this.pins.clear()}setElementReadyToPin(s,i){if(!this.elementsWithDataId[i]){if(this.elementsWithDataId[i]=s,!this.divWrappers.get(i)){let c=this.createWrapper(s,i);this.divWrappers.set(i,c)}!this.isActive||!this.isPinsVisible||(this.divWrappers.get(i).style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.divWrappers.get(i).style.pointerEvents="auto",this.addElementListeners(i))}}addTemporaryPinToElement(s,i){if(!this.elementsWithDataId[s])return;let u=this.divWrappers.get(s);!u||u.appendChild(i)}createPin(s,i,c){let u=document.createElement("superviz-comments-annotation-pin");return u.setAttribute("type","show"),u.setAttribute("annotation",JSON.stringify(s)),u.setAttribute("position",JSON.stringify({x:i,y:c})),u.id=s.uuid,u}createWrapper(s,i){let c=s,u=`superviz-id-${i}`;if(this.divWrappers.get(i))return;let p=c.getBoundingClientRect(),b=document.createElement("div");if(b.setAttribute("data-wrapper-id",i),b.id=u,b.style.position="absolute",b.style.pointerEvents="none",b.style.transform="translateX(0) translateY(0) scale(1)",b.style.cursor="default",b.style.top="0",b.style.left="0",b.style.width="100%",b.style.height="100%",!this.VOID_ELEMENTS.includes(this.elementsWithDataId[i].tagName.toLowerCase()))return this.elementsWithDataId[i].appendChild(b),this.setPositionNotStatic(this.elementsWithDataId[i]),b;b.style.position="fixed",b.style.top=`${p.top}px`,b.style.left=`${p.left}px`,b.style.width=`${p.width}px`,b.style.height=`${p.height}px`;let l=this.elementsWithDataId[i].parentElement;return l||(l=document.body),this.setPositionNotStatic(l),l.appendChild(b),this.voidElementsWrappers.set(i,b),this.animateFrame||(this.animateFrame=requestAnimationFrame(this.animate)),b}setPositionNotStatic(s){let{position:i}=window.getComputedStyle(s);i==="static"&&s.style.setProperty("position","relative")}};I();var Cs=qt(Un());I();I();I();var dt=qt(tl()),ki=class{constructor(){this.browser=dt.default.getParser(navigator.userAgent)}get clientStats(){return this.browser.getResult()}get isFirefox(){return this.browser.isBrowser(dt.default.BROWSER_MAP.firefox)}get isSafari(){return this.browser.isBrowser(dt.default.BROWSER_MAP.safari)}get isChrome(){return this.browser.isBrowser(dt.default.BROWSER_MAP.chrome)}get isIE(){return this.browser.isBrowser(dt.default.BROWSER_MAP.ie)}get isEdge(){return this.browser.isBrowser(dt.default.BROWSER_MAP.edge)}get isMobileDevice(){return(this.browser.is(dt.default.PLATFORMS_MAP.mobile)||this.browser.is(dt.default.PLATFORMS_MAP.tablet))&&!navigator.userAgent.match(/iPad/i)}get isTabletDevice(){return this.browser.is(dt.default.PLATFORMS_MAP.tablet)}get isAndroid(){return this.isMobileDevice&&!!navigator.userAgent.match(/Android/i)}get isIpad(){return!!navigator.userAgent.match(/iPad/i)}get isIphone(){return this.isMobileDevice&&!!navigator.userAgent.match(/iPhone/i)}get isAppleMobileDevice(){return this.isIpad||this.isIphone}};I();var Hi=class{constructor(){this.updateMeetingConnectionStatus=s=>{this.oldConnectionStatus=this.connectionStatus,this.connectionStatus=s,this.connectionStatusObserver.publish(s),this.logger.log("CONNECTION STATUS CHANGE",s)};this.onUpdateBrowserOnlineStatus=s=>{let{type:i}=s;if(i==="online"){this.updateMeetingConnectionStatus(1);return}this.updateMeetingConnectionStatus(4)};this.logger=new oe("@superviz/sdk/connection-service"),this.connectionStatus=0,this.connectionStatusObserver=new ie({logger:this.logger})}addListeners(){window.addEventListener("online",this.onUpdateBrowserOnlineStatus),window.addEventListener("offline",this.onUpdateBrowserOnlineStatus)}removeListeners(){window.removeEventListener("online",this.onUpdateBrowserOnlineStatus),window.removeEventListener("offline",this.onUpdateBrowserOnlineStatus)}};I();I();var zi=class{build(s,i,c,u={},p={}){let b=document.querySelector(`#${s}`),l=new URL(i);if(this.wrapperId||this.element)throw new Error("Tried to initialize two frames with the same FrameBricklayer instance");this.element=document.createElement("iframe"),Object.entries(u).forEach(([h,g])=>{l.searchParams.set(h,g)}),Object.entries(p).forEach(([h,g])=>{this.element.setAttribute(h,g)}),this.element.src=l.toString(),this.element.id=c,b.appendChild(this.element),this.wrapperId=s}destroy(){if(!this.wrapperId)throw new Error("Tried to destroy a frame before it was initialized");let s=document.querySelector(`#${this.wrapperId}`);!!s&&!!s.querySelector(`#${this.element.id}`)&&s.removeChild(this.element),this.wrapperId=null,this.element=null}};I();var $i=class{constructor(s){this.observers={};this.sourceBlockList=["vue-devtools-proxy","vue-devtools-backend"];this.originBlockList=["https://sketchfab.com"];this.publish=(s,i={})=>{this.logger.log("MessageBridge","Posting message to frame",s,i),this.contentWindow.postMessage({type:s,data:i},this.allowedOrigins)};this.listen=(s,i)=>{this.observers[s]||(this.observers[s]=new ie({logger:this.logger})),this.observers[s].subscribe(i)};this.onReceiveMessage=s=>{let{type:i,data:c,source:u}=s.data;if(this.sourceBlockList.includes(u)||this.originBlockList.includes(s.origin))return;let p=!!i,b=!this.domains.length||this.domains.includes(s.origin),l=this.observers.hasOwnProperty(i);if(this.logger.log("MessageBridge",`Message received -
        TYPE: ${s.type}
        ORIGIN: ${s.origin}
        DATA: ${JSON.stringify(s.data)} `),!p||!b||!l){this.logger.log("MessageBridge","Message discarded");return}this.observers[i].publish(c)};let{contentWindow:i,domains:c=[],allowedOrigins:u="*",sourceBlockList:p=[],logger:b}=s;if(this.logger=b,this.domains=c,this.allowedOrigins=u,this.sourceBlockList.push(...p),typeof window=="undefined")throw new Error("MessageBridge: window is undefined");this.contentWindow=i,window.addEventListener("message",this.onReceiveMessage)}destroy(){Object.entries(this.observers).forEach(([s,i])=>{i.reset(),delete this.observers[s]}),window.removeEventListener("message",this.onReceiveMessage),delete this.logger,delete this.allowedOrigins,delete this.contentWindow,delete this.domains,delete this.observers,delete this.sourceBlockList}};I();var nl="sv-video-frame",Hn=class{constructor(s){this.logger=new oe("@superviz/sdk/video-conference-manager");this.frameStateObserver=new ie({logger:this.logger});this.frameSizeObserver=new ie({logger:this.logger});this.waitingForHostObserver=new ie({logger:this.logger});this.realtimeEventsObserver=new ie({logger:this.logger});this.sameAccountErrorObserver=new ie({logger:this.logger});this.devicesObserver=new ie({logger:this.logger});this.meetingStateObserver=new ie({logger:this.logger});this.meetingConnectionObserver=new ie({logger:this.logger});this.participantJoinedObserver=new ie({logger:this.logger});this.participantLeftObserver=new ie({logger:this.logger});this.participantListObserver=new ie({logger:this.logger});this.frameState=0;this.layoutModalsAndCamerasConfig=(s,i)=>{let c=s,u=i,p=["left","right","bottom","top"].includes(u),b=["left","right","center"].includes(c);return p||(u="right"),b||(c="right"),this.browserService.isMobileDevice?(u="bottom",{layoutPosition:c,camerasPosition:u}):(c==="left"&&u==="right"&&(c="right"),c==="right"&&u==="left"&&(c="left"),{layoutPosition:c,camerasPosition:u})};this.onFrameLoad=()=>{this.messageBridge=new $i({logger:this.logger,contentWindow:this.bricklayer.element.contentWindow}),this.addMessagesListeners(),this.updateFrameState(2),this.updateFrameLocale(),this.updateMeetingAvatars(),this.onWindowResize(),this.setCustomColors()};this.setFrameOffset=s=>{let i=s!=null?s:{};["top","bottom","left","right"].forEach(c=>{Object.keys(i).includes(c)||(i[c]=0)}),this.frameOffset=i};this.setCustomColors=()=>{!this.customColors||this.messageBridge.publish("frame.color-list-update",this.customColors)};this.setFrameStyle=s=>{let i=document.createElement("style"),{bottom:c,left:u,right:p,top:b}=this.frameOffset;if(i.innerHTML=`
      :root {
        --superviz-offset-top: ${b}px;
        --superviz-offset-right: ${p}px;
        --superviz-offset-left: ${u}px;
        --superviz-offset-bottom: ${c}px;
      }     
    `,document.head.appendChild(i),this.browserService.isMobileDevice){this.bricklayer.element.classList.add("sv-video-frame--bottom");return}this.bricklayer.element.classList.add(`sv-video-frame--${s}`)};this.onFrameDimensionsUpdate=({width:s,height:i})=>{let c=document.getElementById(nl),{bottom:u,right:p,left:b,top:l}=this.frameOffset,h=this.isWaterMarkEnabled?40:0,g=`${s}px`,O=`${i+h}px`;(s>=window.innerWidth||this.isHorizontalCameraEnabled)&&(g=`calc(100% - ${p}px - ${b}px)`),i>=window.innerHeight&&(O=`calc(100% - ${l}px - ${u}px)`),c.style.width=g,c.style.height=O,this.frameSizeObserver.publish({width:c.offsetWidth,height:c.offsetHeight})};this.onWindowResize=()=>{let{top:s,bottom:i,right:c,left:u}=this.frameOffset,{innerHeight:p,innerWidth:b}=window,l=p-s-i,h=b-c-u;!this.messageBridge||this.messageBridge.publish("frame.parent-window-size-update",{height:l,width:h})};this.updateFrameLocale=()=>{var p,b;if(!this.frameLocale||!((p=this.frameLocale)!=null&&p.language)&&((b=this.frameLocale)==null?void 0:b.locales))return;let{language:s,locales:i}=this.frameLocale,c=i.map(l=>l==null?void 0:l.language),u=["en",...c];if(s&&!u.includes(s))throw new Error("The default language is not available in the language listing.");this.messageBridge.publish("frame.locales-update",this.frameLocale)};this.updateMeetingAvatars=()=>{this.messageBridge.publish("frame.avatar-list-update",this.meetingAvatars)};this.onParticipantJoined=s=>{this.participantJoinedObserver.publish(s)};this.onParticipantLeft=s=>{this.participantLeftObserver.publish(s)};this.onMeetingHostChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.host-change",data:s})};this.onMeetingKickParticipant=s=>{this.realtimeEventsObserver.publish({event:"meeting.kick-participant",data:s})};this.onFollowParticipantDidChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.follow-participant",data:s})};this.onGoToDidChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.go-to-participant",data:s})};this.onGather=()=>{this.realtimeEventsObserver.publish({event:"realtime.gather",data:!0})};this.onGridModeChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.grid-mode-change",data:s})};this.onDrawingChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.drawing-change",data:s})};this.onTranscriptChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.transcript-change",data:s})};this.onSameAccountError=s=>{this.sameAccountErrorObserver.publish(s)};this.onDevicesChange=s=>{this.devicesObserver.publish(s)};this.meetingStateUpdate=s=>{this.meetingStateObserver.publish(s)};this.onConnectionStatusChange=s=>{this.meetingConnectionObserver.publish(s)};this.onWaitingForHostDidChange=s=>{this.waitingForHostObserver.publish(s)};this.onParticipantListUpdate=s=>{this.participantListObserver.publish(s)};var ze,Nt,yt,Dt;let{language:i,canUseCams:c,canUseChat:u,canUseScreenshare:p,canUseDefaultAvatars:b,canUseFollow:l,canUseGoTo:h,canUseGather:g,canUseDefaultToolbar:O,canUseTranscription:T,browserService:P,offset:L,locales:R,avatars:N,customColors:K,waterMark:Y,layoutPosition:fe,camerasPosition:he,skipMeetingSettings:ge,devices:j,layoutMode:q,collaborationMode:me}=s;this.browserService=P;let _e=this.layoutModalsAndCamerasConfig(fe,he),ae=document.createElement("div");this.frameConfig={apiKey:V.get("apiKey"),apiUrl:V.get("apiUrl"),ablyKey:V.get("ablyKey"),debug:V.get("debug"),roomId:V.get("roomId"),limits:V.get("limits"),collaborationMode:me,canUseFollow:l,canUseGoTo:h,canUseCams:c,canUseChat:u,canUseGather:g,canUseScreenshare:p,canUseDefaultAvatars:b,canUseTranscription:T,camerasPosition:(ze=_e.camerasPosition)!=null?ze:"right",canUseDefaultToolbar:O,devices:{audioInput:(Nt=j==null?void 0:j.audioInput)!=null?Nt:!0,audioOutput:(yt=j==null?void 0:j.audioOutput)!=null?yt:!0,videoInput:(Dt=j==null?void 0:j.videoInput)!=null?Dt:!0},waterMark:Y,layoutMode:q,skipMeetingSettings:ge,layoutPosition:_e.layoutPosition},this.customColors=K,ae.classList.add("sv_video_wrapper"),ae.id="sv-video-wrapper",document.body.appendChild(ae),this.updateFrameState(1),this.bricklayer=new zi,this.bricklayer.build(ae.id,V.get("conferenceLayerUrl"),nl,void 0,{allow:"camera *;microphone *; display-capture *;"}),this.setFrameOffset(L),this.setFrameStyle(_e.camerasPosition),this.bricklayer.element.addEventListener("load",this.onFrameLoad),this.frameLocale={language:i,locales:R},this.meetingAvatars=N,window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize)}get isWaterMarkEnabled(){return this.browserService.isMobileDevice?!1:this.frameConfig.waterMark}get isHorizontalCameraEnabled(){return this.browserService.isMobileDevice?!1:["top","bottom"].includes(this.frameConfig.camerasPosition)}addMessagesListeners(){this.messageBridge.listen("meeting.waiting-for-host",this.onWaitingForHostDidChange),this.messageBridge.listen("meeting.participant-joined",this.onParticipantJoined),this.messageBridge.listen("meeting.participant-list-update",this.onParticipantListUpdate),this.messageBridge.listen("meeting.participant-left",this.onParticipantLeft),this.messageBridge.listen("meeting.host-change",this.onMeetingHostChange),this.messageBridge.listen("meeting.kick-participant",this.onMeetingKickParticipant),this.messageBridge.listen("meeting.same-participant-error",this.onSameAccountError),this.messageBridge.listen("meeting.state-update",this.meetingStateUpdate),this.messageBridge.listen("meeting.connection-status-change",this.onConnectionStatusChange),this.messageBridge.listen("meeting.devices-change",this.onDevicesChange),this.messageBridge.listen("realtime.grid-mode-change",this.onGridModeChange),this.messageBridge.listen("realtime.drawing-change",this.onDrawingChange),this.messageBridge.listen("realtime.transcript-change",this.onTranscriptChange),this.messageBridge.listen("frame.dimensions-update",this.onFrameDimensionsUpdate),this.messageBridge.listen("realtime.follow-participant",this.onFollowParticipantDidChange),this.messageBridge.listen("realtime.go-to-participant",this.onGoToDidChange),this.messageBridge.listen("realtime.gather",this.onGather)}updateFrameState(s){s!==this.frameState&&(this.frameState=s,this.frameStateObserver.publish(this.frameState));let i={[1]:6,[2]:7,[0]:8};this.meetingStateUpdate(i[s])}start(s){this.messageBridge.publish("meeting.start",at(pe({},s),{config:this.frameConfig}))}leave(){this.messageBridge.publish("meeting.leave"),this.destroy()}destroy(){var s,i;(s=this.messageBridge)==null||s.destroy(),(i=this.bricklayer)==null||i.destroy(),this.frameSizeObserver.destroy(),this.realtimeEventsObserver.destroy(),this.sameAccountErrorObserver.destroy(),this.devicesObserver.destroy(),this.meetingStateObserver.destroy(),this.meetingConnectionObserver.destroy(),this.participantJoinedObserver.destroy(),this.participantLeftObserver.destroy(),this.bricklayer=null,this.frameState=null}publishMessageToFrame(s,i){this.messageBridge.publish(s,i)}};var ws=class extends je{constructor(i){var c,u;super();this.participantToFrameList=[];this.participantsOnMeeting=[];this.startVideo=()=>{var i,c,u,p,b,l,h,g,O,T,P,L,R,N,K,Y,fe,he,ge,j,q,me,_e,ae,ze,Nt,yt,Dt,zn,ut,et,$n,Bt;this.videoConfig={language:(i=this.params)==null?void 0:i.language,canUseTranscription:((c=this.params)==null?void 0:c.transcriptOff)===!1,canUseChat:!((u=this.params)!=null&&u.chatOff),canUseCams:!((p=this.params)!=null&&p.camsOff),canUseScreenshare:!((b=this.params)!=null&&b.screenshareOff),canUseDefaultAvatars:!!((l=this.params)!=null&&l.defaultAvatars)&&!((g=(h=this.localParticipant)==null?void 0:h.avatar)!=null&&g.model3DUrl),canUseGather:!!((O=this.params)!=null&&O.enableGather),canUseFollow:!!((T=this.params)!=null&&T.enableFollow),canUseGoTo:!!((P=this.params)!=null&&P.enableGoTo),canUseDefaultToolbar:(R=(L=this.params)==null?void 0:L.defaultToolbar)!=null?R:!0,camerasPosition:(K=(N=this.params)==null?void 0:N.collaborationMode)==null?void 0:K.position,devices:(Y=this.params)==null?void 0:Y.devices,skipMeetingSettings:(fe=this.params)==null?void 0:fe.skipMeetingSettings,browserService:this.browserService,offset:(he=this.params)==null?void 0:he.offset,locales:(j=(ge=this.params)==null?void 0:ge.locales)!=null?j:[],avatars:(me=(q=this.params)==null?void 0:q.avatars)!=null?me:[],customColors:V.get("colors"),collaborationMode:(ze=(ae=(_e=this.params)==null?void 0:_e.collaborationMode)==null?void 0:ae.enabled)!=null?ze:!0,layoutPosition:((yt=(Nt=this.params)==null?void 0:Nt.collaborationMode)==null?void 0:yt.enabled)===!1?"center":(ut=(zn=(Dt=this.params)==null?void 0:Dt.collaborationMode)==null?void 0:zn.modalPosition)!=null?ut:"center",layoutMode:(Bt=($n=(et=this.params)==null?void 0:et.collaborationMode)==null?void 0:$n.initialView)!=null?Bt:"list",waterMark:this.showWaterMarkType},this.logger.log("video conference @ start video",this.videoConfig),this.videoManager=new Hn(this.videoConfig),this.subscribeToVideoEvents()};this.subscribeToVideoEvents=()=>{this.logger.log("video conference @ subscribe to video events"),this.videoManager.meetingConnectionObserver.subscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.subscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.subscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.subscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.subscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.subscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.subscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.subscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.subscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.subscribe(this.onSameAccountError),this.videoManager.devicesObserver.subscribe(this.onDevicesChange)};this.unsubscribeFromVideoEvents=()=>{this.logger.log("video conference @ unsubscribe from video events"),this.videoManager.meetingConnectionObserver.unsubscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.unsubscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.unsubscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.unsubscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.unsubscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.unsubscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.unsubscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.unsubscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.unsubscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.unsubscribe(this.onSameAccountError),this.videoManager.devicesObserver.unsubscribe(this.onDevicesChange)};this.suscribeToRealtimeEvents=()=>{this.logger.log("video conference @ subscribe to realtime events"),this.realtime.kickAllParticipantsObserver.subscribe(this.onKickAllParticipantsDidChange),this.realtime.kickParticipantObserver.subscribe(this.onKickLocalParticipant),this.realtime.participantJoinedObserver.subscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.subscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.subscribe(this.onRealtimeParticipantsDidChange),this.realtime.hostObserver.subscribe(this.onHostParticipantDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("video conference @ unsubscribe from realtime events"),this.realtime.kickAllParticipantsObserver.unsubscribe(this.onKickAllParticipantsDidChange),this.realtime.participantJoinedObserver.unsubscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.unsubscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.unsubscribe(this.onRealtimeParticipantsDidChange),this.realtime.hostObserver.unsubscribe(this.onHostParticipantDidChange)};this.createParticipantFromAblyPresence=i=>{var c;return{id:i.clientId,color:this.realtime.getSlotColor((c=i.data)==null?void 0:c.slotIndex).color,avatar:i.data.avatar,type:i.data.type,name:i.data.name,isHost:this.realtime.hostClientId===i.clientId}};this.onFrameSizeDidChange=i=>{this.publish("frame.dimensions-update",i)};this.onWaitingForHost=i=>{this.publish("meeting.waiting-for-host",i)};this.onConnectionStatusChange=i=>{this.logger.log("video conference @ on connection status change",i);let c=[2,4,3,6];c.includes(i)&&this.realtime.freezeSync(!0),c.includes(this.connectionService.oldConnectionStatus)&&!c.includes(i)&&this.realtime.freezeSync(!1),this.publish("meeting.connection-status-change",i)};this.onMeetingStateChange=i=>{this.logger.log("video conference @ on meeting state change",i),this.publish("meeting.state-update",i)};this.onSameAccountError=i=>{this.publish("meeting.same-participant-error",i),this.internalRemoveComponent()};this.onDevicesChange=i=>{this.publish("meeting.devices-change",i)};this.onFrameStateChange=i=>{this.logger.log("video conference @ on frame state change",i),i===2&&(this.videoManager.start({group:this.group,participant:this.localParticipant,roomId:V.get("roomId")}),this.publish("meeting.start"))};this.onRealtimeEventFromFrame=({event:i,data:c})=>{this.logger.log("video conference @ on realtime event from frame",i,c);let u={["realtime.host-change"]:p=>this.realtime.setHost(p),["realtime.gather"]:p=>this.realtime.setGather(p),["realtime.grid-mode-change"]:p=>this.realtime.setGridMode(p),["realtime.drawing-change"]:p=>{this.realtime.setDrawing(p)},["realtime.follow-participant"]:p=>{this.realtime.setFollowParticipant(p)},["meeting.kick-participant"]:p=>{this.realtime.setKickParticipant(p)},["realtime.transcript-change"]:p=>{this.realtime.setTranscript(p)},["realtime.go-to-participant"]:p=>{this.eventBus.publish("realtime.go-to-participant",p)}}[i](c);this.publish(i,c)};this.onParticipantJoined=i=>{if(this.logger.log("video conference @ on participant joined",i),this.localParticipant=i,this.publish("meeting.participant-joined",i),this.publish("my-participant.joined",i),this.videoConfig.canUseDefaultAvatars){this.realtime.updateMyProperties({avatar:i.avatar,name:i.name,type:i.type});return}this.realtime.updateMyProperties({name:i.name,type:i.type})};this.onParticipantLeft=i=>{this.logger.log("video conference @ on participant left",this.localParticipant),this.publish("my-participant.left",this.localParticipant),this.internalRemoveComponent()};this.onParticipantListUpdate=i=>{this.logger.log("video conference @ on participant list update",i),!(0,Cs.isEqual)(this.participantsOnMeeting,i)&&(this.publish("meeting.participant-list-update",i),this.participantsOnMeeting.length!==i.length&&this.publish("meeting.amount-of-participants-update",i.length),this.participantsOnMeeting=i)};this.onKickAllParticipantsDidChange=i=>{this.logger.log("video conference @ on kick all participants did change",i),this.publish("meeting.kick-all-participants",i),this.internalRemoveComponent()};this.onKickLocalParticipant=()=>{this.logger.log("video conference @ on kick local participant"),this.publish("meeting.kick-participant",this.localParticipant),this.internalRemoveComponent()};this.onRoomInfoUpdated=i=>{this.logger.log("video conference @ on room info updated",i);let{isGridModeEnable:c,followParticipantId:u,gather:p,drawing:b,transcript:l}=i;this.videoManager.publishMessageToFrame("realtime.grid-mode-change",c),this.videoManager.publishMessageToFrame("realtime.drawing-change",b),this.videoManager.publishMessageToFrame("realtime.follow-participant",u),this.videoManager.publishMessageToFrame("realtime.transcript-change",l),this.realtime.hostClientId===this.localParticipant.id&&p&&this.realtime.setGather(!1)};this.onRealtimeParticipantsDidChange=i=>{this.logger.log("video conference @ on participants did change",i);let c=Object.values(i).map(u=>({timestamp:u.timestamp,connectionId:u.connectionId,participantId:u.clientId,color:this.realtime.getSlotColor(u.data.slotIndex).name,name:u.data.name,isHost:this.realtime.hostClientId===u.clientId,avatar:u.data.avatar,type:u.data.type}));(0,Cs.isEqual)(this.participantToFrameList,c)||this.videoManager.publishMessageToFrame("realtime.participant-list-update",c),this.participantToFrameList=c};this.onHostParticipantDidChange=i=>{this.logger.log("video conference @ on host participant did change",i),this.videoManager.publishMessageToFrame("realtime.host-change",i==null?void 0:i.newHostParticipantId)};this.onParticipantJoinedOnRealtime=i=>{this.logger.log("video conference @ on participant joined on realtime",i),this.publish("meeting.participant-joined",this.createParticipantFromAblyPresence(i))};this.onParticipantLeftOnRealtime=i=>{this.logger.log("video conference @ on participant left on realtime",i),this.publish("meeting.participant-left",this.createParticipantFromAblyPresence(i))};this.params=at(pe({},i),{userType:(u=(c=i==null?void 0:i.participantType)!=null?c:i==null?void 0:i.userType)!=null?u:"guest"}),this.name="videoConference",this.logger=new oe(`@superviz/sdk/${"videoConference"}`),this.browserService=new ki,this.connectionService=new Hi,this.connectionService.addListeners(),this.connectionService.connectionStatusObserver.subscribe(this.onConnectionStatusChange)}toggleMeetingSetup(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-setup")}toggleMicrophone(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-microphone")}toggleCam(){this.videoManager.publishMessageToFrame("meeting-controls.toggle-cam")}toggleScreenShare(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-screenshare")}toggleChat(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-chat")}toggleTranscript(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-transcript")}hangUp(){this.videoManager.publishMessageToFrame("hang-up")}start(){var i;this.logger.log("video conference @ start"),this.params.userType!=="guest"&&(this.localParticipant.type=this.params.userType),this.realtime.setKickParticipantsOnHostLeave(!((i=this.params)!=null&&i.allowGuests)),this.suscribeToRealtimeEvents(),this.showWaterMarkType=V.get("waterMark"),this.startVideo()}destroy(){this.logger.log("video conference @ destroy"),this.publish("destroy"),this.unsubscribeFromRealtimeEvents(),this.unsubscribeFromVideoEvents(),this.videoManager.leave(),this.connectionService.removeListeners()}internalRemoveComponent(){this.logger.log("video conference @ internal remove component");let{data:i}=this.realtime.participant,c=i.activeComponents.filter(u=>u!=="videoConference");this.realtime.updateMyProperties({activeComponents:c,type:"guest"}),this.realtime.setKickParticipantsOnHostLeave(!1),this.detach()}};I();var Os=class extends je{constructor(i,c){super();this.subscribeToRealtimeEvents=()=>{this.logger.log("presence-mouse component @ subscribe to realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.subscribe(this.onParticipantsDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.unsubscribe(this.onParticipantsDidChange)};this.setParticipantPrivate=i=>{this.isPrivate=i,this.realtime.updatePresenceMouse(at(pe({},this.localParticipant),{visible:!i}))};this.animate=()=>{this.renderDivWrapper(),this.updateParticipantsMouses(),requestAnimationFrame(this.animate)};this.goToMouse=i=>{let c=this.presences.get(i);if(!c)return;let u=this.canvas.getBoundingClientRect(),{width:p,height:b}=u,{x:l,y:h}=c,g=p/2,O=b/2,T=g-l,P=O-h;this.goToMouseCallback&&this.goToMouseCallback({x:T,y:P})};this.onMyParticipantMouseMove=i=>{let c=this.canvas.getContext("2d"),u=this.canvas.getBoundingClientRect(),p=i.x-u.left,b=i.y-u.top,h=(c==null?void 0:c.getTransform()).inverse(),g=new DOMPoint(p,b).matrixTransform(h);this.realtime.updatePresenceMouse(at(pe({},this.localParticipant),{x:g.x,y:g.y,visible:!this.isPrivate}))};this.onParticipantsDidChange=i=>{this.logger.log("presence-mouse component @ on participants did change",i),Object.values(i).forEach(c=>{if(c.id!==this.localParticipant.id){if(this.following&&c.id!==this.following&&this.presences.has(c.id)){this.removePresenceMouseParticipant(c.id);return}this.presences.set(c.id,c)}}),this.following&&this.presences.get(this.following)&&this.goToMouse(this.following)};this.onMyParticipantMouseOut=i=>{let{x:c,y:u,width:p,height:b}=this.canvas.getBoundingClientRect();i.x>0&&i.y>0&&i.x<c+p&&i.y<u+b||this.realtime.updatePresenceMouse(pe({visible:!1},this.localParticipant))};this.onParticipantLeftOnRealtime=i=>{this.removePresenceMouseParticipant(i.id)};this.updateParticipantsMouses=()=>{this.presences.forEach(i=>{if(!(i!=null&&i.visible)){this.removePresenceMouseParticipant(i.id);return}this.renderPresenceMouses(i)})};this.renderPresenceMouses=i=>{let u=document.getElementById(`mouse-${i.id}`);u||(u=this.createMouseElement(i));let p=document.getElementById(`mouse-${i.id}`),b=document.getElementById(`mouse-${i.id}`);if(!p||!b)return;let l=p.getElementsByClassName("mouse-user-name")[0],h=b.getElementsByClassName("pointer-mouse")[0];h&&(h.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers/${i.slotIndex}.svg)`),l&&(l.style.color=this.textColorValues.includes(i.slotIndex)?"#FFFFFF":"#26242A",l.style.backgroundColor=i.color,l.innerHTML=i.name);let{x:g,y:O}=i,T=this.canvas.getContext("2d"),P=T==null?void 0:T.getTransform(),L=P==null?void 0:P.e,R=P==null?void 0:P.f,N=g+L,K=O+R,Y=this.divWrapper.clientWidth>N&&this.divWrapper.clientHeight>K&&i.visible;u.style.opacity=Y?"1":"0",u.style.left=`${N}px`,u.style.top=`${K}px`};this.followMouse=i=>{this.following=i};if(this.name="presence",this.logger=new oe(`@superviz/sdk/${"presence"}`),this.canvas=document.getElementById(i),this.presences=new Map,!this.canvas){let u=`Canvas with id ${i} not found`;throw this.logger.log(u),new Error(u)}this.divWrapper=this.renderDivWrapper(),this.animateFrame=requestAnimationFrame(this.animate),this.goToMouseCallback=c==null?void 0:c.onGoToPresence}get textColorValues(){return[2,4,5,7,8,16]}start(){this.logger.log("presence-mouse component @ start"),this.canvas.addEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.addEventListener("mouseout",this.onMyParticipantMouseOut),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.subscribeToRealtimeEvents(),this.realtime.enterPresenceMouseChannel(this.localParticipant)}destroy(){this.logger.log("presence-mouse component @ destroy"),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.realtime.leavePresenceMouseChannel(),this.unsubscribeFromRealtimeEvents(),cancelAnimationFrame(this.animateFrame),this.canvas.removeEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.removeEventListener("mouseout",this.onMyParticipantMouseOut),this.divWrapper.remove()}renderDivWrapper(){let i=this.canvas.getBoundingClientRect(),c=document.getElementById("superviz-presence-mouse-wrapper");return c||(c=document.createElement("div"),c.id="superviz-presence-mouse-wrapper",this.canvas.parentElement.style.position="relative",this.canvas.parentElement.appendChild(c)),c.style.position="fixed",c.style.top=`${i.top}px`,c.style.left=`${i.left}px`,c.style.width=`${i.width}px`,c.style.height=`${i.height}px`,c.style.pointerEvents="none",c.style.overflow="hidden",c.style.zIndex="2",c}removePresenceMouseParticipant(i){let c=document.getElementById(`mouse-${i}`);c&&(c.remove(),this.presences.delete(i))}createMouseElement(i){let c=document.createElement("div");c.setAttribute("id",`mouse-${i.id}`),c.setAttribute("class","mouse-follower");let u=document.createElement("div");u.setAttribute("class","pointer-mouse");let p=document.createElement("div");return p.setAttribute("class","mouse-user-name"),p.innerHTML=i.name,c.appendChild(u),c.appendChild(p),this.divWrapper.appendChild(c),c}};I();I();var Vi=class{constructor(s){this.observers=new Map;this.subscribe=(s,i)=>{this.logger.log("pubsub service @ subscribe",{event:s,callback:i}),this.observers.has(s)||this.observers.set(s,new ie),this.observers.get(s).subscribe(i)};this.unsubscribe=(s,i)=>{this.logger.log("pubsub service @ unsubscribe",{event:s,callback:i}),this.observers.has(s)&&(this.observers.get(s).reset(),this.observers.delete(s))};this.publish=(s,i)=>{this.logger.log("pubsub service @ publish",{event:s,data:i}),this.realtime.setSyncProperty(s,i)};this.publishEventToClient=(s,i)=>{this.logger.log("pubsub service @ publishEventToClient",{event:s,data:i}),this.observers.has(s)&&this.observers.get(s).publish(i)};this.destroy=()=>{this.logger.log("pubsub service @ destroy"),this.realtime.syncPropertiesObserver.unsubscribe(this.onSyncPropertiesChange),this.observers.forEach(s=>s.destroy()),this.observers.clear()};this.onSyncPropertiesChange=s=>{this.logger.log("pubsub service @ onSyncPropertiesChange",{properties:s}),Object.entries(s).forEach(([i,c])=>{this.publishEventToClient(i,c)})};this.logger=new oe("@superviz/sdk/pubsub"),this.realtime=s,this.realtime.syncPropertiesObserver.subscribe(this.onSyncPropertiesChange),this.logger.log("PubSub created")}fetchHistory(s){return this.realtime.fetchSyncClientProperty(s)}};I();var Ms=class extends je{constructor(){super();this.callbacksToSubscribeWhenJoined=[];this.state="STOPPED";this.publish=(i,c)=>{if(!this.pubsub){let u=`Realtime component is not started yet. You can't publish event ${i} before start`;this.logger.log(u);return}this.pubsub.publish(i,c)};this.subscribe=(i,c)=>{if(!this.pubsub){this.callbacksToSubscribeWhenJoined.push({event:i,callback:c});return}this.pubsub.subscribe(i,c)};this.unsubscribe=(i,c)=>{this.pubsub.unsubscribe(i,c)};this.name="realtime",this.logger=new oe("@superviz/sdk/realtime-component")}destroy(){this.logger.log("destroyed"),this.changeState("STOPPED"),this.pubsub.destroy()}start(){this.logger.log("started"),this.pubsub=new Vi(this.realtime),this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:c})=>{this.pubsub.subscribe(i,c)}),this.changeState("STARTED")}fetchHistory(i){return this.pubsub.fetchHistory(i)}changeState(i){this.logger.log("realtime component @ changeState - state changed",i),this.state=i,this.pubsub.publishEventToClient("realtime-component.state-changed",this.state)}};I();var il=qt(Un());I();var Is=(u=>(u.TOP_LEFT="top-left",u.TOP_RIGHT="top-right",u.BOTTOM_LEFT="bottom-left",u.BOTTOM_RIGHT="bottom-right",u))(Is||{});var Ls=class extends je{constructor(i){super();this.participants=[];this.onParticipantListUpdate=i=>{let u=Object.values(i).filter(({data:p})=>{var b;return(b=p.activeComponents)==null?void 0:b.includes("whoIsOnline")}).filter(({data:{isPrivate:p,id:b}})=>!p||p&&b===this.localParticipant.id).map(({data:p})=>{let{slotIndex:b,id:l,name:h,avatar:g,activeComponents:O}=p,{color:T}=this.realtime.getSlotColor(b),P=this.localParticipant.id===l,L=O.some(R=>R.includes("presence"));return this.setLocalData(P,!L,T,L),{name:h,id:l,slotIndex:b,color:T,isLocal:P,joinedPresence:L,avatar:g}});(0,il.isEqual)(u,this.participants)||(this.following&&(u.find(({id:b})=>b===this.following)||this.stopFollowing({clientId:this.following})),this.participants=u,this.element.updateParticipants(this.participants))};this.setLocalData=(i,c,u,p)=>{!i||(this.element.disableDropdown=c,this.element.localParticipantData={color:u,id:this.localParticipant.id,joinedPresence:p})};this.goToMousePointer=({detail:i})=>{this.eventBus.publish("realtime.go-to-participant",i.id)};this.followMousePointer=({detail:i})=>{this.eventBus.publish("realtime.local-follow-participant",i.id),this.following=i.id};this.setPrivate=({detail:{isPrivate:i,id:c}})=>{this.eventBus.publish("realtime.private-mode",i),this.realtime.setPrivateWIOParticipant(c,i)};this.setFollow=i=>{var c;if(i.clientId!==this.localParticipant.id){if(this.followMousePointer({detail:{id:(c=i==null?void 0:i.data)==null?void 0:c.id}}),!i.data.id){this.element.following=void 0;return}this.following=i.data.id,this.element.following=i.data}};this.follow=i=>{var c;this.realtime.setFollowWIOParticipant(pe({},i.detail)),this.following=(c=i.detail)==null?void 0:c.id};this.stopFollowing=i=>{var c;i.clientId===((c=this.element.following)==null?void 0:c.id)&&(this.element.following=void 0,this.following=void 0,this.eventBus.publish("realtime.local-follow-participant",void 0))};this.gather=i=>{this.realtime.setGatherWIOParticipant(pe({},i.detail))};this.position=i!=null?i:"top-right",this.name="whoIsOnline",this.logger=new oe("@superviz/sdk/who-is-online-component")}start(){this.subscribeToRealtimeEvents(),this.positionWhoIsOnline(),this.addListeners(),this.realtime.enterWIOChannel(this.localParticipant)}destroy(){this.unsubscribeToRealtimeEvents(),this.realtime.leaveWIOChannel(),this.removeListeners(),this.element.remove(),this.element=null,this.participants=null}addListeners(){this.element.addEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.addEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.addEventListener("realtime.private-mode",this.setPrivate),this.element.addEventListener("realtime.follow-participant",this.follow),this.element.addEventListener("realtime.gather",this.gather)}removeListeners(){this.element.removeEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.removeEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.removeEventListener("realtime.private-mode",this.setPrivate),this.element.removeEventListener("realtime.follow-participant",this.follow),this.element.removeEventListener("realtime.gather",this.gather)}subscribeToRealtimeEvents(){this.realtime.participantsObserver.subscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.subscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.subscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.subscribe(this.setFollow),this.realtime.gatherWIOObserver.subscribe(this.goToMousePointer)}unsubscribeToRealtimeEvents(){this.realtime.participantsObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.unsubscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.unsubscribe(this.setFollow),this.realtime.gatherWIOObserver.unsubscribe(this.goToMousePointer)}positionWhoIsOnline(){if(this.element=document.createElement("superviz-who-is-online"),Object.values(Is).includes(this.position.toLowerCase())){document.body.appendChild(this.element);let[u,p]=this.position.split("-");this.element.position=`${u}: 20px; ${p}: 40px;`;return}let c=document.getElementById(this.position);if(!c){this.element.position="top: 20px; right: 40px;",document.body.appendChild(this.element);return}c.appendChild(this.element),this.element.position="position: relative;"}};export{As as CanvasPin,Es as Comments,Ts as HTMLPin,Os as MousePointers,Ms as Realtime,ws as VideoConference,Ls as WhoIsOnline};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
